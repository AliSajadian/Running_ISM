(function(){"use strict";var e={8744:function(e,t,a){var r=a(5130),o=a(6768),s=a(4232);const l={key:0,class:"flex flex-col justify-center items-center p-5"};function n(e,t,a,r,n,i){const d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",{class:(0,s.C4)(["flex flex-col",i.pageClass])},[i.isReportPage?((0,o.uX)(),(0,o.Wv)(d,{key:1})):((0,o.uX)(),(0,o.CE)("main",l,[(0,o.bF)(d)]))],2)}var i={computed:{isReportPage(){const e=this.$route.path;return(e.includes("Report")||e.includes("/ProductsPage")||e.includes("/InvoicePage"))&&!e.includes("/chooseReport")},pageClass(){const e=this.$route.path;return this.isReportPage?"w-full min-h-screen":e.includes("/chooseReport")?"container mx-auto gap-6 max-w-3xl":"container mx-auto gap-6 max-w-2xl"}}},d=a(1241);const u=(0,d.A)(i,[["render",n]]);var c=u,m=a(1387),h=a.p+"img/logo.ab0d8d6a.png";const p={class:"home"};function g(e,t,a,r,s,l){return(0,o.uX)(),(0,o.CE)("div",p,[...t[0]||(t[0]=[(0,o.Lk)("img",{alt:"Vue logo",src:h},null,-1)])])}var f={name:"HomeView",components:{}};const y=(0,d.A)(f,[["render",g]]);var k=y,b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAABHCAMAAAAdv7jcAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAC3FBMVEUjn0AxpUxPsmZKsGI7qlU2p1A1p1BFrl1ArFlErVyGypZ6xYx/x5CByJJ+x4+m2LKFypWEypVlu3p9xo6EyZSRz59zwoaCyJJ1w4ee1Kp7xYxnvXtwwYNat3BlvHlju3ef1axZt29rv3+i1q50woak17BYt25sv4Cj16+W0aSJy5ip2bS03r7K6NGw3Lq94sZ8xo5ywYS/48hmvHpbt3FQs2dduHJrvn53xIlMsWNYtm6DyZOQzp5Xtm2e1atXtmxWtmyX0qXu+PDC5crR69ef1qyh1q3g8eSl2LGk2LGg1q3//////v7vjo740tLse3v509Pvj4///f32w8PoYWHthYX75OTrdnb3y8v74+PvkJDhMDD74uLrd3f75eX3x8ffISH40NDsfn7rcnLfIyP4z8/3ycncEBDzqqrvkpLdGBjzra3ujIzcERHmUFD+9/fiOTncDw/4zMzjPT3+9vbdFhbmUlL74eHaAQHqbm797u7aAgLcCAj86+vaAwP97+/qbGzzqanaAADzq6v3ysr98PDaBAT87e3wlZX3xcX2wcH51NTbAQH40dH2xMTwmJj62trwmprthITbAwPwl5f63Nz3yMjbBgbdFxfjPz/jPDzeGhryp6fbBQXqcXH1vb3wmZncCwv1vLzreHjqcHDmVFTgKyv++/v86endFRXfIiL87OzypKTypaX++vrgKir75ub2wsLxn5/1t7fiNzfxoKDxoaHiNjb1ubnxnp70trbdExPeFxfdFBT//PzugoLcEhLtg4P639/1u7v2vLz64ODmVVXth4fvkZH629vyqKjhLy/lT0/jQEDjOzvjPj7oXl7lTk7iOzvgJyfiNDTnW1vlTU3jQUHpaWn0s7PnXV3paGjyo6PvlJTwm5v0tbXoX1/rc3PoZWXsf3/lSkrzrq7qbW30tLTqa2vtgoL0sbHvk5PpZWXyoqLrdXXzrKzhMzPhLS3eHBzeFhbTZQwQAAAAAWJLR0RLaQuFUAAAAAd0SU1FB+gBGAUHDN4yfYgAAARKSURBVGje7Zb5cxNlGMdDSQG3gBvbSF7XqKko7TZtsfGi0SiHAr5dK5Z2oUotXaUHnmjQFBFZq2JVIlqtwRgvUEjjgbW1BsUDLFI22trWoim1tUEErzT+Az5vkpJxZodfdDaj7ncmTz7zTL77mZ3Z3axGo0aNGjVq1KhRo+afyoSUaCZqU1MnxTAl9S+YmkDtxHHUaifHUavVTomhliSGU4DivclAk2QdE8B+CkWlUVOnTT+V1p1GUekZ06ZSeh19OgW7jHRqBq2jKQp2aZRBR6MzKNilUQyN0Jmkl0YZEUJnxfDscxAyxTDzXIRSCKZnzDwP0efLOmaBfVZWNs3mmNlcWpeWx6Lp5hw2X0fPzmdzLihAbB7Yc1mzJZfOzgJ7AVtwYb4OGghB46I8GhoIQePiLB00gNm8S7JJAyFoXMqSBqJnyzqIfY6pECGD9TIGoctNJhuyGhCczxVGix7pGWRCyMgwVmQzEmQYiwHODxUim4FhoAFbm83KWIxka9Hb9IyJNGwzrTabsZA09DMMNnSlrGOORpM5dx5k/gIyryJjwXwyryZjoZnMRfNOTPNCMhcnGosSjcUnaVwj65ibqcHJzL/YXhT/JMfOXVt83ZIk2a/HJUtLl5bAt/L2Mn7Zclx+Qzm+cdmKCqXtN1WurMJYuFnAuOqWylXK2suquZpasNeBfcnqW2+rUNR+e90dd64E+11gX3P3Pfa1Strvvc9Rv64e7PeDff0DGx5ct1xB+0bxoQbxYbA/AvZHxTU1Yo2C9k3iY43i4xgXP1GM8ZPi5s2iU0F7jdjwlLgF46efKcW4SXz2OXG1gvYNzRuLnnfB5d5cjvHWF4rcL9Yrec2v9eAV4kv45Ve24FfF1/C27YrecRWvv7Fjp7fFV/3m+kr7jrfefkfZZ92ud3Fr83ttde3vN3fgD0qUfs7D/ebf/WG1/aPWKCv9H7enYtXHn4i7P22o2JOMf9jP9rbu27qvde/nSXuzKvvfvtf9fXvn/hZIRwOZX5DR0EFmLRkHush0tpyYXQfIbEo0nIlG00katbKO/Z0a8SAXTZUUcH0ZQy7gCoyjC3gcXQGpKoZfBSTJEd9KktQdwx7Anhh2A7pi6JCkwNeyjoOiRuzl+T6+p5/fJXi+4fmBQ/09/Lce4TsedsEBflDwCDwPuz7+sEfggjzs+vhSgeP6Sa+P54k2jkMcNxDHLo7rIzgQ5L/nBJesoxPsncOSb2TIfcjpG/zBEfBvcw+NjA76gqOhIz8e5UYcvkHBGXL/1CgcGx70cZtCbcHjnlrJ53f+HHL+0i60B/z+X8tDo7/Veo6Hjvh/5wKO0mNC43a33y9Iw4dHuKPdbX5fUNZB7NV2ezjs7R2LhMN/EOz1hmHutEfGwrADtEcivTAJRiIRbxy9wHHsjUTIz8LRhj2KXtIgGBmD48HR5BzVYE9mVLtqV+2qXbWrdtWu2v9L9j8BIvoLPJrYlKQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjQtMDEtMjRUMDU6MDc6MTIrMDA6MDAjFBA3AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI0LTAxLTI0VDA1OjA3OjEyKzAwOjAwUkmoiwAAAABJRU5ErkJggg==";const x={class:"flex flex-row justify-center"},v={class:"rounded-lg bg-white shadow-lg max-w-sm"},w={class:"flex rounded-lg border-4 border-black shadow"},_={class:"flex flex-none flex-col items-center px-2 justify-center sm:justify-start sm:px-4 border-e-4 border-black font-bold"},C={class:"place-self-center sm:text-4xl"},L={class:"flex-grow flex flex-row px-2 gap-2 sm:gap-4 justify-center items-center sm:p-4 font-mono text-4xl sm:text-5xl font-bold"},E={class:"flex flex-none flex-col items-end justify-between px-1 py-1 bg-blue-700 border-s-4 border-black font-bold sm:text-sm text-white"},X={class:"flex flex-col items-end"},S={key:0,class:"flex flex-col items-center mt-5 gap-4"},A={class:"flex space-x-2 rtl:space-x-reverse"},F=["placeholder"],M=["placeholder"],W={id:"letterdropdown",class:"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-14 dark:bg-gray-700"},I={class:"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":"letterButtonButton"},K=["onClick"],P=["placeholder"],T={class:"mt-2 flex flex-col sm:flex-row items-center gap-1"},D={key:1,class:"flex flex-col items-center mt-5 gap-4"},N={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Q={class:"mt-1.5 list-disc list-inside"},$={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},R={class:"flex flex-col items-center gap-2 sm:flex-row sm:items-center sm:gap-1 sm:space-x-4 mt-2"},B=["onClick"],O={class:"flex flex-col gap-2 font-bold"},U={class:"mt-2 flex flex-row items-center gap-1"},z={key:0},Z={key:1},j={key:2};function H(e,t,a,l,n,i){const d=(0,o.g2)("h"),u=(0,o.g2)("lic_numer"),c=(0,o.g2)("Input"),m=(0,o.g2)("Dropdown"),h=(0,o.g2)("ModalButton"),p=(0,o.g2)("modal"),g=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(g,{title:"برسی و اضافه کردن کامیون"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",x,[(0,o.Lk)("div",v,[(0,o.Lk)("div",w,[(0,o.Lk)("label",_,[t[6]||(t[6]=(0,o.eW)(" ایران ",-1)),(0,o.Lk)("p",C,(0,s.v_)(n.year.val),1)]),(0,o.Lk)("label",L,[(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(n.second.val),1)]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(n.letter.val),1)]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(n.first.val),1)]),_:1})]),(0,o.Lk)("label",E,[t[9]||(t[9]=(0,o.Lk)("img",{src:b,class:"h-5"},null,-1)),(0,o.Lk)("span",X,[(0,o.bF)(d,null,{default:(0,o.k6)(()=>[...t[7]||(t[7]=[(0,o.eW)("IR",-1)])]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[...t[8]||(t[8]=[(0,o.eW)("IRAN",-1)])]),_:1})])])])])]),n.form?((0,o.uX)(),(0,o.CE)("form",S,[(0,o.Lk)("div",A,[(0,o.Lk)("div",null,[t[10]||(t[10]=(0,o.Lk)("label",{for:"code-1",class:"sr-only"},"First code",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.year.val=e),placeholder:n.year.val,type:"text",maxlength:"2","data-focus-input-init":"","data-focus-input-next":"code-2",id:"code-1",class:(0,s.C4)([[n.year.error?"appearance-none bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-12 h-9 py-3 text-sm font-extrabold text-center"]),required:""},null,10,F),[[r.Jo,n.year.val]])]),(0,o.Lk)("div",null,[t[11]||(t[11]=(0,o.Lk)("label",{for:"code-3",class:"sr-only"},"Third code",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.second.val=e),placeholder:n.second.val,type:"text",maxlength:"3","data-focus-input-init":"","data-focus-input-prev":"code-2","data-focus-input-next":"code-4",id:"code-3",class:(0,s.C4)([[n.second.error?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-14 h-9 py-3 text-sm font-extrabold text-center"]),required:""},null,10,M),[[r.Jo,n.second.val]])]),(0,o.Lk)("button",{id:"letterButton","data-dropdown-toggle":"letterdropdown",class:(0,s.C4)([[n.letter.error?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-9 h-9 text-sm font-extrabold rounded-lg"]),type:"button"},(0,s.v_)(n.letter.val),3),(0,o.Lk)("div",W,[(0,o.Lk)("ul",I,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.letter.alphabets,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked("letter",e),type:"button",class:"block text-center px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,K)]))),256))])]),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("label",{for:"code-4",class:"sr-only"},"Fourth code",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.first.val=e),placeholder:n.first.val,type:"text",maxlength:"2","data-focus-input-init":"","data-focus-input-prev":"code-3","data-focus-input-next":"code-5",id:"code-4",class:(0,s.C4)([[n.first.error?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-12 h-9 py-3 text-sm font-extrabold text-center"]),required:""},null,10,P),[[r.Jo,n.first.val]])])]),n.isExists?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",T,[t[13]||(t[13]=(0,o.Lk)("p",{class:"text-red-600"},"درحال حاضر پلاک ",-1)),(0,o.bF)(u,{lic:{first:this.first.val,letter:this.letter.val,second:this.second.val,country:"ایران",year:this.year.val}},null,8,["lic"]),t[14]||(t[14]=(0,o.Lk)("p",{class:"text-red-600"}," در سیستم وجود دارد.",-1))]),"Free"==this.statusOfTruck?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"w-44 block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:t[3]||(t[3]=(...e)=>i.goToAddShipmentPage&&i.goToAddShipmentPage(...e))}," رفتن به صفحه بارنامه ")):(0,o.Q3)("",!0)],64)):(0,o.Q3)("",!0),t[15]||(t[15]=(0,o.Lk)("p",{id:"helper-text-explanation",class:"text-sm text-gray-500 dark:text-gray-400"},"لطفا پلاک مورد نطر را وارد کرده و سپس بر روی دکمه چک کردن کلیک کنید.",-1)),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.check_license_number&&i.check_license_number(...e)),class:"w-44 block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," چک کردن ")])):((0,o.uX)(),(0,o.CE)("form",D,[n.error?((0,o.uX)(),(0,o.CE)("div",N,[t[17]||(t[17]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[18]||(t[18]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[16]||(t[16]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",R,[t[19]||(t[19]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[20]||(t[20]=(0,o.Lk)("p",{class:"font-medium"},"پلاک جدید",-1)),(0,o.bF)(u,{lic:{first:this.first.val,letter:this.letter.val,second:this.second.val,country:"ایران",year:this.year.val}},null,8,["lic"]),t[21]||(t[21]=(0,o.Lk)("p",{class:"font-medium"},"با موفقیت به سیستم اضافه شد.",-1))])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(c,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[5]||(t[5]=e=>n.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(m,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,B)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(p,{type:"confirm",disabled:n.error},{button:(0,o.k6)(()=>[...t[22]||(t[22]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",O,[(0,o.Lk)("div",U,[t[23]||(t[23]=(0,o.Lk)("p",null,"پلاک :",-1)),(0,o.bF)(u,{lic:{first:this.first.val,letter:this.letter.val,second:this.second.val,country:"ایران",year:this.year.val}},null,8,["lic"])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",z,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Z,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",j,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(h,{onClose:i.addTruck},null,8,["onClose"])])]),_:1},8,["disabled"])]))]),_:1})}a(4114),a(8335);var G=a(9658);const V={class:"flex flex-col items-center w-full h-full p-6 gap-4 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"},q={class:"flex flex-none items-center self-start gap-2 text-gray-900 dark:text-gray-200"},J={class:"flex-grow w-full"};function Y(e,t,a,r,l,n){return(0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("header",q,[(0,o.Lk)("div",{class:(0,s.C4)(["h-10 w-5 rounded rounded-md",[a.bgTitle?a.bgTitle:"bg-green-500"]])},null,2),(0,o.Lk)("strong",null,(0,s.v_)(a.title),1)]),t[0]||(t[0]=(0,o.Lk)("hr",{class:"border-0 w-full h-px bg-gray-200 shadow"},null,-1)),(0,o.Lk)("main",J,[(0,o.RG)(e.$slots,"default")]),t[1]||(t[1]=(0,o.Lk)("footer",{class:"w-full flex flex-row justify-center"},[(0,o.Lk)("span",{class:"flex w-16 h-3 bg-gray-200 dark:bg-gray-700 rounded-md"})],-1))])}var ee={name:"Card",props:["title","bgTitle"]};const te=(0,d.A)(ee,[["render",Y]]);var ae=te;const re=["disabled"],oe={id:"popup-modal",tabindex:"-1",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},se={class:"relative w-full flex items-center justify-center h-[calc(100%-1rem)]"},le={key:0,id:"toast-success",class:"flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},ne={key:1,id:"toast-danger",class:"flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},ie={key:2,id:"toast-warning",class:"flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},de={key:3,id:"toast-interactive",class:"w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow dark:bg-gray-800 dark:text-gray-400",role:"alert"},ue={class:"flex flex-col gap-2"},ce={class:"flex justify-center text-sm font-normal"},me={class:"flex justify-start text-sm font-normal px-2"},he={class:"grid grid-cols-2 gap-2 items-center justify-center"};function pe(e,t,a,r,s,l){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("button",{disabled:a.disabled,"data-modal-target":"popup-modal","data-modal-toggle":"popup-modal",class:"md:w-44 sm:w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.RG)(e.$slots,"button")],8,re),(0,o.Lk)("div",oe,[(0,o.Lk)("div",se,["success"==a.type?((0,o.uX)(),(0,o.CE)("div",le,[...t[0]||(t[0]=[(0,o.Fv)('<div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200"><svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"></path></svg><span class="sr-only">Check icon</span></div><div class="ms-3 text-sm font-normal">Item moved successfully.</div><button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" data-modal-hide="popup-modal" aria-label="Close"><span class="sr-only">Close</span><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg></button>',3)])])):(0,o.Q3)("",!0),"danger"==a.type?((0,o.uX)(),(0,o.CE)("div",ne,[...t[1]||(t[1]=[(0,o.Fv)('<div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-200"><svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"></path></svg><span class="sr-only">Error icon</span></div><div class="ms-3 text-sm font-normal">Item has been deleted.</div><button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" data-modal-hide="popup-modal" aria-label="Close"><span class="sr-only">Close</span><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg></button>',3)])])):(0,o.Q3)("",!0),"warning"==a.type?((0,o.uX)(),(0,o.CE)("div",ie,[...t[2]||(t[2]=[(0,o.Fv)('<div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-orange-500 bg-orange-100 rounded-lg dark:bg-orange-700 dark:text-orange-200"><svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 0 1-2 0V6a1 1 0 0 1 2 0v5Z"></path></svg><span class="sr-only">Warning icon</span></div><div class="ms-3 text-sm font-normal">Improve password difficulty.</div><button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" data-modal-hide="popup-modal" aria-label="Close"><span class="sr-only">Close</span><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg></button>',3)])])):(0,o.Q3)("",!0),"confirm"==a.type?((0,o.uX)(),(0,o.CE)("div",de,[(0,o.Lk)("div",ue,[t[4]||(t[4]=(0,o.Fv)('<header class="flex flex-row justify-between items-center gap-2"><div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-blue-500 bg-blue-100 rounded-lg dark:text-blue-300 dark:bg-blue-900"><svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 20"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 1v5h-5M2 19v-5h5m10-4a8 8 0 0 1-14.947 3.97M1 10a8 8 0 0 1 14.947-3.97"></path></svg><span class="sr-only">Refresh icon</span></div><span class="mb-1 text-sm font-semibold text-gray-900 dark:text-white"> ایا این اطلاعات درست است؟ </span><button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-white items-center justify-center flex-shrink-0 text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" data-modal-hide="popup-modal" aria-label="Close"><span class="sr-only">Close</span><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg></button></header>',1)),(0,o.Lk)("main",ce,[(0,o.RG)(e.$slots,"table")]),(0,o.Lk)("main",me,[(0,o.RG)(e.$slots,"text")]),(0,o.Lk)("footer",null,[(0,o.Lk)("div",he,[(0,o.RG)(e.$slots,"btns"),t[3]||(t[3]=(0,o.Lk)("div",null,[(0,o.Lk)("button",{"data-modal-hide":"popup-modal","aria-label":"Close",type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700"},"ویرایش")],-1))])])])])):(0,o.Q3)("",!0)])])],64)}var ge={name:"Modal",props:{disabled:{type:Boolean,required:!1,default:!1},type:{type:String,required:!0}},mounted(){(0,G.Tp)()}};const fe=(0,d.A)(ge,[["render",pe]]);var ye=fe;const ke={key:0,class:"w-full max-h-full"},be={id:"toast-danger",class:"flex flex-col gap-2 w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},xe={class:"flex flex-row justify-between items-center gap-2"},ve={class:"flex justify-start text-sm font-normal px-2"};function we(e,t,a,r,l,n){return l.hide?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ke,[(0,o.Lk)("div",be,[(0,o.Lk)("header",xe,[t[2]||(t[2]=(0,o.Lk)("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-500 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-200"},[(0,o.Lk)("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"})]),(0,o.Lk)("span",{class:"sr-only"},"Error icon")],-1)),t[3]||(t[3]=(0,o.Lk)("p",null,"هشدار!",-1)),(0,o.Lk)("button",{type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700",onClick:t[0]||(t[0]=(...e)=>n.closeAlert&&n.closeAlert(...e)),"aria-label":"Close"},[...t[1]||(t[1]=[(0,o.Lk)("span",{class:"sr-only"},"Close",-1),(0,o.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)])])]),(0,o.Lk)("main",ve,[(0,o.Lk)("p",null,(0,s.v_)(a.msg),1)])])]))}var _e={name:"Alert",props:["msg"],mounted(){(0,G.Tp)()},data(){return{hide:!1}},methods:{closeAlert(){this.hide=!0}}};const Ce=(0,d.A)(_e,[["render",we]]);var Le=Ce;const Ee={class:"flex flex-row justify-center"},Xe={class:"rounded-lg bg-white shadow-lg max-w-44"},Se={class:"flex rounded-lg border-2 border-black shadow"},Ae={class:"flex flex-none flex-col items-center px-1 border-e-2 border-black font-bold text-sm"},Fe={class:"place-self-center text-sm"},Me={class:"flex-grow flex flex-row gap-1 justify-center items-center p-1 font-mono text-md font-bold"};function We(e,t,a,r,l,n){const i=(0,o.g2)("h");return(0,o.uX)(),(0,o.CE)("div",Ee,[(0,o.Lk)("div",Xe,[(0,o.Lk)("div",Se,[(0,o.Lk)("label",Ae,[t[0]||(t[0]=(0,o.eW)(" ایران ",-1)),(0,o.Lk)("p",Fe,(0,s.v_)(a.lic.year),1)]),(0,o.Lk)("label",Me,[(0,o.bF)(i,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(a.lic.second),1)]),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(a.lic.letter),1)]),_:1}),(0,o.bF)(i,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(a.lic.first),1)]),_:1})]),t[1]||(t[1]=(0,o.Lk)("label",{class:"flex flex-none flex-col items-end justify-between p-1 bg-blue-700 border-s-2 border-black text-white text-sm text-bold"},[(0,o.Lk)("img",{src:b,class:"h-3"}),(0,o.eW)(" IR ")],-1))])])])}var Ie={name:"lic_numer",props:["lic"]};const Ke=(0,d.A)(Ie,[["render",We]]);var Pe=Ke;const Te=["id","disabled"],De=["for"],Ne={key:0,class:"mt-2 text-xs text-red-600 dark:text-red-400"};function Qe(e,t,a,l,n,i){return(0,o.uX)(),(0,o.CE)("div",{class:(0,s.C4)(["relative",[a.hidden?"hidden":""]])},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.inputValue=e),onInput:t[1]||(t[1]=e=>i.updateValue(e.target.value)),type:"text",id:a.formName,disabled:a.disabled,class:(0,s.C4)([[n.error?"text-red-900 border-red-500 focus:border-red-500":"text-gray-900 focus:border-green-500 border-gray-300"],"block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 appearance-none focus:outline-none focus:ring-0 peer"]),placeholder:""},null,42,Te),[[r.Jo,n.inputValue]]),(0,o.Lk)("label",{for:a.formName,class:(0,s.C4)([[n.error?"peer-focus:text-red-500 text-red-500":"peer-focus:text-green-500 text-gray-500"],"absolute text-sm dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1"])},(0,s.v_)(a.label),11,De),n.error?((0,o.uX)(),(0,o.CE)("p",Ne,(0,s.v_)(n.message),1)):(0,o.Q3)("",!0)],2)}var $e={name:"Input",props:{formName:{type:String,required:!0},label:{type:String,required:!0},value:{type:String,default:""},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1}},data(){return{error:!1,message:"",inputValue:this.value}},methods:{formatNumber(e){return e.replace(/\D/g,"")},updateValue(e){"number"==this.type&&(Number.isInteger(parseInt(e))?(this.error=!1,this.message=""):(this.error=!0,this.message="لطفا فقط از اعداد استفاده کنید."),e=this.formatNumber(e),this.inputValue=e),this.$emit("update",e),this.$emit("InputError",this.error)}},watch:{value(e){this.inputValue=e}}};const Re=(0,d.A)($e,[["render",Qe]]);var Be=Re;const Oe=["id","data-dropdown-toggle"],Ue=["id"],ze=["aria-labelledby"];function Ze(e,t,a,r,l,n){return(0,o.uX)(),(0,o.CE)("div",{class:(0,s.C4)([a.hidden?"hidden":""])},[(0,o.Lk)("button",{id:a.formName+"Button1","data-dropdown-toggle":a.formName+"dropdown1",class:(0,s.C4)([a.btnclass,"justify-between w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"]),type:"button"},[(0,o.RG)(e.$slots,"btnName"),t[1]||(t[1]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],10,Oe),(0,o.Lk)("div",{id:a.formName+"dropdown1",class:"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700","data-dropdown-toggle":"false"},[(0,o.Lk)("ul",{onClick:t[0]||(t[0]=(...e)=>n.handleSelect&&n.handleSelect(...e)),class:"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a.formName+"Button1"},[(0,o.RG)(e.$slots,"list")],8,ze)],8,Ue)],2)}var je={name:"Dropdown",props:{formName:{type:String,required:!0},btnclass:{type:String,required:!1},hidden:{type:Boolean,default:!1}},methods:{handleSelect(){const e=document.getElementById(this.formName+"dropdown1");e&&e.classList.add("hidden")}}};const He=(0,d.A)(je,[["render",Ze]]);var Ge=He;function Ve(e,t,a,r,s,l){return(0,o.uX)(),(0,o.CE)("button",{"data-modal-hide":"popup-modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 rounded-lg dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"}," درسته ")}var qe={name:"ModalButton",methods:{closeModal(){this.$emit("close")}}};const Je=(0,d.A)(qe,[["render",Ve]]);var Ye=Je,et={name:"addTruck",components:{ModalButton:Ye,Dropdown:Ge,Input:Be,Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},mounted(){(0,G.Tp)()},data(){return{first:{val:12,error:!1},letter:{val:"ب",error:!1,alphabets:["الف","ب","پ","ت","ث","ج","چ","ح","خ","د","ذ","ر","ز","ژ","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ک","گ","ل","م","ن","و","ه","ی"]},second:{val:365,error:!1},year:{val:11,error:!1},isExists:!1,form:!0,driver_name:"",driver_doc:"",phone:0,username:"",forms:{driver_name:{type:"input",name:"اسم راننده",title:"راننده",data:"",value:""},driver_doc:{type:"input",name:"شماره ملی",title:"شماره ملی",data:"",value:"",lable:"number"},phone:{type:"input",name:"شماره همراه",title:"شماره همراه",data:"",value:"",lable:"phone"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",data:"",value:""}},statusOfTruck:"",success:!1,error:!1,errors:[]}},methods:{clicked(e,t){console.log(e,t),"letter"==e&&(this.letter.val=t)},async check_license_number(){if(0==this.error){const e={license_number:this.first.val+this.letter.val+this.second.val+"ایران"+this.year.val},t=await this.axios.post("/myapp/api/checkLicenseNumber",{},{params:e});console.log(t.data),console.log(JSON.parse(t.data["isExists"])),this.form=JSON.parse(t.data["isExists"]),JSON.parse(t.data["isExists"])&&(this.isExists=!0,this.statusOfTruck=t.data["status"])}},goToAddShipmentPage(){if("Free"==this.statusOfTruck){const e=this.first.val+this.letter.val+this.second.val+"ایران"+this.year.val;this.$router.push({name:"addShipment",query:{license_number:e}})}},async addTruck(){const e={license_number:this.first.val+this.letter.val+this.second.val+"ایران"+this.year.val,driver_name:this.forms.driver_name.value,driver_doc:this.forms.driver_doc.value,phone:this.forms.phone.value,username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addTruck/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)},"first.val"(e,t,a){Number.isInteger(parseInt(e))?(this.first.val=parseInt(e),console.log("adad",e,t,a),this.first.error&&(this.first.error=!1,console.log("letter",e,t,a),console.log(this.first))):(this.first.val=parseInt(t),this.first.error=!0);let r=this.first.val.toString();console.log(r,typeof r,2===r.length,"0"==r[1],2===r.length&&"0"==r[1]),2===r.length&&"0"==r[1]&&(this.first.error=!0,this.error=!0)},"second.val"(e,t){Number.isInteger(parseInt(e))?(this.second.val=parseInt(e),this.second.error&&(this.second.error=!1)):(this.second.val=parseInt(t),this.second.error=!0);let a=this.second.val.toString();console.log(a,typeof a,2===a.length,"0"==a[1],2===a.length&&"0"==a[1]),(2===a.length&&"0"==a[1]||"0"==a[2])&&(this.second.error=!0,this.error=!0)},"year.val"(e,t){Number.isInteger(parseInt(e))?(this.year.val=parseInt(e),this.year.error&&(this.year.error=!1)):(this.year.val=parseInt(t),this.year.error=!0);let a=this.year.val.toString();console.log(a,typeof a,2===a.length,"0"==a[1],2===a.length&&"0"==a[1]),2===a.length&&"0"==a[1]&&(this.year.error=!0,this.error=!0)}}};const tt=(0,d.A)(et,[["render",H]]);var at=tt;const rt={class:"flex flex-col items-center mt-5 gap-4"},ot={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},st={class:"mt-1.5 list-disc list-inside"},lt={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},nt={class:"font-medium"},it={key:0},dt={key:1},ut={key:2},ct={class:"flex flex-col gap-2 font-bold"};function mt(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("ModalButton"),u=(0,o.g2)("modal"),c=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(c,{title:"اضافه کردن فروشنده جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",rt,[l.error?((0,o.uX)(),(0,o.CE)("div",ot,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",st,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",lt,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",nt,[(0,o.eW)(" قروشنده جدید با نام "+(0,s.v_)(l.forms.supplier_name.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",it,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",dt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",ut,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(u,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",ct,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)("p",null,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(d,{onClose:n.addSupplier},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var ht={name:"addSupplier",components:{ModalButton:Ye,Input:Be,Alert:Le,modal:ye,Card:ae},mounted(){(0,G.Tp)()},data(){return{forms:{supplier_name:{type:"input",name:"نام و نام خانوادگی فروشنده/شرکت",title:"نام و نام خانوادگی فروشنده/شرکت",data:"",value:"",lable:"text"},address:{type:"input",name:"آدرس",title:"آدرس",data:"",value:"",lable:"text"},phone:{type:"input",name:"شماره همراه",title:"شماره همراه",data:"",value:"",lable:"phone"},comment:{type:"input",name:"توضیحات",title:"توضیحات",data:"",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",data:"",value:"",lable:"text"}},success:!1,error:!1,errors:[]}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{async addSupplier(){const e={supplier_name:this.forms.supplier_name.value,address:this.forms.address.value,phone:this.forms.phone.value,username:this.forms.username.value,comments:this.forms.comment.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addSupplier/",{},{params:e});if(console.log(t.data),"success"==t.data["status"])this.success=!0;else{this.error=!0,this.errors=t.data["errors"];for(const e of this.errors)console.log(e)}}else this.error=!0}}};const pt=(0,d.A)(ht,[["render",mt]]);var gt=pt;const ft={class:"flex flex-col items-center mt-5 gap-4"},yt={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},kt={class:"mt-1.5 list-disc list-inside"},bt={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},xt={class:"font-medium"},vt={key:0},wt={key:1},_t={key:2},Ct={class:"flex flex-col gap-2 font-bold"},Lt={key:0},Et={key:1},Xt={key:2};function St(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("ModalButton"),u=(0,o.g2)("modal"),c=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(c,{title:"اضافه کردن مشتری جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",ft,[l.error?((0,o.uX)(),(0,o.CE)("div",yt,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",kt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",bt,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",xt,[(0,o.eW)(" مشتری جدید با نام "+(0,s.v_)(l.forms.customer_name.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",vt,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",wt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",_t,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(u,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Ct,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Lt,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Et,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Xt,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(d,{onClose:n.addCustomer},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var At={name:"addCustomer",components:{ModalButton:Ye,Input:Be,modal:ye,Alert:Le,Card:ae},mounted(){(0,G.Tp)()},data(){return{forms:{customer_name:{type:"input",name:"اسم مشتری (مثال: مهدی حسینی  یا شرکت مشتری)",title:"اسم مشتری (مثال: مهدی حسینی  یا شرکت مشتری)",data:"",value:"",lable:"text"},address:{type:"input",name:"آدرس",title:"آدرس",data:"",value:"",lable:"text"},phone:{type:"input",name:"شماره همراه",title:"شماره همراه",data:"",value:"",lable:"phone"},comment:{type:"input",name:"توضیحات",title:"توضیحات",data:"",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",data:"",value:"",lable:"text"}},success:!1,error:!1,errors:[]}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{async addCustomer(){const e={customer_name:this.forms.customer_name.value,address:this.forms.address.value,phone:this.forms.phone.value,username:this.forms.username.value,comments:this.forms.comment.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addCustomer/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const Ft=(0,d.A)(At,[["render",St]]);var Mt=Ft;const Wt={class:"flex flex-col items-center mt-5 gap-4"},It={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Kt={class:"mt-1.5 list-disc list-inside"},Pt={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Tt={class:"font-medium"},Dt={key:0},Nt={key:1},Qt={key:2},$t=["onClick"],Rt={class:"flex flex-col gap-2 font-bold"},Bt={key:0},Ot={key:1},Ut={key:2};function zt(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal"),m=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(m,{title:"اضافه کردن جنس خام جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",Wt,[l.error?((0,o.uX)(),(0,o.CE)("div",It,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Kt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Pt,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Tt,[(0,o.eW)(" جنس جدید با نام "+(0,s.v_)(l.forms.material_name.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Dt,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Nt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Qt,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,$t)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Rt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Bt,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Ot,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Ut,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.addRawMaterial},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var Zt={name:"addRawMaterial",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{supplier_name:{type:"dropdown",name:"قروشنده",title:"اسم تامین کننده",data:"",value:""},material_type:{type:"dropdown",name:"جنس ماده جدید",title:"جنس ماده جدید",data:"",value:""},material_name:{type:"input",name:"اسم ماده",title:"اسم ماده",value:""},comment:{type:"input",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[]}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},mounted(){(0,G.Tp)(),this.axios.get("/myapp/api/getSupplierNames").then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]})},methods:{clicked(e,t){if(console.log(e,t),"supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;const e={supplier_name:this.forms.supplier_name.value};this.axios.get("/myapp/api/getMaterialTypes",{params:e}).then(e=>{console.log(e.data),this.forms.material_type.data=e.data["material_types"]})}"material_type"==e&&(this.forms.material_type.name=t,this.forms.material_type.value=t)},async addRawMaterial(){const e={supplier_name:this.forms.supplier_name.value,material_name:this.forms.material_name.value,material_type:this.forms.material_type.value,comments:this.forms.comment.value,username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addRawMaterial/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const jt=(0,d.A)(Zt,[["render",zt]]);var Ht=jt;const Gt={class:"flex flex-col items-center mt-5 gap-4"},Vt={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},qt={class:"mt-1.5 list-disc list-inside"},Jt={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Yt={class:"font-medium"},ea={key:0},ta={key:1},aa={key:2},ra={key:0,class:"w-full max-w-md"},oa={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},sa={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},la=["id","value","onChange"],na=["for"],ia={class:"flex flex-col gap-2"},da={class:"flex items-center"},ua={key:0,class:"mr-6"},ca={key:1,class:"w-full max-w-md"},ma={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ha={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},pa=["id","value","onChange"],ga=["for"],fa={class:"flex flex-col gap-2"},ya={class:"flex items-center"},ka={key:0,class:"mr-6"},ba=["onClick"],xa={class:"flex flex-col gap-2 font-bold"},va={key:0},wa={key:1},_a={key:2},Ca={class:"relative p-4 w-full max-w-md max-h-full"},La={id:"alert-3",class:"flex flex-col gap-4 p-4 mb-4 text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Ea={class:"flex felx-row justify-between items-center"},Xa={class:"flex flex-col justify-center items-center gap-2"},Sa={key:0,class:"flex flex-col p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert"},Aa={class:"mt-1.5 list-disc list-inside"},Fa=["src"];function Ma(e,t,a,l,n,i){const d=(0,o.g2)("Input"),u=(0,o.g2)("Dropdown"),c=(0,o.g2)("ModalButton"),m=(0,o.g2)("modal"),h=(0,o.g2)("h"),p=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(p,{title:"PM1 - اضافه کردن رول جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",Gt,[n.error?((0,o.uX)(),(0,o.CE)("div",Vt,[t[13]||(t[13]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[14]||(t[14]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",qt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",Jt,[t[16]||(t[16]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Yt,[t[15]||(t[15]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ea,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",ta,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",aa,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["radio"==e.type&&"grade"==a?((0,o.uX)(),(0,o.CE)("div",ra,[(0,o.Lk)("label",oa,(0,s.v_)(e.name),1),(0,o.Lk)("div",sa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.gradeOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`grade-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedGradeOption=e),onChange:t=>i.handleGradeSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,la),[[r.XL,n.selectedGradeOption]]),(0,o.Lk)("label",{for:`grade-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,na)]))),128)),(0,o.Lk)("div",ia,[(0,o.Lk)("div",da,[(0,o.bo)((0,o.Lk)("input",{id:"grade-else",type:"radio",value:"else","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedGradeOption=e),onChange:t[2]||(t[2]=e=>i.handleGradeSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedGradeOption]]),t[17]||(t[17]=(0,o.Lk)("label",{for:"grade-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," غیره (دیگر) ",-1))]),"else"===n.selectedGradeOption?((0,o.uX)(),(0,o.CE)("div",ua,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.customGradeValue=e),onInput:t[4]||(t[4]=(...e)=>i.handleCustomGradeInput&&i.handleCustomGradeInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"نوع دلخواه را وارد کنید"},null,544),[[r.Jo,n.customGradeValue]])])):(0,o.Q3)("",!0)])])])):"radio"==e.type&&"commnet"==a?((0,o.uX)(),(0,o.CE)("div",ca,[(0,o.Lk)("label",ma,(0,s.v_)(e.name),1),(0,o.Lk)("div",ha,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.commentOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`comment-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCommentOption=e),onChange:t=>i.handleCommentSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,pa),[[r.XL,n.selectedCommentOption]]),(0,o.Lk)("label",{for:`comment-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,ga)]))),128)),(0,o.Lk)("div",fa,[(0,o.Lk)("div",ya,[(0,o.bo)((0,o.Lk)("input",{id:"comment-else",type:"radio",value:"else","onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedCommentOption=e),onChange:t[7]||(t[7]=e=>i.handleCommentSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedCommentOption]]),t[18]||(t[18]=(0,o.Lk)("label",{for:"comment-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," سایر ",-1))]),"else"===n.selectedCommentOption?((0,o.uX)(),(0,o.CE)("div",ka,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.customCommentValue=e),onInput:t[9]||(t[9]=(...e)=>i.handleCustomCommentInput&&i.handleCustomCommentInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"توضیحات دلخواه را وارد کنید"},null,544),[[r.Jo,n.customCommentValue]])])):(0,o.Q3)("",!0)])])])):"input"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:2,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(u,{key:3,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,ba)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(m,{type:"confirm",disabled:n.loading},{button:(0,o.k6)(()=>[n.loading?((0,o.uX)(),(0,o.CE)("button",{key:0,disabled:"",type:"button",class:(0,s.C4)([[n.loading?"":"hidden"],"inline-flex justify-center items-center"])},[...t[19]||(t[19]=[(0,o.Lk)("svg",{"aria-hidden":"true",role:"status",class:"inline w-4 h-4 me-3 text-white animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,o.Lk)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),(0,o.eW)(" لطفا صبر کنید ... ",-1)])],2)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("اضافه کردن")],64))]),text:(0,o.k6)(()=>[(0,o.Lk)("div",xa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",va,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",wa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",_a,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(c,{onClose:i.addNewReel},null,8,["onClose"])])]),_:1},8,["disabled"]),n.success?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,s.C4)([{hidden:n.hide},"backdrop-blur-sm bg-white/30 flex fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"])},[(0,o.Lk)("div",Ca,[(0,o.Lk)("div",La,[(0,o.Lk)("header",Ea,[t[21]||(t[21]=(0,o.Lk)("svg",{class:"flex-shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.bF)(h,{class:"ms-3 text-sm font-medium"},{default:(0,o.k6)(()=>[(0,o.eW)("رول "+(0,s.v_)(n.forms.reel_number.value)+" با موفقیت به سیستم اضافه شد.",1)]),_:1}),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>n.hide=!n.hide),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-green-400 dark:hover:bg-gray-700"},[...t[20]||(t[20]=[(0,o.Lk)("span",{class:"sr-only"},"Close",-1),(0,o.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)])])]),(0,o.Lk)("main",Xa,[1==n.warinig.status?((0,o.uX)(),(0,o.CE)("div",Sa,[t[22]||(t[22]=(0,o.Lk)("header",{class:"flex flex-row"},[(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})]),(0,o.Lk)("span",{class:"sr-only"},"Info"),(0,o.Lk)("span",{class:"font-bold"},"هشدار!")],-1)),(0,o.Lk)("main",null,[(0,o.Lk)("ul",Aa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.warinig.data,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e["message"]),1))),256))])])])):(0,o.Q3)("",!0),(0,o.Lk)("img",{src:n.qrcode,class:"w-[256px] h-[256px]"},null,8,Fa),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.printQRCode&&i.printQRCode(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"},"چاپ QR Code")])])])],2)):(0,o.Q3)("",!0)])]),_:1})}a(3110);var Wa={name:"addNewReel",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,modal:ye,Alert:Le,Card:ae},data(){return{forms:{reel_number:{type:"input",name:"شماره رول",title:"شماره رول",data:"",value:"",lable:"number"},width:{type:"input",name:"عرض",title:"عرض",data:"",value:"",lable:"number"},GSM:{type:"input",name:"گرماژ",title:"گرماژ",data:"",value:"",lable:"number"},length:{type:"input",name:"طول",title:"طول",data:"",value:"",lable:"number"},breaks:{type:"input",name:"پارگی",title:"پارگی",data:"",value:"",lable:"number"},grade:{type:"radio",name:"نوع",title:"نوع",data:"",value:"",lable:"text"},consumption_profile_name:{type:"dropdown",name:"پروفایل مصرف",title:"پروفایل مصرف",data:"",value:""},commnet:{type:"radio",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:"",lable:"text"}},gradeOptions:["Test Linear Homayoun","Kraft Linear Homayoun","Whitetop Linear Homayoun","Flutting Homayoun"],selectedGradeOption:"",customGradeValue:"",commentOptions:["عالی","اختلاف ۲ گرم بالا/پایین تر","اختلاف رطوبت بالا/پایین تر","پارگی ۱","پارگی ۲ یا بیشتر"],selectedCommentOption:"",customCommentValue:"",success:!1,error:!1,warinig:{status:!1,data:[]},errors:[],qrcode:"",labelFilename:"",hide:!1,loading:!1}},mounted(){(0,G.Tp)(),this.gradeOptions.length>0&&(this.selectedGradeOption=this.gradeOptions[0],this.forms.grade.value=this.gradeOptions[0]),this.commentOptions.length>0&&(this.selectedCommentOption=this.commentOptions[0],this.forms.commnet.value=this.commentOptions[0]),this.axios.get("/myapp/api/getReelNumber").then(e=>{console.log("Reel data: ",e.data),this.forms.reel_number.value=e.data["next_reel_number"],this.forms.width.value=e.data["width"],this.forms.GSM.value=e.data["GSM"],this.forms.length.value=e.data["length"],this.forms.breaks.value=0,this.forms.consumption_profile_name.value=e.data["profile_name"],this.forms.consumption_profile_name.name=this.forms.consumption_profile_name.name+": "+e.data["profile_name"]}),this.axios.get("/myapp/api/getConsumptionProfileNames").then(e=>{this.forms.consumption_profile_name.data=e.data["profile_names"]})},watch:{hide(e,t){1==e&&location.reload()}},methods:{handleGradeSelection(e){"else"===e?(this.selectedGradeOption="else",this.forms.grade.value=this.customGradeValue):(this.selectedGradeOption=e,this.forms.grade.value=e,this.customGradeValue="")},handleCustomGradeInput(){this.forms.grade.value=this.customGradeValue},handleCommentSelection(e){"else"===e?(this.selectedCommentOption="else",this.forms.commnet.value=this.customCommentValue):(this.selectedCommentOption=e,this.forms.commnet.value=e,this.customCommentValue="")},handleCustomCommentInput(){this.forms.commnet.value=this.customCommentValue},clicked(e,t){"consumption_profile_name"==e&&(this.forms.consumption_profile_name.value=t,this.forms.consumption_profile_name.name=t)},formatNumber(e){return e.replace(/\D/g,"")},async addNewReel(){this.loading=!0;let e={reel_number:this.forms.reel_number.value,width:this.forms.width.value,gsm:this.forms.GSM.value,length:this.forms.length.value,breaks:this.forms.breaks.value,grade:this.forms.grade.value,commnet:this.forms.commnet.value,consumption_profile_name:this.forms.consumption_profile_name.value,username:this.forms.username.value},t=`Reel Number: ${e["reel_number"]},\nWidth: ${e["width"]},\nGSM: ${e["gsm"]},\nLength:~ ${e["length"]},\nBreaks: ${e["breaks"]},\nGrade: ${e["grade"]}`;const a=await this.axios.post("/myapp/api/generateQrCode",{},{params:{data:JSON.stringify(e),d:t}});let r=a.data.filename,o=a.data.file;this.qrcode=`data:image/png;base64,${o}`,this.labelFilename=a.data.label_filename||"",e["qr_code"]=r,this.errors=[];for(const l in this.forms)if(""==this.forms[l].value)"commnet"!=l&&0!==this.forms[l].value&&(this.forms[l].error=!0,this.loading=!1,this.errors.push({message:`${this.forms[l].name} مورد نیاز است`}));else if(this.forms[l].error=!1,"breaks"==l){let e=parseInt(this.forms.breaks.value.toString().replace(/,/g,""));(e<=-1||e>=21)&&(this.error=!0,this.errors.push({message:"مقدار پارگی باید بین 0 تا 20 باشد"}),this.loading=!1)}if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addNewReel/",{},{params:e});if("success"==t.data["status"])this.success=!0,this.loading=!1,0!=t.data["warning"].length&&(this.warinig.status=!0,this.warinig.data=t.data["warning"]);else if(this.loading=!1,this.error=!0,this.errors=t.data["errors"],this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}}else if(this.error=!0,this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}},async printQRCode(){const e=window.open("","_blank");e.document.write(`\n        <html>\n          <head>\n            <title>چاپ QR-code</title>\n            <style>\n              body { display: flex; flex-direction: column; align-items: center; font-family: Arial, sans-serif; }\n              .qr-container { text-align: center; }\n              .reel-number { font-size: 64px; font-weight: bold; margin: 10px 0; }\n              .label { font-size: 32px; font-weight: bold; margin: 10px 0; }\n              .details { font-size: 24px; margin: 5px 0; }\n            </style>\n          </head>\n          <body>\n            <div class="qr-container">\n              <img src="${this.qrcode}" style="max-width: 330px;" />\n              <div class="reel-number">${this.forms.reel_number.value}</div>\n              <div class="label">H O M A Y O U N</div>\n              <div class="details">${this.forms.grade.value}</div>\n              <div class="details">${this.forms.width.value} cm - ${this.forms.GSM.value} gr</div>\n              \x3c!-- <div class="details">${this.forms.GSM.value} gr</div> --\x3e\n            </div>\n          </body>\n        </html>\n      `),e.document.close(),e.print(),location.reload()}}};const Ia=(0,d.A)(Wa,[["render",Ma]]);var Ka=Ia;const Pa={class:"flex flex-col items-center mt-5 gap-4"},Ta={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Da={class:"mt-1.5 list-disc list-inside"},Na={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Qa={class:"font-medium"},$a={key:0},Ra={key:1},Ba={key:2},Oa={key:0,class:"w-full max-w-md"},Ua={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},za={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},Za=["id","value","onChange"],ja=["for"],Ha={class:"flex flex-col gap-2"},Ga={class:"flex items-center"},Va={key:0,class:"mr-6"},qa={key:1,class:"w-full max-w-md"},Ja={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ya={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},er=["id","value","onChange"],tr=["for"],ar={class:"flex flex-col gap-2"},rr={class:"flex items-center"},or={key:0,class:"mr-6"},sr=["onClick"],lr={class:"flex flex-col gap-2 font-bold"},nr={key:0},ir={key:1},dr={key:2},ur={class:"relative p-4 w-full max-w-md max-h-full"},cr={id:"alert-3",class:"flex flex-col gap-4 p-4 mb-4 text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},mr={class:"flex felx-row justify-between items-center"},hr={class:"flex flex-col justify-center items-center gap-2"},pr={key:0,class:"flex flex-col p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert"},gr={class:"mt-1.5 list-disc list-inside"},fr=["src"];function yr(e,t,a,l,n,i){const d=(0,o.g2)("Input"),u=(0,o.g2)("Dropdown"),c=(0,o.g2)("ModalButton"),m=(0,o.g2)("modal"),h=(0,o.g2)("h"),p=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(p,{title:"PM2 - اضافه کردن رول جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",Pa,[n.error?((0,o.uX)(),(0,o.CE)("div",Ta,[t[13]||(t[13]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[14]||(t[14]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Da,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",Na,[t[16]||(t[16]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Qa,[t[15]||(t[15]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",$a,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Ra,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Ba,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["radio"==e.type&&"grade"==a?((0,o.uX)(),(0,o.CE)("div",Oa,[(0,o.Lk)("label",Ua,(0,s.v_)(e.name),1),(0,o.Lk)("div",za,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.gradeOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`grade-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedGradeOption=e),onChange:t=>i.handleGradeSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,Za),[[r.XL,n.selectedGradeOption]]),(0,o.Lk)("label",{for:`grade-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,ja)]))),128)),(0,o.Lk)("div",Ha,[(0,o.Lk)("div",Ga,[(0,o.bo)((0,o.Lk)("input",{id:"grade-else",type:"radio",value:"else","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedGradeOption=e),onChange:t[2]||(t[2]=e=>i.handleGradeSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedGradeOption]]),t[17]||(t[17]=(0,o.Lk)("label",{for:"grade-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," غیره (دیگر) ",-1))]),"else"===n.selectedGradeOption?((0,o.uX)(),(0,o.CE)("div",Va,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.customGradeValue=e),onInput:t[4]||(t[4]=(...e)=>i.handleCustomGradeInput&&i.handleCustomGradeInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"نوع دلخواه را وارد کنید"},null,544),[[r.Jo,n.customGradeValue]])])):(0,o.Q3)("",!0)])])])):"radio"==e.type&&"commnet"==a?((0,o.uX)(),(0,o.CE)("div",qa,[(0,o.Lk)("label",Ja,(0,s.v_)(e.name),1),(0,o.Lk)("div",Ya,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.commentOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`comment-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCommentOption=e),onChange:t=>i.handleCommentSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,er),[[r.XL,n.selectedCommentOption]]),(0,o.Lk)("label",{for:`comment-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,tr)]))),128)),(0,o.Lk)("div",ar,[(0,o.Lk)("div",rr,[(0,o.bo)((0,o.Lk)("input",{id:"comment-else",type:"radio",value:"else","onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedCommentOption=e),onChange:t[7]||(t[7]=e=>i.handleCommentSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedCommentOption]]),t[18]||(t[18]=(0,o.Lk)("label",{for:"comment-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," سایر ",-1))]),"else"===n.selectedCommentOption?((0,o.uX)(),(0,o.CE)("div",or,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.customCommentValue=e),onInput:t[9]||(t[9]=(...e)=>i.handleCustomCommentInput&&i.handleCustomCommentInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"توضیحات دلخواه را وارد کنید"},null,544),[[r.Jo,n.customCommentValue]])])):(0,o.Q3)("",!0)])])])):"input"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:2,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(u,{key:3,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,sr)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(m,{type:"confirm",disabled:n.loading},{button:(0,o.k6)(()=>[n.loading?((0,o.uX)(),(0,o.CE)("button",{key:0,disabled:"",type:"button",class:(0,s.C4)([[n.loading?"":"hidden"],"inline-flex justify-center items-center"])},[...t[19]||(t[19]=[(0,o.Lk)("svg",{"aria-hidden":"true",role:"status",class:"inline w-4 h-4 me-3 text-white animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,o.Lk)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),(0,o.eW)(" لطفا صبر کنید ... ",-1)])],2)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("اضافه کردن")],64))]),text:(0,o.k6)(()=>[(0,o.Lk)("div",lr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",nr,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",ir,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",dr,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(c,{onClose:i.addNewReel},null,8,["onClose"])])]),_:1},8,["disabled"]),n.success?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,s.C4)([{hidden:n.hide},"backdrop-blur-sm bg-white/30 flex fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"])},[(0,o.Lk)("div",ur,[(0,o.Lk)("div",cr,[(0,o.Lk)("header",mr,[t[21]||(t[21]=(0,o.Lk)("svg",{class:"flex-shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.bF)(h,{class:"ms-3 text-sm font-medium"},{default:(0,o.k6)(()=>[(0,o.eW)("رول "+(0,s.v_)(n.forms.reel_number.value)+" با موفقیت به سیستم اضافه شد.",1)]),_:1}),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>n.hide=!n.hide),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-green-400 dark:hover:bg-gray-700"},[...t[20]||(t[20]=[(0,o.Lk)("span",{class:"sr-only"},"Close",-1),(0,o.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)])])]),(0,o.Lk)("main",hr,[1==n.warinig.status?((0,o.uX)(),(0,o.CE)("div",pr,[t[22]||(t[22]=(0,o.Lk)("header",{class:"flex flex-row"},[(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})]),(0,o.Lk)("span",{class:"sr-only"},"Info"),(0,o.Lk)("span",{class:"font-bold"},"هشدار!")],-1)),(0,o.Lk)("main",null,[(0,o.Lk)("ul",gr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.warinig.data,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e["message"]),1))),256))])])])):(0,o.Q3)("",!0),(0,o.Lk)("img",{src:n.qrcode,class:"w-[256px] h-[256px]"},null,8,fr),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.printQRCode&&i.printQRCode(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"},"چاپ QR Code")])])])],2)):(0,o.Q3)("",!0)])]),_:1})}var kr={name:"addNewPM2Reel",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,modal:ye,Alert:Le,Card:ae},data(){return{forms:{reel_number:{type:"input",name:"شماره رول",title:"شماره رول",data:"",value:"",lable:"number"},width:{type:"input",name:"عرض",title:"عرض",data:"",value:"",lable:"number"},GSM:{type:"input",name:"گرماژ",title:"گرماژ",data:"",value:"",lable:"number"},length:{type:"input",name:"طول",title:"طول",data:"",value:"",lable:"number"},breaks:{type:"input",name:"پارگی",title:"پارگی",data:"",value:"",lable:"number"},grade:{type:"radio",name:"نوع",title:"نوع",data:"",value:"",lable:"text"},consumption_profile_name:{type:"dropdown",name:"پروفایل مصرف",title:"پروفایل مصرف",data:"",value:""},commnet:{type:"radio",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:"",lable:"text"}},gradeOptions:["Test Linear Homayoun","Kraft Linear Homayoun","Whitetop Linear Homayoun","Flutting Homayoun"],selectedGradeOption:"",customGradeValue:"",commentOptions:["عالی","اختلاف ۲ گرم بالا/پایین تر","اختلاف رطوبت بالا/پایین تر","پارگی ۱","پارگی ۲ یا بیشتر"],selectedCommentOption:"",customCommentValue:"",success:!1,error:!1,warinig:{status:!1,data:[]},errors:[],qrcode:"",hide:!1,loading:!1}},mounted(){(0,G.Tp)(),this.gradeOptions.length>0&&(this.selectedGradeOption=this.gradeOptions[0],this.forms.grade.value=this.gradeOptions[0]),this.commentOptions.length>0&&(this.selectedCommentOption=this.commentOptions[0],this.forms.commnet.value=this.commentOptions[0]),this.axios.get("/myapp/api/getReelNumber").then(e=>{this.forms.reel_number.value=e.data["next_reel_number"],this.forms.width.value=e.data["width"],this.forms.GSM.value=e.data["GSM"],this.forms.length.value=e.data["length"],this.forms.breaks.value=0,this.forms.consumption_profile_name.value=e.data["profile_name"],this.forms.consumption_profile_name.name=this.forms.consumption_profile_name.name+": "+e.data["profile_name"]}),this.axios.get("/myapp/api/getConsumptionProfileNames").then(e=>{this.forms.consumption_profile_name.data=e.data["profile_names"]})},watch:{hide(e,t){1==e&&location.reload()}},methods:{handleGradeSelection(e){"else"===e?(this.selectedGradeOption="else",this.forms.grade.value=this.customGradeValue):(this.selectedGradeOption=e,this.forms.grade.value=e,this.customGradeValue="")},handleCustomGradeInput(){this.forms.grade.value=this.customGradeValue},handleCommentSelection(e){"else"===e?(this.selectedCommentOption="else",this.forms.commnet.value=this.customCommentValue):(this.selectedCommentOption=e,this.forms.commnet.value=e,this.customCommentValue="")},handleCustomCommentInput(){this.forms.commnet.value=this.customCommentValue},clicked(e,t){"consumption_profile_name"==e&&(this.forms.consumption_profile_name.value=t,this.forms.consumption_profile_name.name=t)},formatNumber(e){return e.replace(/\D/g,"")},async addNewReel(){this.loading=!0;let e={reel_number:"PM2_"+this.forms.reel_number.value,width:this.forms.width.value,gsm:this.forms.GSM.value,length:this.forms.length.value,breaks:this.forms.breaks.value,grade:this.forms.grade.value,commnet:this.forms.commnet.value,consumption_profile_name:this.forms.consumption_profile_name.value,username:this.forms.username.value},t=`Reel Number: ${e["reel_number"]},\nWidth: ${e["width"]},\nGSM: ${e["gsm"]},\nLength:~ ${e["length"]},\nBreaks: ${e["breaks"]},\nGrade: ${e["grade"]}`;const a=await this.axios.post("/myapp/api/generateQrCode",{},{params:{data:JSON.stringify(e),d:t}});let r=a.data.filename,o=a.data.file;this.qrcode=`data:image/png;base64,${o}`,e["qr_code"]=r,this.errors=[];for(const l in this.forms)if(""==this.forms[l].value)"commnet"!=l&&0!==this.forms[l].value&&(this.forms[l].error=!0,this.loading=!1,this.errors.push({message:`${this.forms[l].name} مورد نیاز است`}));else if(this.forms[l].error=!1,"breaks"==l){let e=parseInt(this.forms.breaks.value.toString().replace(/,/g,""));(e<=-1||e>=21)&&(this.error=!0,this.errors.push({message:"مقدار پارگی باید بین 0 تا 20 باشد"}),this.loading=!1)}if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addNewPM2Reel/",{},{params:e});if("success"==t.data["status"])this.success=!0,this.loading=!1,0!=t.data["warning"].length&&(this.warinig.status=!0,this.warinig.data=t.data["warning"]);else if(this.loading=!1,this.error=!0,this.errors=t.data["errors"],this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}}else if(this.error=!0,this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}},async printQRCode(){const e=window.open("","_blank");e.document.write(`\n        <html>\n          <head>\n            <title>چاپ QR-code</title>\n            <style>\n              body { display: flex; flex-direction: column; align-items: center; font-family: Arial, sans-serif; }\n              .qr-container { text-align: center; }\n              .reel-number { font-size: 64px; font-weight: bold; margin: 10px 0; }\n              .label { font-size: 32px; font-weight: bold; margin: 10px 0; }\n              .details { font-size: 24px; margin: 5px 0; }\n            </style>\n          </head>\n          <body>\n            <div class="qr-container">\n              <img src="${this.qrcode}" style="max-width: 330px;" />\n              <div class="reel-number">${"PM2_"+this.forms.reel_number.value}</div>\n              <div class="label">H O M A Y O U N</div>\n              <div class="details">${this.forms.grade.value}</div>\n              <div class="details">${this.forms.width.value} cm - ${this.forms.GSM.value} gr</div>\n              \x3c!-- <div class="details">${this.forms.GSM.value} gr</div> --\x3e\n            </div>\n          </body>\n        </html>\n      `),e.document.close(),e.print(),location.reload()}}};const br=(0,d.A)(kr,[["render",yr]]);var xr=br;const vr={class:"flex flex-col items-center mt-5 gap-4"},wr={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},_r={class:"mt-1.5 list-disc list-inside"},Cr={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Lr={class:"font-medium"},Er={key:0},Xr={key:1},Sr={key:2},Ar={key:0,class:"w-full max-w-md"},Fr={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Mr={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},Wr=["id","value","onChange"],Ir=["for"],Kr={class:"flex flex-col gap-2"},Pr={class:"flex items-center"},Tr={key:0,class:"mr-6"},Dr={key:1,class:"w-full max-w-md"},Nr={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Qr={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},$r=["id","value","onChange"],Rr=["for"],Br={class:"flex flex-col gap-2"},Or={class:"flex items-center"},Ur={key:0,class:"mr-6"},zr=["onClick"],Zr={class:"flex flex-col gap-2 font-bold"},jr={key:0},Hr={key:1},Gr={key:2},Vr={class:"relative p-4 w-full max-w-md max-h-full"},qr={id:"alert-3",class:"flex flex-col gap-4 p-4 mb-4 text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Jr={class:"flex felx-row justify-between items-center"},Yr={class:"flex flex-col justify-center items-center gap-2"},eo={key:0,class:"flex flex-col p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert"},to={class:"mt-1.5 list-disc list-inside"},ao=["src"];function ro(e,t,a,l,n,i){const d=(0,o.g2)("Input"),u=(0,o.g2)("Dropdown"),c=(0,o.g2)("ModalButton"),m=(0,o.g2)("modal"),h=(0,o.g2)("h"),p=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(p,{title:"PM3 - اضافه کردن رول جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",vr,[n.error?((0,o.uX)(),(0,o.CE)("div",wr,[t[13]||(t[13]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[14]||(t[14]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",_r,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",Cr,[t[16]||(t[16]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Lr,[t[15]||(t[15]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Er,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Xr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Sr,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["radio"==e.type&&"grade"==a?((0,o.uX)(),(0,o.CE)("div",Ar,[(0,o.Lk)("label",Fr,(0,s.v_)(e.name),1),(0,o.Lk)("div",Mr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.gradeOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`grade-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedGradeOption=e),onChange:t=>i.handleGradeSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,Wr),[[r.XL,n.selectedGradeOption]]),(0,o.Lk)("label",{for:`grade-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,Ir)]))),128)),(0,o.Lk)("div",Kr,[(0,o.Lk)("div",Pr,[(0,o.bo)((0,o.Lk)("input",{id:"grade-else",type:"radio",value:"else","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedGradeOption=e),onChange:t[2]||(t[2]=e=>i.handleGradeSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedGradeOption]]),t[17]||(t[17]=(0,o.Lk)("label",{for:"grade-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," غیره (دیگر) ",-1))]),"else"===n.selectedGradeOption?((0,o.uX)(),(0,o.CE)("div",Tr,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.customGradeValue=e),onInput:t[4]||(t[4]=(...e)=>i.handleCustomGradeInput&&i.handleCustomGradeInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"نوع دلخواه را وارد کنید"},null,544),[[r.Jo,n.customGradeValue]])])):(0,o.Q3)("",!0)])])])):"radio"==e.type&&"commnet"==a?((0,o.uX)(),(0,o.CE)("div",Dr,[(0,o.Lk)("label",Nr,(0,s.v_)(e.name),1),(0,o.Lk)("div",Qr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.commentOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`comment-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCommentOption=e),onChange:t=>i.handleCommentSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,$r),[[r.XL,n.selectedCommentOption]]),(0,o.Lk)("label",{for:`comment-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,Rr)]))),128)),(0,o.Lk)("div",Br,[(0,o.Lk)("div",Or,[(0,o.bo)((0,o.Lk)("input",{id:"comment-else",type:"radio",value:"else","onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedCommentOption=e),onChange:t[7]||(t[7]=e=>i.handleCommentSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedCommentOption]]),t[18]||(t[18]=(0,o.Lk)("label",{for:"comment-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," سایر ",-1))]),"else"===n.selectedCommentOption?((0,o.uX)(),(0,o.CE)("div",Ur,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.customCommentValue=e),onInput:t[9]||(t[9]=(...e)=>i.handleCustomCommentInput&&i.handleCustomCommentInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"توضیحات دلخواه را وارد کنید"},null,544),[[r.Jo,n.customCommentValue]])])):(0,o.Q3)("",!0)])])])):"input"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:2,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(u,{key:3,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,zr)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(m,{type:"confirm",disabled:n.loading},{button:(0,o.k6)(()=>[n.loading?((0,o.uX)(),(0,o.CE)("button",{key:0,disabled:"",type:"button",class:(0,s.C4)([[n.loading?"":"hidden"],"inline-flex justify-center items-center"])},[...t[19]||(t[19]=[(0,o.Lk)("svg",{"aria-hidden":"true",role:"status",class:"inline w-4 h-4 me-3 text-white animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,o.Lk)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),(0,o.eW)(" لطفا صبر کنید ... ",-1)])],2)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("اضافه کردن")],64))]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Zr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",jr,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Hr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Gr,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(c,{onClose:i.addNewReel},null,8,["onClose"])])]),_:1},8,["disabled"]),n.success?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,s.C4)([{hidden:n.hide},"backdrop-blur-sm bg-white/30 flex fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"])},[(0,o.Lk)("div",Vr,[(0,o.Lk)("div",qr,[(0,o.Lk)("header",Jr,[t[21]||(t[21]=(0,o.Lk)("svg",{class:"flex-shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.bF)(h,{class:"ms-3 text-sm font-medium"},{default:(0,o.k6)(()=>[(0,o.eW)("رول "+(0,s.v_)(n.forms.reel_number.value)+" با موفقیت به سیستم اضافه شد.",1)]),_:1}),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>n.hide=!n.hide),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-green-400 dark:hover:bg-gray-700"},[...t[20]||(t[20]=[(0,o.Lk)("span",{class:"sr-only"},"Close",-1),(0,o.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)])])]),(0,o.Lk)("main",Yr,[1==n.warinig.status?((0,o.uX)(),(0,o.CE)("div",eo,[t[22]||(t[22]=(0,o.Lk)("header",{class:"flex flex-row"},[(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})]),(0,o.Lk)("span",{class:"sr-only"},"Info"),(0,o.Lk)("span",{class:"font-bold"},"هشدار!")],-1)),(0,o.Lk)("main",null,[(0,o.Lk)("ul",to,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.warinig.data,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e["message"]),1))),256))])])])):(0,o.Q3)("",!0),(0,o.Lk)("img",{src:n.qrcode,class:"w-[256px] h-[256px]"},null,8,ao),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.printQRCode&&i.printQRCode(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"},"چاپ QR Code")])])])],2)):(0,o.Q3)("",!0)])]),_:1})}var oo={name:"addNewReel",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,modal:ye,Alert:Le,Card:ae},data(){return{forms:{reel_number:{type:"input",name:"شماره رول",title:"شماره رول",data:"",value:"",lable:"number"},width:{type:"input",name:"عرض",title:"عرض",data:"",value:"",lable:"number"},GSM:{type:"input",name:"گرماژ",title:"گرماژ",data:"",value:"",lable:"number"},length:{type:"input",name:"طول",title:"طول",data:"",value:"",lable:"number"},breaks:{type:"input",name:"پارگی",title:"پارگی",data:"",value:"",lable:"number"},grade:{type:"radio",name:"نوع",title:"نوع",data:"",value:"",lable:"text"},consumption_profile_name:{type:"dropdown",name:"پروفایل مصرف",title:"پروفایل مصرف",data:"",value:""},commnet:{type:"radio",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:"",lable:"text"}},gradeOptions:["Test Linear Homayoun","Kraft Linear Homayoun","Whitetop Linear Homayoun","Flutting Homayoun"],selectedGradeOption:"",customGradeValue:"",commentOptions:["عالی","اختلاف ۲ گرم بالا/پایین تر","اختلاف رطوبت بالا/پایین تر","پارگی ۱","پارگی ۲ یا بیشتر"],selectedCommentOption:"",customCommentValue:"",success:!1,error:!1,warinig:{status:!1,data:[]},errors:[],qrcode:"",hide:!1,loading:!1}},mounted(){(0,G.Tp)(),this.gradeOptions.length>0&&(this.selectedGradeOption=this.gradeOptions[0],this.forms.grade.value=this.gradeOptions[0]),this.commentOptions.length>0&&(this.selectedCommentOption=this.commentOptions[0],this.forms.commnet.value=this.commentOptions[0]),this.axios.get("/myapp/api/getReelNumber").then(e=>{this.forms.reel_number.value=e.data["next_reel_number"],this.forms.width.value=e.data["width"],this.forms.GSM.value=e.data["GSM"],this.forms.length.value=e.data["length"],this.forms.breaks.value=0,this.forms.consumption_profile_name.value=e.data["profile_name"],this.forms.consumption_profile_name.name=this.forms.consumption_profile_name.name+": "+e.data["profile_name"]}),this.axios.get("/myapp/api/getConsumptionProfileNames").then(e=>{this.forms.consumption_profile_name.data=e.data["profile_names"]})},watch:{hide(e,t){1==e&&location.reload()}},methods:{handleGradeSelection(e){"else"===e?(this.selectedGradeOption="else",this.forms.grade.value=this.customGradeValue):(this.selectedGradeOption=e,this.forms.grade.value=e,this.customGradeValue="")},handleCustomGradeInput(){this.forms.grade.value=this.customGradeValue},handleCommentSelection(e){"else"===e?(this.selectedCommentOption="else",this.forms.commnet.value=this.customCommentValue):(this.selectedCommentOption=e,this.forms.commnet.value=e,this.customCommentValue="")},handleCustomCommentInput(){this.forms.commnet.value=this.customCommentValue},clicked(e,t){"consumption_profile_name"==e&&(this.forms.consumption_profile_name.value=t,this.forms.consumption_profile_name.name=t)},formatNumber(e){return e.replace(/\D/g,"")},async addNewReel(){this.loading=!0;let e={reel_number:"PM3_"+this.forms.reel_number.value,width:this.forms.width.value,gsm:this.forms.GSM.value,length:this.forms.length.value,breaks:this.forms.breaks.value,grade:this.forms.grade.value,commnet:this.forms.commnet.value,consumption_profile_name:this.forms.consumption_profile_name.value,username:this.forms.username.value},t=`Reel Number: ${e["reel_number"]},\nWidth: ${e["width"]},\nGSM: ${e["gsm"]},\nLength:~ ${e["length"]},\nBreaks: ${e["breaks"]},\nGrade: ${e["grade"]}`;const a=await this.axios.post("/myapp/api/generateQrCode",{},{params:{data:JSON.stringify(e),d:t}});let r=a.data.filename,o=a.data.file;this.qrcode=`data:image/png;base64,${o}`,e["qr_code"]=r,this.errors=[];for(const l in this.forms)if(""==this.forms[l].value)"commnet"!=l&&0!==this.forms[l].value&&(this.forms[l].error=!0,this.loading=!1,this.errors.push({message:`${this.forms[l].name} مورد نیاز است`}));else if(this.forms[l].error=!1,"breaks"==l){let e=parseInt(this.forms.breaks.value.toString().replace(/,/g,""));(e<=-1||e>=21)&&(this.error=!0,this.errors.push({message:"مقدار پارگی باید بین 0 تا 20 باشد"}),this.loading=!1)}if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addNewPM3Reel/",{},{params:e});if("success"==t.data["status"])this.success=!0,this.loading=!1,0!=t.data["warning"].length&&(this.warinig.status=!0,this.warinig.data=t.data["warning"]);else if(this.loading=!1,this.error=!0,this.errors=t.data["errors"],this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}}else if(this.error=!0,this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}},async printQRCode(){const e=window.open("","_blank");e.document.write(`\n        <html>\n          <head>\n            <title>چاپ QR-code</title>\n            <style>\n              body { display: flex; flex-direction: column; align-items: center; font-family: Arial, sans-serif; }\n              .qr-container { text-align: center; }\n              .reel-number { font-size: 64px; font-weight: bold; margin: 10px 0; }\n              .label { font-size: 32px; font-weight: bold; margin: 10px 0; }\n              .details { font-size: 24px; margin: 5px 0; }\n            </style>\n          </head>\n          <body>\n            <div class="qr-container">\n              <img src="${this.qrcode}" style="max-width: 330px;" />\n              <div class="reel-number">${"PM3_"+this.forms.reel_number.value}</div>\n              <div class="label">H O M A Y O U N</div>\n              <div class="details">${this.forms.grade.value}</div>\n              <div class="details">${this.forms.width.value} cm - ${this.forms.GSM.value} gr</div>\n              \x3c!-- <div class="details">${this.forms.GSM.value} gr</div> --\x3e\n            </div>\n          </body>\n        </html>\n      `),e.document.close(),e.print(),location.reload()}}};const so=(0,d.A)(oo,[["render",ro]]);var lo=so;const no={class:"flex flex-col items-center mt-5 gap-4"},io={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},uo={class:"mt-1.5 list-disc list-inside"},co={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},mo={class:"font-medium"},ho={key:0},po={key:1},go={key:2},fo={key:0,class:"w-full max-w-md"},yo={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ko={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},bo=["id","value","onChange"],xo=["for"],vo={class:"flex flex-col gap-2"},wo={class:"flex items-center"},_o={key:0,class:"mr-6"},Co={key:1,class:"w-full max-w-md"},Lo={class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Eo={class:"flex flex-col gap-3 p-4 bg-gray-50 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600"},Xo=["id","value","onChange"],So=["for"],Ao={class:"flex flex-col gap-2"},Fo={class:"flex items-center"},Mo={key:0,class:"mr-6"},Wo=["onClick"],Io={class:"flex flex-col gap-2 font-bold"},Ko={key:0},Po={key:1},To={key:2},Do={class:"relative p-4 w-full max-w-md max-h-full"},No={id:"alert-3",class:"flex flex-col gap-4 p-4 mb-4 text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Qo={class:"flex felx-row justify-between items-center"},$o={class:"flex flex-col justify-center items-center gap-2"},Ro={key:0,class:"flex flex-col p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert"},Bo={class:"mt-1.5 list-disc list-inside"},Oo=["src"];function Uo(e,t,a,l,n,i){const d=(0,o.g2)("Input"),u=(0,o.g2)("Dropdown"),c=(0,o.g2)("ModalButton"),m=(0,o.g2)("modal"),h=(0,o.g2)("h"),p=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(p,{title:"PM4 - اضافه کردن رول جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",no,[n.error?((0,o.uX)(),(0,o.CE)("div",io,[t[13]||(t[13]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[14]||(t[14]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",uo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",co,[t[16]||(t[16]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",mo,[t[15]||(t[15]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ho,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",po,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",go,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["radio"==e.type&&"grade"==a?((0,o.uX)(),(0,o.CE)("div",fo,[(0,o.Lk)("label",yo,(0,s.v_)(e.name),1),(0,o.Lk)("div",ko,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.gradeOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`grade-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedGradeOption=e),onChange:t=>i.handleGradeSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,bo),[[r.XL,n.selectedGradeOption]]),(0,o.Lk)("label",{for:`grade-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,xo)]))),128)),(0,o.Lk)("div",vo,[(0,o.Lk)("div",wo,[(0,o.bo)((0,o.Lk)("input",{id:"grade-else",type:"radio",value:"else","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedGradeOption=e),onChange:t[2]||(t[2]=e=>i.handleGradeSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedGradeOption]]),t[17]||(t[17]=(0,o.Lk)("label",{for:"grade-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," غیره (دیگر) ",-1))]),"else"===n.selectedGradeOption?((0,o.uX)(),(0,o.CE)("div",_o,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.customGradeValue=e),onInput:t[4]||(t[4]=(...e)=>i.handleCustomGradeInput&&i.handleCustomGradeInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"نوع دلخواه را وارد کنید"},null,544),[[r.Jo,n.customGradeValue]])])):(0,o.Q3)("",!0)])])])):"radio"==e.type&&"commnet"==a?((0,o.uX)(),(0,o.CE)("div",Co,[(0,o.Lk)("label",Lo,(0,s.v_)(e.name),1),(0,o.Lk)("div",Eo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.commentOptions,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{id:`comment-${e}`,type:"radio",value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCommentOption=e),onChange:t=>i.handleCommentSelection(e),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,Xo),[[r.XL,n.selectedCommentOption]]),(0,o.Lk)("label",{for:`comment-${e}`,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"},(0,s.v_)(e),9,So)]))),128)),(0,o.Lk)("div",Ao,[(0,o.Lk)("div",Fo,[(0,o.bo)((0,o.Lk)("input",{id:"comment-else",type:"radio",value:"else","onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedCommentOption=e),onChange:t[7]||(t[7]=e=>i.handleCommentSelection("else")),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[r.XL,n.selectedCommentOption]]),t[18]||(t[18]=(0,o.Lk)("label",{for:"comment-else",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer"}," سایر ",-1))]),"else"===n.selectedCommentOption?((0,o.uX)(),(0,o.CE)("div",Mo,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.customCommentValue=e),onInput:t[9]||(t[9]=(...e)=>i.handleCustomCommentInput&&i.handleCustomCommentInput(...e)),type:"text",class:"block w-full p-2.5 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"توضیحات دلخواه را وارد کنید"},null,544),[[r.Jo,n.customCommentValue]])])):(0,o.Q3)("",!0)])])])):"input"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:2,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(u,{key:3,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,Wo)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(m,{type:"confirm",disabled:n.loading},{button:(0,o.k6)(()=>[n.loading?((0,o.uX)(),(0,o.CE)("button",{key:0,disabled:"",type:"button",class:(0,s.C4)([[n.loading?"":"hidden"],"inline-flex justify-center items-center"])},[...t[19]||(t[19]=[(0,o.Lk)("svg",{"aria-hidden":"true",role:"status",class:"inline w-4 h-4 me-3 text-white animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,o.Lk)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),(0,o.eW)(" لطفا صبر کنید ... ",-1)])],2)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("اضافه کردن")],64))]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Io,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Ko,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Po,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",To,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(c,{onClose:i.addNewReel},null,8,["onClose"])])]),_:1},8,["disabled"]),n.success?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,s.C4)([{hidden:n.hide},"backdrop-blur-sm bg-white/30 flex fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"])},[(0,o.Lk)("div",Do,[(0,o.Lk)("div",No,[(0,o.Lk)("header",Qo,[t[21]||(t[21]=(0,o.Lk)("svg",{class:"flex-shrink-0 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.bF)(h,{class:"ms-3 text-sm font-medium"},{default:(0,o.k6)(()=>[(0,o.eW)("رول "+(0,s.v_)(n.forms.reel_number.value)+" با موفقیت به سیستم اضافه شد.",1)]),_:1}),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>n.hide=!n.hide),type:"button",class:"ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-green-400 dark:hover:bg-gray-700"},[...t[20]||(t[20]=[(0,o.Lk)("span",{class:"sr-only"},"Close",-1),(0,o.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)])])]),(0,o.Lk)("main",$o,[1==n.warinig.status?((0,o.uX)(),(0,o.CE)("div",Ro,[t[22]||(t[22]=(0,o.Lk)("header",{class:"flex flex-row"},[(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})]),(0,o.Lk)("span",{class:"sr-only"},"Info"),(0,o.Lk)("span",{class:"font-bold"},"هشدار!")],-1)),(0,o.Lk)("main",null,[(0,o.Lk)("ul",Bo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.warinig.data,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e["message"]),1))),256))])])])):(0,o.Q3)("",!0),(0,o.Lk)("img",{src:n.qrcode,class:"w-[256px] h-[256px]"},null,8,Oo),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.printQRCode&&i.printQRCode(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"},"چاپ QR Code")])])])],2)):(0,o.Q3)("",!0)])]),_:1})}var zo={name:"addNewReel",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,modal:ye,Alert:Le,Card:ae},data(){return{forms:{reel_number:{type:"input",name:"شماره رول",title:"شماره رول",data:"",value:"",lable:"number"},width:{type:"input",name:"عرض",title:"عرض",data:"",value:"",lable:"number"},GSM:{type:"input",name:"گرماژ",title:"گرماژ",data:"",value:"",lable:"number"},length:{type:"input",name:"طول",title:"طول",data:"",value:"",lable:"number"},breaks:{type:"input",name:"پارگی",title:"پارگی",data:"",value:"",lable:"number"},grade:{type:"radio",name:"نوع",title:"نوع",data:"",value:"",lable:"text"},consumption_profile_name:{type:"dropdown",name:"پروفایل مصرف",title:"پروفایل مصرف",data:"",value:""},commnet:{type:"radio",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:"",lable:"text"}},gradeOptions:["Test Linear Homayoun","Kraft Linear Homayoun","Whitetop Linear Homayoun","Flutting Homayoun"],selectedGradeOption:"",customGradeValue:"",commentOptions:["عالی","اختلاف ۲ گرم بالا/پایین تر","اختلاف رطوبت بالا/پایین تر","پارگی ۱","پارگی ۲ یا بیشتر"],selectedCommentOption:"",customCommentValue:"",success:!1,error:!1,warinig:{status:!1,data:[]},errors:[],qrcode:"",hide:!1,loading:!1}},mounted(){(0,G.Tp)(),this.gradeOptions.length>0&&(this.selectedGradeOption=this.gradeOptions[0],this.forms.grade.value=this.gradeOptions[0]),this.commentOptions.length>0&&(this.selectedCommentOption=this.commentOptions[0],this.forms.commnet.value=this.commentOptions[0]),this.axios.get("/myapp/api/getReelNumber").then(e=>{this.forms.reel_number.value=e.data["next_reel_number"],this.forms.width.value=e.data["width"],this.forms.GSM.value=e.data["GSM"],this.forms.length.value=e.data["length"],this.forms.breaks.value=0,this.forms.consumption_profile_name.value=e.data["profile_name"],this.forms.consumption_profile_name.name=this.forms.consumption_profile_name.name+": "+e.data["profile_name"]}),this.axios.get("/myapp/api/getConsumptionProfileNames").then(e=>{this.forms.consumption_profile_name.data=e.data["profile_names"]})},watch:{hide(e,t){1==e&&location.reload()}},methods:{handleGradeSelection(e){"else"===e?(this.selectedGradeOption="else",this.forms.grade.value=this.customGradeValue):(this.selectedGradeOption=e,this.forms.grade.value=e,this.customGradeValue="")},handleCustomGradeInput(){this.forms.grade.value=this.customGradeValue},handleCommentSelection(e){"else"===e?(this.selectedCommentOption="else",this.forms.commnet.value=this.customCommentValue):(this.selectedCommentOption=e,this.forms.commnet.value=e,this.customCommentValue="")},handleCustomCommentInput(){this.forms.commnet.value=this.customCommentValue},clicked(e,t){"consumption_profile_name"==e&&(this.forms.consumption_profile_name.value=t,this.forms.consumption_profile_name.name=t)},formatNumber(e){return e.replace(/\D/g,"")},async addNewReel(){this.loading=!0;let e={reel_number:"PM4_"+this.forms.reel_number.value,width:this.forms.width.value,gsm:this.forms.GSM.value,length:this.forms.length.value,breaks:this.forms.breaks.value,grade:this.forms.grade.value,commnet:this.forms.commnet.value,consumption_profile_name:this.forms.consumption_profile_name.value,username:this.forms.username.value},t=`Reel Number: ${e["reel_number"]},\nWidth: ${e["width"]},\nGSM: ${e["gsm"]},\nLength:~ ${e["length"]},\nBreaks: ${e["breaks"]},\nGrade: ${e["grade"]}`;const a=await this.axios.post("/myapp/api/generateQrCode",{},{params:{data:JSON.stringify(e),d:t}});let r=a.data.filename,o=a.data.file;this.qrcode=`data:image/png;base64,${o}`,e["qr_code"]=r,this.errors=[];for(const l in this.forms)if(""==this.forms[l].value)"commnet"!=l&&0!==this.forms[l].value&&(this.forms[l].error=!0,this.loading=!1,this.errors.push({message:`${this.forms[l].name} مورد نیاز است`}));else if(this.forms[l].error=!1,"breaks"==l){let e=parseInt(this.forms.breaks.value.toString().replace(/,/g,""));(e<=-1||e>=21)&&(this.error=!0,this.errors.push({message:"مقدار پارگی باید بین 0 تا 20 باشد"}),this.loading=!1)}if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addNewPM4Reel/",{},{params:e});if("success"==t.data["status"])this.success=!0,this.loading=!1,0!=t.data["warning"].length&&(this.warinig.status=!0,this.warinig.data=t.data["warning"]);else if(this.loading=!1,this.error=!0,this.errors=t.data["errors"],this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}}else if(this.error=!0,this.labelFilename)try{await this.axios.post("/myapp/api/cleanupLabelFile",{},{params:{label_filename:this.labelFilename}})}catch(s){console.error("Failed to cleanup label file:",s)}},async printQRCode(){const e=window.open("","_blank");e.document.write(`\n        <html>\n          <head>\n            <title>چاپ QR-code</title>\n            <style>\n              body { display: flex; flex-direction: column; align-items: center; font-family: Arial, sans-serif; }\n              .qr-container { text-align: center; }\n              .reel-number { font-size: 64px; font-weight: bold; margin: 10px 0; }\n              .label { font-size: 32px; font-weight: bold; margin: 10px 0; }\n              .details { font-size: 24px; margin: 5px 0; }\n            </style>\n          </head>\n          <body>\n            <div class="qr-container">\n              <img src="${this.qrcode}" style="max-width: 330px;" />\n              <div class="reel-number">${"PM4_"+this.forms.reel_number.value}</div>\n              <div class="label">H O M A Y O U N</div>\n              <div class="details">${this.forms.grade.value}</div>\n              <div class="details">${this.forms.width.value} cm - ${this.forms.GSM.value} gr</div>\n              \x3c!-- <div class="details">${this.forms.GSM.value} gr</div> --\x3e\n            </div>\n          </body>\n        </html>\n      `),e.document.close(),e.print(),location.reload()}}};const Zo=(0,d.A)(zo,[["render",Uo]]);var jo=Zo;const Ho={class:"flex flex-col gap-2 justify-center items-center"},Go=["onClick"],Vo={class:"flex flex-col gap-2 justify-center items-center"},qo={class:"flex flex-col gap-2 justify-center items-center"},Jo={class:"flex flex-col gap-2 justify-center items-center"},Yo={class:"flex flex-col gap-2 justify-center items-center"},es={class:"flex flex-col gap-2 justify-center items-center"};function ts(e,t,a,r,l,n){const i=(0,o.g2)("Card"),d=(0,o.g2)("unloaded"),u=(0,o.g2)("loaded"),c=(0,o.g2)("used"),m=(0,o.g2)("moved"),h=(0,o.g2)("returned");return l.btnPanel?((0,o.uX)(),(0,o.Wv)(i,{key:0,title:"پنل forklift"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Ho,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.btns,e=>((0,o.uX)(),(0,o.CE)("button",{onClick:t=>n.activePanel(e),type:"button",class:"w-44 block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},(0,s.v_)(e.name),9,Go))),256))])]),_:1})):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(l.btns,e=>((0,o.uX)(),(0,o.CE)(o.FK,null,[1==e.isActive?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},["تخلیه شده"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:0,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Vo,[(0,o.bF)(d),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل فرک لیفت ")])]),_:1},8,["title"])):(0,o.Q3)("",!0),"بارگیری شده"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:1,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",qo,[(0,o.bF)(u),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل فرک لیفت ")])]),_:1},8,["title"])):(0,o.Q3)("",!0),"مصرف شده"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:2,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Jo,[(0,o.bF)(c),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل فرک لیفت ")])]),_:1},8,["title"])):(0,o.Q3)("",!0),"جا به جا شده"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:3,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Yo,[(0,o.bF)(m),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل فرک لیفت ")])]),_:1},8,["title"])):(0,o.Q3)("",!0),"برگشت داده شده"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:4,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",es,[(0,o.bF)(h),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل فرک لیفت ")])]),_:1},8,["title"])):(0,o.Q3)("",!0)],64)):(0,o.Q3)("",!0)],64))),256))}const as={class:"flex flex-col items-center mt-5 gap-4"},rs={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},os={class:"mt-1.5 list-disc list-inside"},ss={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},ls={class:"font-medium"},ns={key:0},is={key:1},ds={key:2},us=["onClick"],cs={class:"flex flex-col gap-2 font-bold"},ms={key:0},hs={key:1},ps={key:2};function gs(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)("form",as,[l.error?((0,o.uX)(),(0,o.CE)("div",rs,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",os,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",ss,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",ls,[(0,o.eW)((0,s.v_)(l.forms.unit.value)+" "+(0,s.v_)(l.forms.Quantity.value)+" با موفقیت به پلاگ "+(0,s.v_)(l.forms.lic_number.value)+" اضافه شد ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ns,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",is,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",ds,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,us)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",cs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ms,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",hs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",ps,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.unloaded},null,8,["onClose"])])]),_:1},8,["disabled"])])}var fs={name:"unloaded",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},unloading_location:{type:"dropdown",name:"محل تخلیه",title:"محل تخلیه",data:"",value:""},unit:{type:"dropdown",name:"واحد",title:"واحد",data:"",value:""},Quantity:{type:"input",name:"مقدار",title:"مقدار",value:"",numbertype:!0,lable:"number"},Quality:{type:"input",name:"کیفیت",title:"کیفیت",value:"",numbertype:!0},forklift_driver:{type:"input",name:"اسم راننده لیفت تراک",title:"اسم راننده لیفت تراک",value:""}},success:!1,error:!1,errors:[]}},computed:{formattedValue(){return this.formatNumber(this.inputValue)}},mounted(){(0,G.Tp)();const e={status:"LoadingUnloading",location:"Weight1",shipment_type:"Incoming"};this.axios.post("/myapp/api/getShipmentLicenseNumbers",{},{params:e}).then(e=>{console.log("lics:",e.data),this.forms.lic_number.data=e.data["license_numbers"]}),this.axios.get("/myapp/api/getAnbarTableNames").then(e=>{console.log(e.data),this.forms.unloading_location.data=e.data["data"]})},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{formatNumber(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatInput(){this.forms.Quantity.value=this.formatNumber(this.forms.Quantity.value)},clicked(e,t){if(console.log(e,t),"lic_number"==e){this.forms.lic_number.name=t,this.forms.lic_number.value=t;const e={lic_number:this.forms.lic_number.value};this.axios.get("/myapp/api/getUnitNamesBasedOnLicenseOfShipment",{params:e}).then(e=>{console.log(e.data),this.forms.unit.data=e.data["unit_names"]})}"unloading_location"==e&&(this.forms.unloading_location.name=t,this.forms.unloading_location.value=t),"unit"==e&&(this.forms.unit.name=t,this.forms.unit.value=t)},async unloaded(){const e={license_number:this.forms.lic_number.value,unloading_location:this.forms.unloading_location.value,unit:this.forms.unit.value,quantity:this.forms.Quantity.value.replace(/,/g,""),quality:this.forms.Quality.value,forklift_driver:this.forms.forklift_driver.value};console.log("params:",e);const t=await this.axios.post("/myapp/api/unload",{},{params:e});console.log("response.data: ",t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}}};const ys=(0,d.A)(fs,[["render",gs]]);var ks=ys;const bs={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},xs={class:"mt-1.5 list-disc list-inside"},vs={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},ws={class:"font-medium"},_s={key:0},Cs={key:1},Ls={key:2},Es={class:"w-48 overflow-y-auto max-h-48 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"},Xs={class:"flex items-center ps-3"},Ss=["onClick","id"],As=["for"],Fs=["onClick"],Ms={class:"flex flex-col gap-2 font-bold"},Ws={key:0},Is={key:1},Ks={key:2};function Ps(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)(o.FK,null,[l.error?((0,o.uX)(),(0,o.CE)("div",bs,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",xs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",vs,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",ws,[(0,o.eW)((0,s.v_)(l.forms.width.value)+"و"+(0,s.v_)(l.forms.reel_numbers.value)+" به "+(0,s.v_)(l.forms.lic_number.value)+" اضافه شد ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",_s,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Cs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Ls,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["check"==e.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[t[5]||(t[5]=(0,o.Lk)("h3",{class:"font-semibold text-gray-900 dark:text-white"},"شماره رول:",-1)),(0,o.Lk)("ul",Es,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:"w-full border-b border-gray-200 rounded-t-lg dark:border-gray-600"},[(0,o.Lk)("div",Xs,[(0,o.Lk)("input",{onClick:t=>n.addReal(e),id:"vue-checkbox-"+e,type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500"},null,8,Ss),(0,o.Lk)("label",{for:"vue-checkbox-"+e,class:"w-full py-3 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},(0,s.v_)(e),9,As)])]))),128))])],64)):(0,o.Q3)("",!0),"input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:1,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:2,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,Fs)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[6]||(t[6]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Ms,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Ws,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Is,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Ks,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.loaded},null,8,["onClose"])])]),_:1},8,["disabled"])],64)}var Ts={name:"loaded",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},unloading_location:{type:"dropdown",name:"محل بار شده",title:"محل تخلیه",data:"",value:""},width:{type:"dropdown",name:"عرض",title:"عرض",data:"",value:""},reel_numbers:{type:"check",name:"عرض",title:"عرض",data:"",value:[]},forklift_driver:{type:"input",name:"اسم راننده لیفت تراک",title:"اسم راننده لیفت تراک",value:""}},success:!1,error:!1,errors:[]}},mounted(){(0,G.Tp)();const e={status:"LoadingUnloading",location:"Weight1",shipment_type:"Outgoing"};this.axios.post("/myapp/api/getShipmentLicenseNumbers",{},{params:e}).then(e=>{console.log("lics:",e.data),this.forms.lic_number.data=e.data["license_numbers"]}),this.axios.get("/myapp/api/getAnbarTableNames").then(e=>{console.log(e.data),this.forms.unloading_location.data=e.data["data"]})},methods:{clicked(e,t){if(console.log(e,t),"lic_number"==e&&(this.forms.lic_number.name=t,this.forms.lic_number.value=t),"unloading_location"==e){this.forms.unloading_location.name=t,this.forms.unloading_location.value=t;const e={anbar_location:this.forms.unloading_location.value};this.axios.get("/myapp/api/getWidths",{params:e}).then(e=>{console.log(e.data),this.forms.width.data=e.data["widths"]})}if("width"==e){this.forms.width.value=t,this.forms.width.name=t;const e={anbar_location:this.forms.unloading_location.value,width:this.forms.width.value};this.axios.get("/myapp/api/getReelNumbersByWidthAndStatus",{params:e}).then(e=>{console.log(e.data),this.forms.reel_numbers.data=e.data["reel_numbers"]})}},addReal(e){const t=this.forms.reel_numbers.value.indexOf(e);t>=0?this.forms.reel_numbers.value.splice(t,1):this.forms.reel_numbers.value.push(e),console.log(this.forms.reel_numbers.value)},async loaded(){const e={lic_number:this.forms.lic_number.value,loading_location:this.forms.unloading_location.value,width:this.forms.width.value,reel_numbers:JSON.stringify(Array.from(this.forms.reel_numbers.value)),forklift_driver:this.forms.forklift_driver.value};console.log(e);const t=await this.axios.post("/myapp/api/loaded",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}}};const Ds=(0,d.A)(Ts,[["render",Ps]]);var Ns=Ds;const Qs={class:"flex flex-col items-center mt-5 gap-4"},$s={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Rs={class:"mt-1.5 list-disc list-inside"},Bs={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Os={class:"font-medium"},Us={key:0},zs={key:1},Zs={key:2},js=["onClick"],Hs={class:"flex flex-col gap-2 font-bold"},Gs={key:0},Vs={key:1},qs={key:2};function Js(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)("form",Qs,[l.error?((0,o.uX)(),(0,o.CE)("div",$s,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Rs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Bs,[t[5]||(t[5]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Os,[t[4]||(t[4]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Us,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",zs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Zs,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,onUpdate:t=>e.value=t,value:e.value,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,js)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[6]||(t[6]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Hs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Gs,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Vs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",qs,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.returned},null,8,["onClose"])])]),_:1},8,["disabled"])])}var Ys={name:"returned",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{supplier_name:{type:"dropdown",name:"اسم تامین کننده",title:"اسم تامین کننده",data:"",value:""},material_name:{type:"dropdown",name:"اسم ماده",title:"اسم ماده",data:"",value:""},unit:{type:"dropdown",name:"واحد",title:"واحد",data:"",value:""},Quantity:{type:"input",name:"مقدار",title:"مقدار",value:"",lable:"number"},to_anbar:{type:"dropdown",name:"به انبار",title:"به انبار",data:"",value:""},reason:{type:"input",name:"علت",title:"علت",data:"",value:""},forklift_driver:{type:"input",name:"اسم راننده لیفت تراک",title:"اسم راننده لیفت تراک",value:""}},success:!1,error:!1,errors:[]}},mounted(){this.axios.get("/myapp/api/getAnbarTableNames").then(e=>{console.log(e.data),this.forms.to_anbar.data=e.data["data"]}),this.axios.get("/myapp/api/getSupplierNamesBasedConsumtioon").then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]})},methods:{clicked(e,t){if(console.log(e,t),"supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;const e={supplier_name:t};this.axios.get("/myapp/api/getUnitAndMaterialNameBasedSupplierNmaeConsumption",{params:e}).then(e=>{console.log(e.data),this.forms.material_name.data=e.data["material_names"],this.forms.unit.data=e.data["units"]})}"material_name"==e&&(this.forms.material_name.name=t,this.forms.material_name.value=t),"unit"==e&&(this.forms.unit.name=t,this.forms.unit.value=t),"to_anbar"==e&&(this.forms.to_anbar.name=t,this.forms.to_anbar.value=t)},async returned(){const e={supplier_name:this.forms.supplier_name.value,material_name:this.forms.material_name.value,unit:this.forms.unit.value,Quantity:this.forms.Quantity.value,to_anbar:this.forms.to_anbar.value,reason:this.forms.reason.value,forklift_driver:this.forms.forklift_driver.value};console.log(e),this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/api/retuned",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}}};const el=(0,d.A)(Ys,[["render",Js]]);var tl=el;const al={class:"flex flex-col items-center mt-5 gap-4"},rl={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},ol={class:"mt-1.5 list-disc list-inside"},sl={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},ll={class:"font-medium"},nl={key:0},il={key:1},dl={key:2},ul=["onUpdate:modelValue","id"],cl=["for"],ml=["id","data-dropdown-toggle"],hl=["id"],pl=["aria-labelledby"],gl=["onClick"],fl={class:"flex flex-col gap-2 font-bold"},yl={key:0},kl={key:1},bl={key:2};function xl(e,t,a,l,n,i){const d=(0,o.g2)("ModalButton"),u=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)("form",al,[n.error?((0,o.uX)(),(0,o.CE)("div",rl,[t[1]||(t[1]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[2]||(t[2]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[0]||(t[0]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",ol,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",sl,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",ll,[t[3]||(t[3]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",nl,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",il,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",dl,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,s.C4)(["relative",[e.disabled?"":"hidden"]])},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.value=t,type:"text",id:a,class:(0,s.C4)([[e.error?"text-red-900 border-red-500 focus:border-red-500":"text-gray-900 focus:border-green-500 border-gray-300"],"block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 appearance-none focus:outline-none focus:ring-0 peer"]),placeholder:""},null,10,ul),[[r.Jo,e.value]]),(0,o.Lk)("label",{for:a,class:(0,s.C4)([[e.error?"peer-focus:text-red-500 text-red-500":"peer-focus:text-green-500 text-gray-500"],"absolute text-sm dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1"])},(0,s.v_)(e.name),11,cl)],2)):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("button",{id:a+"Button","data-dropdown-toggle":a+"dropdown",class:(0,s.C4)([[e.disabled?"":"hidden"],"justify-between w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"]),type:"button"},[(0,o.eW)((0,s.v_)(e.name)+" ",1),t[5]||(t[5]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],10,ml),(0,o.Lk)("div",{id:a+"dropdown",class:"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,gl)]))),256))],8,pl)],8,hl)],64)):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(u,{type:"confirm",disabled:n.error},{button:(0,o.k6)(()=>[...t[6]||(t[6]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",fl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",yl,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",kl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",bl,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(d,{onClose:i.moved},null,8,["onClose"])])]),_:1},8,["disabled"])])}var vl={name:"moved",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{from_anbar:{disabled:!0,type:"dropdown",name:"از انبار",title:"از انبار",data:"",value:""},real_or_raw:{disabled:!0,type:"dropdown",name:"Reel/Raw",title:"Reel/Raw",data:["Raw","Reel"],value:"Raw"},supplier_name:{disabled:!0,type:"dropdown",name:"اسم تامین کننده",title:"اسم تامین کننده",data:"",value:""},material_name:{disabled:!0,type:"dropdown",name:"اسم ماده",title:"اسم ماده",data:"",value:""},unit:{disabled:!0,type:"dropdown",name:"واحد",title:"واحد",data:"",value:""},Quantity:{disabled:!0,type:"input",name:"مقدار",title:"مقدار",value:"",lable:"number"},width:{disabled:!1,type:"dropdown",name:"عرض",title:"عرض",data:"",value:"",lable:"number"},reel:{disabled:!1,type:"dropdown",name:"رول",title:"رول",data:"",value:""},to_anbar:{disabled:!0,type:"dropdown",name:"به انبار",title:"به انبار",data:"",value:""},forklift_driver:{disabled:!0,type:"input",name:"اسم راننده لیفت تراک",title:"اسم راننده لیفت تراک",value:""}},success:!1,error:!1,errors:[],Raw:!1}},mounted(){(0,G.Tp)(),this.axios.get("/myapp/api/getAnbarTableNames").then(e=>{console.log(e.data),this.forms.from_anbar.data=e.data["data"],this.forms.to_anbar.data=e.data["data"]})},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{clicked(e,t){if(console.log(e,t),"from_anbar"==e&&(this.forms.from_anbar.name=t,this.forms.from_anbar.value=t),"real_or_raw"==e){if(this.forms.real_or_raw.name=t,this.forms.real_or_raw.value=t,"Reel"==t){this.forms.supplier_name.disabled=!1,this.forms.material_name.disabled=!1,this.forms.unit.disabled=!1,this.forms.Quantity.disabled=!1,this.forms.width.disabled=!0,this.forms.reel.disabled=!0;const e={anbar_location:this.forms.from_anbar.value,real_or_raw:"Reel"};this.axios.post("/myapp/api/loadDataForMoved",{},{params:e}).then(e=>{console.log(e.data),this.forms.width.data=e.data["width"]})}if("Raw"==t){this.forms.supplier_name.disabled=!0,this.forms.material_name.disabled=!0,this.forms.unit.disabled=!0,this.forms.Quantity.disabled=!0,this.forms.width.disabled=!1,this.forms.reel.disabled=!1;const e={anbar_location:this.forms.from_anbar.value,real_or_raw:"Raw"};this.axios.post("/myapp/api/loadDataForMoved",{},{params:e}).then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]})}}if("unit"==e&&(this.forms.unit.name=t,this.forms.unit.value=t),"supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;const e={anbar_location:this.forms.from_anbar.value,supplier_name:this.forms.supplier_name.value};this.axios.get("/myapp/api/getUnitAndMaterialNameBasedSupplierNmaeAndbar",{params:e}).then(e=>{this.forms.material_name.data=e.data["material_names"],this.forms.unit.data=e.data["units"]})}if("material_name"==e&&(this.forms.material_name.name=t,this.forms.material_name.value=t),"width"==e){this.forms.width.name=t,this.forms.width.value=t;const e={anbar_location:this.forms.from_anbar.value,width:this.forms.width.value};this.axios.get("/myapp/api/getReelNumbersByWidthAndStatus",{params:e}).then(e=>{console.log(e.data),this.forms.reel.data=e.data["reel_numbers"]})}"reel"==e&&(this.forms.reel.name=t,this.forms.reel.value=t),"to_anbar"==e&&(this.forms.to_anbar.name=t,this.forms.to_anbar.value=t)},async moved(){const e={from_anbar:this.forms.from_anbar.value,reel:this.forms.reel.value,supplier_name:this.forms.supplier_name.value,material_name:this.forms.material_name.value,unit:this.forms.unit.value,Quantity:this.forms.Quantity.value,width:this.forms.width.value,to_anbar:this.forms.to_anbar.value,forklift_driver:this.forms.forklift_driver.value,real_or_raw:this.forms.real_or_raw.value};if(console.log(e),this.errors=[],0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/api/moved",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const wl=(0,d.A)(vl,[["render",xl]]);var _l=wl;const Cl={class:"flex flex-col items-center mt-5 gap-4"},Ll={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},El={class:"mt-1.5 list-disc list-inside"},Xl={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Sl={class:"font-medium"},Al={key:0},Fl={key:1},Ml={key:2},Wl=["onClick"],Il={class:"flex flex-col gap-2 font-bold"},Kl={key:0},Pl={key:1},Tl={key:2};function Dl(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)("form",Cl,[l.error?((0,o.uX)(),(0,o.CE)("div",Ll,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",El,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Xl,[t[5]||(t[5]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Sl,[t[4]||(t[4]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Al,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Fl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Ml,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,Wl)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[6]||(t[6]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Il,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Kl,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Pl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Tl,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.used},null,8,["onClose"])])]),_:1},8,["disabled"])])}var Nl={name:"used",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{unloading_location:{type:"dropdown",name:"انبار مورد نظر",title:"انبار مورد نظر",data:"",value:""},supplier_name:{type:"dropdown",name:"اسم تامین کننده",title:"اسم تامین کننده",data:"",value:""},material_name:{type:"dropdown",name:"اسم ماده",title:"اسم ماده",data:"",value:""},unit:{type:"dropdown",name:"واحد",title:"واحد",data:"",value:""},Quantity:{type:"input",name:"مقدار",title:"مقدار",value:"",lable:"number"},forklift_driver:{type:"input",name:"اسم راننده لیفت تراک",title:"اسم راننده لیفت تراک",value:""}},success:!1,error:!1,errors:[]}},mounted(){(0,G.Tp)(),this.axios.get("/myapp/api/getAnbarTableNames").then(e=>{console.log(e.data),this.forms.unloading_location.data=e.data["data"]})},methods:{clicked(e,t){if(console.log(e,t),"unloading_location"==e){this.forms.unloading_location.name=t,this.forms.unloading_location.value=t;const e={anbar_location:this.forms.unloading_location.value};this.axios.get("/myapp/api/getSupplierNamesBasedAndbar",{params:e}).then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]})}if("supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;const e={anbar_location:this.forms.unloading_location.value,supplier_name:t};this.axios.get("/myapp/api/getUnitAndMaterialNameBasedSupplierNmaeAndbar",{params:e}).then(e=>{console.log(e.data),this.forms.material_name.data=e.data["material_names"],this.forms.unit.data=e.data["units"]})}"material_name"==e&&(this.forms.material_name.name=t,this.forms.material_name.value=t),"unit"==e&&(this.forms.unit.name=t,this.forms.unit.value=t)},async used(){const e={unloading_location:this.forms.unloading_location.value,supplier_name:this.forms.supplier_name.value,material_name:this.forms.material_name.value,unit:this.forms.unit.value,quantity:this.forms.Quantity.value,forklift_driver:this.forms.forklift_driver.value},t=await this.axios.post("/myapp/api/used",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}}};const Ql=(0,d.A)(Nl,[["render",Dl]]);var $l=Ql,Rl={name:"forkliftPanel",components:{Used:$l,Moved:_l,Returned:tl,Loaded:Ns,Unloaded:ks,modal:ye,Alert:Le,Card:ae},data(){return{btnPanel:!0,btns:[{name:"تخلیه شده",isActive:!1},{name:"بارگیری شده",isActive:!1},{name:"مصرف شده",isActive:!1},{name:"جا به جا شده",isActive:!1},{name:"برگشت داده شده",isActive:!1}]}},methods:{activePanel(e){for(let t=0;t<this.btns.length;t++)e.name==this.btns[t].name?(this.btns[t].isActive=!0,this.btnPanel=!1):this.btns[t].isActive=!1},backToPanel(){for(let e=0;e<this.btns.length;e++)this.btns[e].isActive&&(this.btns[e].isActive=!1,this.btnPanel=!0)}},mounted(){(0,G.Tp)()}};const Bl=(0,d.A)(Rl,[["render",ts]]);var Ol=Bl;const Ul={class:"flex flex-col gap-2 justify-center items-center"},zl={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Zl={class:"mt-1.5 list-disc list-inside"},jl={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Hl={class:"font-medium"},Gl={key:0},Vl={key:1},ql={key:2},Jl=["id","data-dropdown-toggle"],Yl=["id"],en=["aria-labelledby"],tn=["onClick"],an={class:"flex flex-col gap-2 font-bold"},rn={key:0},on={key:1},sn={key:2};function ln(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("ModalButton"),u=(0,o.g2)("modal"),c=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(c,{title:"افزودن بارنامه"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Ul,[l.error?((0,o.uX)(),(0,o.CE)("div",zl,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Zl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",jl,[t[5]||(t[5]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Hl,[t[4]||(t[4]=(0,o.eW)(" بارنامه جدید با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Gl,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Vl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",ql,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("button",{id:a+"Button","data-dropdown-toggle":a+"dropdown",class:(0,s.C4)([[e.status?"":"hidden"],"justify-between w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"]),type:"button"},[(0,o.eW)((0,s.v_)(e.name)+" ",1),t[6]||(t[6]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],10,Jl),(0,o.Lk)("div",{id:a+"dropdown",class:"w-44 z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e.value||e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.display||e),9,tn)]))),256))],8,en)],8,Yl)],64)):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(u,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[7]||(t[7]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",an,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",rn,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",on,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",sn,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(d,{onClose:n.addShipment},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var nn={name:"createShipment",components:{ModalButton:Ye,Dropdown:Ge,Input:Be,Lic_numer:Pe,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{status:!0,type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},shipmet_type:{status:!0,type:"dropdown",name:"نوع بار نامه",title:"نوع بار نامه",data:[{display:"ورودی",value:"Incoming"},{display:"خروجی",value:"Outgoing"}],value:"Incoming"},supplier_name:{status:!0,type:"dropdown",name:"اسم فروشنده",title:"اسم تامین کننده",data:"",value:""},material_type:{status:!0,type:"dropdown",name:"نوع ماده",title:"نوع ماده",data:"",value:""},material_name:{status:!0,type:"dropdown",name:"اسم ماده",title:"اسم ماده",data:"",value:""},customer_name:{status:!1,type:"dropdown",name:"اسم مشتری",title:"اسم مشتری",data:"",value:""},username:{status:!0,type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},Incoming:!0,success:!1,error:!1,errors:[],lic:""}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,window.location.href="/myapp/addShipment/"},5e3)}},mounted(){this.$route.query.license_number&&(this.forms.lic_number.name=this.$route.query.license_number,this.forms.lic_number.value=this.$route.query.license_number),(0,G.Tp)(),this.axios.get("/myapp/api/getLicenseNumbers").then(e=>{console.log(e.data),this.forms.lic_number.data=e.data["free_truck"]}),this.axios.get("/myapp/api/getSupplierNames").then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]}),this.axios.get("/myapp/api/getCustomerNames").then(e=>{console.log(e.data),this.forms.customer_name.data=e.data["customer_names"],console.log(this.forms.customer_name.data)})},methods:{clicked(e,t){if(console.log(e,t),"lic_number"==e&&(this.forms.lic_number.name=t,this.forms.lic_number.value=t),"supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;let e={supplier_name:t};this.axios.get("/myapp/api/getMaterialTypes",{params:e}).then(e=>{console.log(e.data),this.forms.material_type.data=e.data["material_types"]}),this.axios.get("/myapp/api/getMaterialNames",{params:e}).then(e=>{console.log(e.data),this.forms.material_name.data=e.data["material_names"]})}"material_type"==e&&(this.forms.material_type.name=t,this.forms.material_type.value=t),"material_name"==e&&(this.forms.material_name.name=t,this.forms.material_name.value=t),"shipmet_type"==e&&(this.forms.shipmet_type.name=t,this.forms.shipmet_type.value=t,"Incoming"==t?(this.forms.supplier_name.status=!0,this.forms.material_type.status=!0,this.forms.material_name.status=!0,this.forms.customer_name.status=!1,this.Incoming=!0):(this.forms.supplier_name.status=!1,this.forms.material_type.status=!1,this.forms.material_name.status=!1,this.forms.customer_name.status=!0,this.Incoming=!1)),"customer_name"==e&&(console.log(t),this.forms.customer_name.name=t,this.forms.customer_name.value=t)},async addShipment(){const e={license_number:this.forms.lic_number.value,supplier_name:this.forms.supplier_name.value,material_type:this.forms.material_type.value,material_name:this.forms.material_name.value,shipment_type:this.forms.shipmet_type.value,customer_name:this.forms.customer_name.value,username:this.forms.username.value,Incoming:this.Incoming};if(this.errors=[],"Incoming"===this.forms.shipmet_type.value?(""===this.forms.supplier_name.value&&this.errors.push({status:"error",message:"سام تامین کننده را انتخاب کنید"}),console.log("mat",this.forms.material_type.value),""===this.forms.material_type.value&&this.errors.push({status:"error",message:"نوع ماده را انتخاب کنید"}),""===this.forms.material_name.value&&this.errors.push({status:"error",message:"اسم ماده را انتخاب کنید"})):""===this.forms.customer_name.value&&this.errors.push({status:"error",message:"اسم مشتری را انتخاب کنید"}),""===this.forms.username.value&&this.errors.push({status:"error",message:"نام کاربری را وارد کنید"}),0==this.errors.length){console.log("no error"),this.error=!1,console.log(this.errors);const t=await this.axios.post("/myapp/addShipment/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const dn=(0,d.A)(nn,[["render",ln]]);var un=dn;const cn={class:"flex flex-col items-center mt-5 gap-4"},mn={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},hn={class:"mt-1.5 list-disc list-inside"},pn={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},gn={class:"font-medium"},fn={key:0},yn={key:1},kn={key:2},bn={class:"w-48 overflow-y-auto max-h-48 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white"},xn=["onClick"],vn={class:"flex flex-col gap-2 font-bold"},wn={key:0},_n={key:1},Cn={key:2};function Ln(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal"),m=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(m,{title:"ایجاد سفارش فروش"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",cn,[l.error?((0,o.uX)(),(0,o.CE)("div",mn,[t[1]||(t[1]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[2]||(t[2]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[0]||(t[0]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",hn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",pn,[t[3]||(t[3]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",gn,[(0,o.eW)(" مشتری جدید با نام "+(0,s.v_)(l.forms.customer_name.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",fn,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",yn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",kn,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["list"==e.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[t[4]||(t[4]=(0,o.Lk)("h3",{class:"font-semibold text-gray-900 dark:text-white"},"لیست شماره رول:",-1)),(0,o.Lk)("ul",bn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value.split(","),e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:"w-full p-2 border-b border-gray-200 rounded-t-lg dark:border-gray-600"},(0,s.v_)(e),1))),128))])],64)):(0,o.Q3)("",!0),"input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:1,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:2,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,xn)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm"},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",vn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",wn,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",_n,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Cn,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.createsSales},null,8,["onClose"])])]),_:1})])]),_:1})}var En={name:"sales",components:{Dropdown:Ge,Input:Be,ModalButton:Ye,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},customer_name:{type:"input",name:"اسم مشتری",title:"اسم مشتری",value:"",disabled:!0},list_of_reels:{type:"list",name:"لیست رول ها",title:"لیست رول ها",value:"",disabled:!0},weight1:{type:"input",name:"وزن 1",title:"وزن 1",value:"",disabled:!0,lable:"number"},weight2:{type:"input",name:"وزن 2",title:"وزن 2",value:"",disabled:!0,lable:"number"},net_weight:{type:"input",name:"وزن خالص",title:"وزن خالص",value:"",disabled:!0,lable:"number"},loading_location:{type:"input",name:"محل بار شده",title:"محل بار شده",value:"",disabled:!0},consuption_profile_name:{type:"input",name:"اسم پوفایل مصرفی",title:"اسم پوفایل مصرفی",value:"",disabled:!0},price_pre_kg:{type:"input",name:"قیمت تومان هر کیلوگرم",title:"قیمت تومان هر کیلوگرم",value:"",numbertype:!0,lable:"number"},vat:{type:"dropdown",name:"مالیات بر ارزش افزوده",title:"مالیات بر ارزش افزوده",data:["0%","9%","10%"],value:"0"},total_price:{type:"input",name:"قمیت تومان کل",title:"قمیت تومان کل",value:"",disabled:!0,lable:"number"},extra_cost:{type:"input",name:"هزینه اضافی",title:"هزینه اضافی",value:"",numbertype:!0,lable:"number"},invoice_status:{type:"dropdown",name:"وضعیت فاکتور",title:"وضعیت فاکتور",data:["Sent","NA"],value:""},invoice_number:{type:"input",name:"شماره فاکتور",title:"شماره فاکتور",value:"",lable:"number"},payment_status:{type:"dropdown",name:"وضعیت پرداخت",title:"وضعیت پرداخت",data:["Terms","Paid"],value:""},document_info:{type:"input",name:"اظلاعات سند",title:"اظلاعات سند",value:""},commnet:{type:"input",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[]}},computed:{formattedValue(){return this.formatNumber(this.inputValue)},total_price(){let e=this.forms.vat.value;e=parseInt(e.replace("%",""));let t=parseInt(this.forms.net_weight.value.replace(/,/g,""))*parseInt(this.forms.price_pre_kg.value.replace(/,/g,""));return 0==e?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):(t+t*(e/100)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){(0,G.Tp)();const e={status:"Office",location:"Office",shipment_type:"Outgoing"};this.axios.post("/myapp/api/getShipmentLicenseNumbers",{},{params:e}).then(e=>{console.log("lics:",e.data),this.forms.lic_number.data=e.data["license_numbers"]})},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{formatNumber(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatInput(){this.forms.extra_cost.value=this.formatNumber(this.forms.extra_cost.value),this.forms.price_pre_kg.value=this.formatNumber(this.forms.price_pre_kg.value)},clicked(e,t){if(console.log(e,t),"lic_number"==e){this.forms.lic_number.name=t,this.forms.lic_number.value=t;const e={license_number:this.forms.lic_number.value};this.axios.post("/myapp/api/getShipmentDetails2ByLicenseNumber",{},{params:e}).then(e=>{console.log(e.data),this.forms.customer_name.value=e.data["customer_name"],this.forms.list_of_reels.value=e.data["list_of_reels"],this.forms.weight1.value=e.data["weight1"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.weight2.value=e.data["weight2"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.net_weight.value=e.data["net_weight"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.loading_location.value=e.data["unloaded_location"],this.forms.consuption_profile_name.value=e.data["consuption_profile_name"]})}"vat"==e&&(this.forms.vat.name=t,this.forms.vat.value=t,console.log(this.total_price),this.forms.total_price.value=this.total_price),"invoice_status"==e&&(this.forms.invoice_status.name=t,this.forms.invoice_status.value=t),"payment_status"==e&&(this.forms.payment_status.name=t,this.forms.payment_status.value=t)},async createsSales(){let e=this.forms.vat.value;const t={lic_number:this.forms.lic_number.value,customer_name:this.forms.customer_name.value,list_of_reels:this.forms.list_of_reels.value,weight1:parseInt(this.forms.weight1.value.replace(/,/g,"")),weight2:parseInt(this.forms.weight2.value.replace(/,/g,"")),net_weight:parseInt(this.forms.net_weight.value.replace(/,/g,"")),loading_location:this.forms.loading_location.value,consuption_profile_name:this.forms.consuption_profile_name.value,price_pre_kg:this.forms.price_pre_kg.value.replace(/,/g,""),vat:parseInt(e.replace("%","")),total_price:parseInt(this.forms.total_price.value.replace(/,/g,"")),extra_cost:parseInt(this.forms.extra_cost.value.replace(/,/g,"")),invoice_status:this.forms.invoice_status.value,invoice_number:parseInt(this.forms.invoice_number.value.replace(/,/g,"")),payment_status:this.forms.payment_status.value,document_info:this.forms.document_info.value,commnet:this.forms.commnet.value,username:this.forms.username.value};console.log(t),this.errors=[];for(const a in this.forms)""==this.forms[a].value?"comment"!=a&&(this.forms[a].error=!0,this.errors.push({message:`${this.forms[a].name} مورد نیاز است`})):this.forms[a].error=!1;if(0==this.errors.length){this.error=!1;const e=await this.axios.post("/myapp/createSalesOrder/",{},{params:t});console.log(e.data),"success"==e.data["status"]?this.success=!0:(this.error=!0,this.errors=e.data["errors"])}else this.error=!0}}};const Xn=(0,d.A)(En,[["render",Ln]]);var Sn=Xn;const An={class:"flex flex-col items-center mt-5 gap-4"},Fn={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Mn={class:"mt-1.5 list-disc list-inside"},Wn={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},In={class:"font-medium"},Kn={key:0},Pn={key:1},Tn={key:2},Dn=["onClick"],Nn={class:"flex flex-col gap-2 font-bold"},Qn={key:0},$n={key:1},Rn={key:2};function Bn(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("Alert"),c=(0,o.g2)("ModalButton"),m=(0,o.g2)("modal"),h=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(h,{title:"ایجاد سفارش خرید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",An,[l.error?((0,o.uX)(),(0,o.CE)("div",Fn,[t[1]||(t[1]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[2]||(t[2]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[0]||(t[0]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Mn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Wn,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",In,[t[3]||(t[3]=(0,o.eW)(" با موفقیت به سیستم اضافه شد. ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Kn,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Pn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Tn,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:t,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:t},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("a",{onClick:a=>n.clicked(t,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,Dn)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(m,{type:"confirm"},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Nn,[l.weightAdjustmentMessage?((0,o.uX)(),(0,o.Wv)(u,{key:0,type:"warning",message:l.weightAdjustmentMessage},null,8,["message"])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Qn,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",$n,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Rn,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(c,{onClose:n.createPurchase},null,8,["onClose"])])]),_:1})])]),_:1})}var On={name:"purchase",components:{ModalButton:Ye,Dropdown:Ge,Input:Be,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},supplier_name:{type:"input",name:"اسم تامین کننده",title:"اسم تامین کننده",value:"",disabled:!0},material_type:{type:"input",name:"نوع ماده",title:"نوع ماده",value:"",disabled:!0},material_name:{type:"input",name:"اسم ماده",title:"اسم ماده",value:"",disabled:!0},weight1:{type:"input",name:"وزن 1",title:"وزن 1",value:"",disabled:!0,lable:"number"},weight2:{type:"input",name:"وزن 2",title:"وزن 2",value:"",disabled:!0,lable:"number"},net_weight:{type:"input",name:"وزن خالص",title:"وزن خالص",value:"",disabled:!0,lable:"number"},adjusted_weight:{type:"input",name:"وزن تنظیم شده",title:"وزن تنظیم شده",value:"",lable:"number"},unloaded_location:{type:"input",name:"محل تخلیه شده",title:"محل تخلیه شده",value:"",disabled:!0},unit:{type:"input",name:"واحد",title:"واحد",value:"",disabled:!0},quantity:{type:"input",name:"مقدار",title:"مقدار",value:"",disabled:!0,lable:"number"},quality:{type:"input",name:"کیفیت",title:"مالیات بر ارزش افزوده",value:"",disabled:!0},penalty:{type:"input",name:"جریمه",title:"جریمه",value:"",numbertype:!0,lable:""},price_pre_kg:{type:"input",name:"قیمت تومان هر کیلوگرم",title:"قیمت تومان هر کیلوگرم",value:"",numbertype:!0,lable:"number"},vat:{type:"dropdown",name:"مالیات بر ارزش افزوده",title:"مالیات بر ارزش افزوده",data:["0%","9%","10%"],value:"0"},total_price:{type:"input",name:"قمیت کل تومان",title:"قمیت کل تومان",value:"",disabled:!0,lable:"number"},extra_cost:{type:"input",name:"هزینه اضافی تومان",title:"هزینه اضافی تومان",value:"",numbertype:!0,lable:"number"},invoice_status:{type:"dropdown",name:"وضعیت فاکتور",title:"وضعیت فاکتور",data:["Received","NA"],value:""},supplier_invoice:{type:"input",name:"شماره فاکتور تامین کننده",title:"شماره فاکتور تامین کننده",value:"",lable:"number"},payment_status:{type:"dropdown",name:"وضعیت پرداخت",title:"وضعیت پرداخت",data:["Terms","Paid"],value:""},document_info:{type:"input",name:"اظلاعات سند",title:"اظلاعات سند",value:"",lable:""},commnet:{type:"input",name:"توضیحات",title:"توضیحات",value:"",lable:"comment"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[],originalNetWeight:"",weightAdjustmentMessage:""}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)},"forms.adjusted_weight.value":function(e){if(e){const t=this.forms.net_weight.value;this.forms.net_weight.value=e,this.weightAdjustmentMessage=`${this.forms.username.value} changed net weight from ${t} to ${e}`;const a={username:this.forms.username.value,license_number:this.forms.lic_number.value,original_weight:t,adjusted_weight:e,action:"weight_adjustment"};this.axios.post("/myapp/api/logWeightAdjustment",{},{params:a}).then(e=>{console.log("Weight adjustment logged:",e.data)}).catch(e=>{console.error("Error logging weight adjustment:",e)})}}},computed:{formattedValue(){return this.formatNumber(this.inputValue)},total_price(){let e=this.forms.vat.value;e=parseInt(e.replace("%",""));let t=parseInt(this.forms.net_weight.value.replace(/,/g,""))*parseInt(this.forms.price_pre_kg.value.replace(/,/g,""));return 0==e?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):(t+t*(e/100)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){(0,G.Tp)();const e={status:"Office",location:"Office",shipment_type:"Incoming"};this.axios.post("/myapp/api/getShipmentLicenseNumbers",{},{params:e}).then(e=>{console.log("lics:",e.data),this.forms.lic_number.data=e.data["license_numbers"]})},methods:{formatNumber(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatInput(){this.forms.extra_cost.value=this.formatNumber(this.forms.extra_cost.value),this.forms.price_pre_kg.value=this.formatNumber(this.forms.price_pre_kg.value)},clicked(e,t){if(console.log(e,t),"lic_number"==e){this.forms.lic_number.name=t,this.forms.lic_number.value=t;const e={license_number:this.forms.lic_number.value};this.axios.post("/myapp/api/getShipmentDetailsByLicenseNumber",{},{params:e}).then(e=>{console.log(e.data),this.forms.supplier_name.value=e.data["supplier_name"],this.forms.material_type.value=e.data["material_type"],this.forms.material_name.value=e.data["material_name"],this.forms.weight1.value=e.data["weight1"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.weight2.value=e.data["weight2"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.net_weight.value=e.data["net_weight"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.unloaded_location.value=e.data["unload_location"],this.forms.unit.value=e.data["unit"],this.forms.quantity.value=e.data["quantity"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),this.forms.quality.value=e.data["quality"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}"vat"==e&&(this.forms.vat.name=t,this.forms.vat.value=t,console.log(this.total_price),this.forms.total_price.value=this.total_price),"invoice_status"==e&&(this.forms.invoice_status.name=t,this.forms.invoice_status.value=t),"payment_status"==e&&(this.forms.payment_status.name=t,this.forms.payment_status.value=t)},async createPurchase(){let e=this.forms.vat.value;const t={license_number:this.forms.lic_number.value,supplier_name:this.forms.supplier_name.value,material_type:this.forms.material_type.value,material_name:this.forms.material_name.value,weight1:parseInt(this.forms.weight1.value.replace(/,/g,"")),weight2:parseInt(this.forms.weight2.value.replace(/,/g,"")),net_weight:parseInt(this.forms.net_weight.value.replace(/,/g,"")),adjusted_weight:parseInt(this.forms.adjusted_weight.value.replace(/,/g,"")),unloaded_location:this.forms.unloaded_location.value,unit:this.forms.unit.value,quantity:parseInt(this.forms.quantity.value.replace(/,/g,"")),quality:parseInt(this.forms.quality.value.replace(/,/g,"")),penalty:parseInt(this.forms.penalty.value.replace(/,/g,"")),price_pre_kg:parseInt(this.forms.price_pre_kg.value.replace(/,/g,"")),vat:parseInt(e.replace("%","")),total_price:parseInt(this.forms.total_price.value.replace(/,/g,"")),extra_cost:parseInt(this.forms.extra_cost.value.replace(/,/g,"")),invoice_status:this.forms.invoice_status.value,supplier_invoice:parseInt(this.forms.supplier_invoice.value.replace(/,/g,"")),payment_status:this.forms.payment_status.value,document_info:this.forms.document_info.value,commnet:this.forms.commnet.value,username:this.forms.username.value};console.log(t),this.errors=[];for(const a in this.forms)""==this.forms[a].value?"comment"!=a&&(this.forms[a].error=!0,this.errors.push({message:`${this.forms[a].name} مورد نیاز است`})):this.forms[a].error=!1;if(0==this.errors.length){this.error=!1;const e=await this.axios.post("/myapp/createPurchaseOrder/",{},{params:t});console.log(e.data),"success"==e.data["status"]?this.success=!0:(this.error=!0,this.errors=e.data["errors"])}else this.error=!0}}};const Un=(0,d.A)(On,[["render",Bn]]);var zn=Un;const Zn={class:"flex flex-col items-center mt-5 gap-4"},jn={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Hn={class:"mt-1.5 list-disc list-inside"},Gn={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Vn={class:"font-medium"},qn={key:0},Jn={key:1},Yn={key:2},ei=["onClick"],ti={class:"flex flex-col gap-2 font-bold"},ai={key:0},ri={key:1},oi={key:2};function si(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)("form",Zn,[l.error?((0,o.uX)(),(0,o.CE)("div",jn,[t[1]||(t[1]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[2]||(t[2]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[0]||(t[0]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Hn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Gn,[t[3]||(t[3]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Vn,[(0,o.eW)(" شما وزن "+(0,s.v_)(l.forms.weight1.value)+" کیلوگرم را برای بارنامه مشتری/خریدار با پلاگ "+(0,s.v_)(l.forms.lic_number.value)+"در سیستم ثبت کردید. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",qn,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Jn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",Yn,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:t,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:t},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("a",{onClick:a=>n.clicked(t,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,ei)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm"},{button:(0,o.k6)(()=>[...t[4]||(t[4]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",ti,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ai,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",ri,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",oi,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.weight1},null,8,["onClose"])])]),_:1})])}var li={name:"weight1",components:{Input:Be,ModalButton:Ye,Dropdown:Ge,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},weight1:{type:"input",name:"وزن 1",title:"وزن 1",value:"",numbertype:!0,lable:"number"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[]}},computed:{formattedValue(){return this.formatNumber(this.inputValue)}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},mounted(){(0,G.Tp)();const e={status:"Registered",location:"Entrance"};this.axios.post("/myapp/api/getShipmentLicenseNumbers",{},{params:e}).then(e=>{console.log("lics:",e.data),this.forms.lic_number.data=e.data["license_numbers"]})},methods:{formatNumber(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatInput(){this.forms.weight1.value=this.formatNumber(this.forms.weight1.value)},clicked(e,t){console.log(e,t),"lic_number"==e&&(this.forms.lic_number.name=t,this.forms.lic_number.value=t)},async weight1(){const e={license_number:this.forms.lic_number.value,weight1:this.forms.weight1.value.replace(/,/g,""),username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/updateWeight1/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const ni=(0,d.A)(li,[["render",si]]);var ii=ni;const di={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},ui={class:"mt-1.5 list-disc list-inside"},ci={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},mi={class:"font-medium"},hi={key:0},pi={key:1},gi={key:2},fi=["onClick"],yi={class:"flex flex-col gap-2 font-bold"},ki={key:0},bi={key:1},xi={key:2};function vi(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal");return(0,o.uX)(),(0,o.CE)(o.FK,null,[l.error?((0,o.uX)(),(0,o.CE)("div",di,[t[1]||(t[1]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[2]||(t[2]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[0]||(t[0]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",ui,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",ci,[t[3]||(t[3]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",mi,[(0,o.eW)(" شما وزن ثانویه "+(0,s.v_)(l.forms.weight2.value)+" و وزن خالص "+(0,s.v_)(l.forms.net_weight.value)+" کیلوگرم را برای بارنامه مشتری/خریدار با پلاگ "+(0,s.v_)(l.forms.lic_number.value)+"در سیستم ثبت کردید. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",hi,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",pi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",gi,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:t,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:t},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("a",{onClick:a=>n.clicked(t,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,fi)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm"},{button:(0,o.k6)(()=>[...t[4]||(t[4]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",yi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ki,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",bi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",xi,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.weight2},null,8,["onClose"])])]),_:1})],64)}var wi={name:"weight2",components:{Input:Be,ModalButton:Ye,Dropdown:Ge,Card:ae,Alert:Le,modal:ye},data(){return{forms:{lic_number:{type:"dropdown",name:"شماره پلاک",title:"شماره پلاک",data:"",value:""},weight1:{type:"input",name:"وزن 1",title:"وزن 1",value:"",disable:!0,disabled:!0,lable:"number"},weight2:{type:"input",name:"وزن 2",title:"وزن 2",value:"",numbertype:!0,lable:"number"},net_weight:{type:"input",name:"وزن خالص",title:"وزن خالص",value:"",numbertype:!0,lable:"number"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[]}},mounted(){(0,G.Tp)();const e={status:"LoadedUnloaded",location:"Weight2"};this.axios.post("/myapp/api/getShipmentLicenseNumbers",{},{params:e}).then(e=>{console.log("lics:",e.data),this.forms.lic_number.data=e.data["license_numbers"]})},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},computed:{formattedValue(){return this.formatNumber(this.inputValue)}},methods:{formatNumber(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatInput(){this.forms.weight1.value=this.formatNumber(this.forms.weight1.value),this.forms.weight2.value=this.formatNumber(this.forms.weight2.value),this.forms.net_weight.value=this.formatNumber(this.forms.net_weight.value)},clicked(e,t){if(console.log(e,t),"lic_number"==e){this.forms.lic_number.name=t,this.forms.lic_number.value=t;const e={license_number:this.forms.lic_number.value,status:"LoadedUnloaded",location:"Weight2"};this.axios.get("/myapp/api/showWeight1/",{params:e}).then(e=>{console.log(e.data),this.forms.weight1.value=e.data["weight1"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}},async weight2(){const e={license_number:this.forms.lic_number.value,weight1:this.forms.weight1.value.replace(/,/g,""),weight2:this.forms.weight2.value.replace(/,/g,""),net_weight:this.forms.net_weight.value.replace(/,/g,""),username:this.forms.username.value};console.log(e),this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/updateWeight2/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const _i=(0,d.A)(wi,[["render",vi]]);var Ci=_i;const Li={class:"flex flex-col gap-2 justify-center items-center"},Ei=["onClick"],Xi={class:"flex flex-col gap-2 justify-center items-center"},Si={class:"flex flex-col gap-2 justify-center items-center"};function Ai(e,t,a,r,l,n){const i=(0,o.g2)("Card"),d=(0,o.g2)("weight1"),u=(0,o.g2)("weight2");return l.btnPanel?((0,o.uX)(),(0,o.Wv)(i,{key:0,title:"پنل ایستگاه وزن کشی"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Li,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.btns,e=>((0,o.uX)(),(0,o.CE)("button",{onClick:t=>n.activePanel(e),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center rounded-lg text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300"},(0,s.v_)(e.name),9,Ei))),256))])]),_:1})):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(l.btns,e=>((0,o.uX)(),(0,o.CE)(o.FK,null,[1==e.isActive?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},["وزن اولیه"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:0,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Xi,[(0,o.bF)(d),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل ")])]),_:1},8,["title"])):(0,o.Q3)("",!0),"وزن ثانویه"==e.name?((0,o.uX)(),(0,o.Wv)(i,{key:1,title:e.name},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Si,[(0,o.bF)(u),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.backToPanel&&n.backToPanel(...e)),type:"button",class:"inline-flex justify-center w-48 px-2 py-1.5 text-sm font-medium text-center text-white bg-rose-600 rounded-lg hover:bg-rose-700 focus:ring-4 focus:outline-none focus:ring-rose-300 dark:bg-rose-500 dark:hover:bg-rose-600 dark:focus:ring-rose-800"}," بازگشت به پنل ")])]),_:1},8,["title"])):(0,o.Q3)("",!0)],64)):(0,o.Q3)("",!0)],64))),256))}var Fi={name:"weightStationPanel",components:{Weight2:Ci,Weight1:ii,modal:ye,Alert:Le,Card:ae},data(){return{btnPanel:!0,btns:[{name:"وزن اولیه",isActive:!1},{name:"وزن ثانویه",isActive:!1}]}},methods:{activePanel(e){for(let t=0;t<this.btns.length;t++)e.name==this.btns[t].name?(this.btns[t].isActive=!0,this.btnPanel=!1):this.btns[t].isActive=!1},backToPanel(){for(let e=0;e<this.btns.length;e++)this.btns[e].isActive&&(this.btns[e].isActive=!1,this.btnPanel=!0)}},mounted(){(0,G.Tp)()}};const Mi=(0,d.A)(Fi,[["render",Ai]]);var Wi=Mi;const Ii={class:"flex flex-col items-center mt-5 gap-4"},Ki={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Pi={class:"mt-1.5 list-disc list-inside"},Ti={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Di={class:"font-medium"},Ni={key:0},Qi={key:1},$i={key:2},Ri={key:0,class:"relative"},Bi=["onUpdate:modelValue","id"],Oi=["for"],Ui={class:"flex flex-col gap-2 font-bold"};function zi(e,t,a,l,n,i){const d=(0,o.g2)("modal"),u=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(u,{title:"افزودن انبار جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",Ii,[n.error?((0,o.uX)(),(0,o.CE)("div",Ki,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Pi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",Ti,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Di,[(0,o.eW)(" انبار جدید با نام "+(0,s.v_)(n.forms.location.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",Ni,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",Qi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",$i,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.CE)("div",Ri,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.value=t,type:"text",id:t,class:(0,s.C4)([[e.error?"text-red-900 border-red-500 focus:border-red-500":"text-gray-900 focus:border-green-500 border-gray-300"],"block px-2.5 pb-2.5 pt-4 w-full text-sm bg-transparent rounded-lg border-1 appearance-none focus:outline-none focus:ring-0 peer"]),placeholder:""},null,10,Bi),[[r.Jo,e.value]]),(0,o.Lk)("label",{for:t,class:(0,s.C4)([[e.error?"peer-focus:text-red-500 text-red-500":"peer-focus:text-green-500 text-gray-500"],"absolute text-sm dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1"])},(0,s.v_)(e.name),11,Oi)])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(d,{type:"confirm"},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Ui,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,t)=>((0,o.uX)(),(0,o.CE)("p",null,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.Lk)("button",{"data-modal-hide":"popup-modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>i.addNewAnbar&&i.addNewAnbar(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 rounded-lg dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"},"درسته")])]),_:1})])]),_:1})}var Zi={name:"addNewAnbar",components:{Card:ae,Alert:Le,modal:ye},data(){return{forms:{location:{type:"input",name:"محل انبار",title:"محل انبار",data:"",value:""},username:{type:"input",name:"نام کاربر",title:"نام کاربر",data:"",value:""}},success:!1,error:!1,errors:[]}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{async addNewAnbar(){const e={location:this.forms.location.value,username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addNewAnbar/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const ji=(0,d.A)(Zi,[["render",zi]]);var Hi=ji;const Gi={class:"flex flex-col items-center mt-5 gap-4"},Vi={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},qi={class:"mt-1.5 list-disc list-inside"},Ji={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Yi={class:"font-medium"},ed={key:0},td={key:1},ad={key:2},rd=["onClick"],od={class:"flex flex-col gap-2 font-bold"},sd={key:0},ld={key:1},nd={key:2};function id(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal"),m=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(m,{title:"اضافه کردن واحد جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",Gi,[l.error?((0,o.uX)(),(0,o.CE)("div",Vi,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",qi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Ji,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",Yi,[(0,o.eW)(" واحد جدید با نام "+(0,s.v_)(l.forms.unit_name.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",ed,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",td,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",ad,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,rd)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",od,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",sd,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",ld,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",nd,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.addNewUnit},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var dd={name:"addNewUnit",components:{ModalButton:Ye,Dropdown:Ge,Input:Be,Card:ae,Alert:Le,modal:ye},data(){return{forms:{supplier_name:{type:"dropdown",name:"فروشنده",title:"فروشنده",data:"",value:""},material_type:{type:"dropdown",name:"جنس ماده جدید",title:"جنس ماده جدید",data:"",value:""},unit_name:{type:"input",name:"نام واحد",title:"نام واحد",value:""},count:{type:"input",name:"مفدار",title:"مفدار",value:"",lable:"number"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[]}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},mounted(){(0,G.Tp)(),this.axios.get("/myapp/api/getSupplierNames").then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]})},methods:{clicked(e,t){if(console.log(e,t),"supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;const e={supplier_name:this.forms.supplier_name.value};this.axios.get("/myapp/api/getMaterialTypes",{params:e}).then(e=>{console.log(e.data),this.forms.material_type.data=e.data["material_types"]})}"material_type"==e&&(this.forms.material_type.name=t,this.forms.material_type.value=t)},async addNewUnit(){const e={supplier_name:this.forms.supplier_name.value,material_type:this.forms.material_type.value,unit_name:this.forms.unit_name.value,count:parseInt(this.forms.count.value.replace(/,/g,"")),username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?(this.forms[t].error=!0,this.errors.push({status:"error",message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addUnit/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const ud=(0,d.A)(dd,[["render",id]]);var cd=ud;const md={class:"flex flex-col gap-2 justify-center items-center"},hd={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},pd={class:"mt-1.5 list-disc list-inside"},gd={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},fd={class:"font-medium"},yd={key:0},kd={key:1},bd={key:2},xd=["onClick"],vd={class:"flex flex-col gap-2 font-bold"};function wd(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal"),m=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(m,{title:"افزودن نوع جنس"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",md,[l.error?((0,o.uX)(),(0,o.CE)("div",hd,[t[2]||(t[2]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[3]||(t[3]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[1]||(t[1]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",pd,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",gd,[t[4]||(t[4]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),(0,o.Lk)("div",null,[(0,o.Lk)("span",fd,[(0,o.eW)(" جنس ماده جدید با نام "+(0,s.v_)(l.forms.matrial_type.value)+" با موفقیت به سیستم اضافه شد. ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["reel_numbers"==t?((0,o.uX)(),(0,o.CE)("p",yd,"شماره رول:")):(0,o.Q3)("",!0),"reel_numbers"==t?((0,o.uX)(),(0,o.CE)("ul",kd,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,s.v_)(e),1))),128))])):((0,o.uX)(),(0,o.CE)("p",bd,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))],64))),256))])])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,xd)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)("اضافه کردن",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",vd,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,t)=>((0,o.uX)(),(0,o.CE)("p",null,(0,s.v_)(e.title)+": "+(0,s.v_)(e.value),1))),256))])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.addNewMatrialType},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var _d={name:"addNewMatrialType",components:{ModalButton:Ye,Dropdown:Ge,Input:Be,Card:ae,Alert:Le,modal:ye},data(){return{forms:{supplier_name:{type:"dropdown",name:"فروشنده",title:"فروشنده",data:"",value:"",label:"text"},matrial_type:{type:"input",name:"نوع متریال جدید",title:"نوع متریال جدید",value:"",label:"text"},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:"",label:"text"}},success:!1,error:!1,errors:[]}},mounted(){(0,G.Tp)(),this.getSupplierName()},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{getSupplierName(){this.axios.get("/myapp/api/getSupplierNames").then(e=>{this.forms.supplier_name.data=e.data["supplier_names"]})},clicked(e,t){console.log(e,t),"supplier_name"==e&&(this.forms.supplier_name.name=t,this.forms.supplier_name.value=t)},async addNewMatrialType(){const e={supplier_name:this.forms.supplier_name.value,material_type:this.forms.matrial_type.value,username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addMaterialType/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const Cd=(0,d.A)(_d,[["render",wd]]);var Ld=Cd;const Ed={class:"flex flex-col items-center mt-5 gap-4"},Xd={key:0,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},Sd={class:"mt-1.5 list-disc list-inside"},Ad={key:1,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},Fd=["onClick"],Md={key:3,class:"flex flex-col gap-2 font-bold max-w-full relative overflow-x-auto shadow-md sm:rounded-lg"},Wd={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},Id={class:"truncate bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-green-50 dark:hover:bg-gray-600"},Kd={class:"px-6 py-4"},Pd={class:"px-6 py-4 text-right"},Td=["onClick"],Dd={class:"flex flex-col gap-2 font-bold max-w-xs"},Nd={class:"flex flex-col gap-2 font-bold max-w-full relative overflow-x-auto shadow-md sm:rounded-lg"},Qd={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},$d={class:"truncate bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-green-50 dark:hover:bg-gray-600"},Rd={class:"px-2 py-1"},Bd={class:"px-2 py-1 text-right"},Od=["onClick"],Ud={class:"flex flex-col gap-2 font-bold"};function zd(e,t,a,r,l,n){const i=(0,o.g2)("Input"),d=(0,o.g2)("Dropdown"),u=(0,o.g2)("ModalButton"),c=(0,o.g2)("modal"),m=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(m,{title:"اضافه کردن پروفایل مصرف جدید"},{default:(0,o.k6)(()=>[(0,o.Lk)("form",Ed,[l.error?((0,o.uX)(),(0,o.CE)("div",Xd,[t[3]||(t[3]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[4]||(t[4]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[2]||(t[2]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",Sd,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),l.success?((0,o.uX)(),(0,o.CE)("div",Ad,[...t[5]||(t[5]=[(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1),(0,o.Lk)("div",null,[(0,o.Lk)("span",{class:"font-medium"}," لیست پروفایل مصرف با موفقیت به سیستم اضافه شد. ")],-1)])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(i,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,onInputError:t[0]||(t[0]=e=>l.error=e)},null,8,["formName","label","type","disabled","onUpdate"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(d,{key:1,formName:a},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,Fd)]))),128))]),_:2},1032,["formName"])):(0,o.Q3)("",!0),"btn"==e.type?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[1]||(t[1]=(...e)=>n.add&&n.add(...e)),class:"w-44 block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," اضافه کردن به پروفایل ")):(0,o.Q3)("",!0),"list"==e.type?((0,o.uX)(),(0,o.CE)("div",Md,[(0,o.Lk)("table",Wd,[t[6]||(t[6]=(0,o.Lk)("thead",{class:"truncate text-md text-gray-100 uppercase bg-green-500 dark:bg-gray-700 dark:text-gray-400"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," اسم فروشنده "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," اسم ماده "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," واحد "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," مقدار "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"},[(0,o.Lk)("span",{class:"sr-only"},"حذف")])])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms.consumption_list.value,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",Id,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,e=>((0,o.uX)(),(0,o.CE)("td",Kd,(0,s.v_)(e),1))),256)),(0,o.Lk)("td",Pd,[(0,o.Lk)("button",{onClick:e=>n.remove(t),type:"button",class:"font-medium text-blue-600 dark:text-blue-500"},"حدف",8,Td)])]))),256))])])])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(c,{type:"confirm",disabled:l.error},{button:(0,o.k6)(()=>[...t[7]||(t[7]=[(0,o.eW)("اضافه کردن",-1)])]),table:(0,o.k6)(()=>[(0,o.Lk)("div",Dd,[(0,o.Lk)("div",Nd,[(0,o.Lk)("table",Qd,[t[8]||(t[8]=(0,o.Lk)("thead",{class:"truncate text-md text-gray-100 uppercase bg-green-500 dark:bg-gray-700 dark:text-gray-400"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col",class:"px-2 py-1"}," اسم فروشنده "),(0,o.Lk)("th",{scope:"col",class:"px-2 py-1"}," اسم ماده "),(0,o.Lk)("th",{scope:"col",class:"px-2 py-1"}," واحد "),(0,o.Lk)("th",{scope:"col",class:"px-2 py-1"}," مقدار "),(0,o.Lk)("th",{scope:"col",class:"px-2 py-1"},[(0,o.Lk)("span",{class:"sr-only"},"حذف")])])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms.consumption_list.value,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",$d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,e=>((0,o.uX)(),(0,o.CE)("td",Rd,(0,s.v_)(e),1))),256)),(0,o.Lk)("td",Bd,[(0,o.Lk)("button",{onClick:e=>n.remove(t),type:"button",class:"font-medium text-blue-600 dark:text-blue-500"},"حدف",8,Od)])]))),256))])])])])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Ud,[(0,o.Lk)("p",null,(0,s.v_)(l.forms.profile_name.title)+": "+(0,s.v_)(l.forms.profile_name.value),1),(0,o.Lk)("p",null,(0,s.v_)(l.forms.username.title)+": "+(0,s.v_)(l.forms.username.value),1)])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(u,{onClose:n.consumptionProfile},null,8,["onClose"])])]),_:1},8,["disabled"])])]),_:1})}var Zd={name:"consumptionProfile",components:{ModalButton:Ye,Dropdown:Ge,Input:Be,Card:ae,Alert:Le,modal:ye},data(){return{forms:{supplier_name:{type:"dropdown",name:"اسم فروشنده",title:"اسم فروشنده",data:"",value:""},material_name:{type:"dropdown",name:"اسم ماده",title:"اسم ماده",data:"",value:""},unit:{type:"dropdown",name:"واحد",title:"واحد",data:"",value:""},quantity:{type:"input",name:"مقدار",title:"مقدار",data:"",value:"",lable:"number"},btn:{type:"btn"},consumption_list:{type:"list",name:"لیست مصرف",title:"لیست مصرف",value:[]},profile_name:{type:"input",name:"اسم پروفایل",title:"اسم پروفایل",value:""},username:{type:"input",name:"نام کاربر",title:"نام کاربر",value:""}},success:!1,error:!1,errors:[]}},mounted(){(0,G.Tp)(),this.axios.get("/myapp/api/getSupplierNames").then(e=>{console.log(e.data),this.forms.supplier_name.data=e.data["supplier_names"]})},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}},methods:{add(){const e={supplier_name:this.forms.supplier_name.value,material_name:this.forms.material_name.value,unit:this.forms.unit.value,quantity:this.forms.quantity.value};this.forms.consumption_list.value.length<=9&&this.forms.consumption_list.value.push(e)},remove(e){this.forms.consumption_list.value.splice(e,1)},clicked(e,t){if(console.log(e,t),"supplier_name"==e){this.forms.supplier_name.name=t,this.forms.supplier_name.value=t;const e={supplier_name:this.forms.supplier_name.value};this.axios.get("/myapp/api/getMaterialNames",{params:e}).then(e=>{console.log(e.data),this.forms.material_name.data=e.data["material_names"]}),this.axios.get("/myapp/api/getUnitNamesBasedOnSupplier",{params:e}).then(e=>{console.log(e.data),this.forms.unit.data=e.data["unit_names"]})}"material_name"==e&&(this.forms.material_name.name=t,this.forms.material_name.value=t),"unit"==e&&(this.forms.unit.name=t,this.forms.unit.value=t)},async consumptionProfile(){const e={supplier_name:this.forms.supplier_name.value,material_name:this.forms.material_name.value,unit:this.forms.unit.value,quantity:this.forms.quantity.value,consumption_list:JSON.stringify(this.forms.consumption_list.value),profile_name:this.forms.profile_name.value,username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"comment"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/addConsumptionProfile/",{},{params:e});console.log(t.data),"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}}};const jd=(0,d.A)(Zd,[["render",zd]]);var Hd=jd;const Gd={class:"flex flex-row justify-center"},Vd={class:"rounded-lg bg-white shadow-lg max-w-sm"},qd={class:"flex rounded-lg border-4 border-black shadow"},Jd={class:"flex flex-none flex-col items-center px-2 justify-center sm:justify-start sm:px-4 border-e-4 border-black font-bold"},Yd={class:"place-self-center sm:text-4xl"},eu={class:"flex-grow flex flex-row px-2 gap-2 sm:gap-4 justify-center items-center sm:p-4 font-mono text-4xl sm:text-5xl font-bold"},tu={class:"flex flex-none flex-col items-end justify-between px-1 py-1 bg-blue-700 border-s-4 border-black font-bold sm:text-sm text-white"},au={class:"flex flex-col items-end"},ru={class:"flex flex-col items-center mt-5 gap-4"},ou={class:"flex space-x-2 rtl:space-x-reverse"},su=["placeholder"],lu=["placeholder"],nu={id:"letterdropdown",class:"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-14 dark:bg-gray-700"},iu={class:"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":"letterButtonButton"},du=["onClick"],uu=["placeholder"],cu={key:0,class:"mt-2 flex flex-row items-center gap-1"},mu={key:1,class:"flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},hu={class:"mt-1.5 list-disc list-inside"},pu={key:2,class:"flex p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},gu=["onClick"],fu=["id"],yu={key:3,class:"flex flex-col gap-2 font-bold max-w-full relative overflow-x-auto shadow-md sm:rounded-lg"},ku={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},bu={class:"truncate bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-green-50 dark:hover:bg-gray-600"},xu={class:"px-6 py-4 text-right"},vu={class:"flex items-center rounded"},wu=["onClick","id"],_u=["id"],Cu={key:0,class:"px-6 py-4"},Lu={class:"flex flex-col gap-2 font-bold"},Eu={class:"mt-2 flex flex-row items-center gap-1"},Xu={key:0};function Su(e,t,a,l,n,i){const d=(0,o.g2)("h"),u=(0,o.g2)("lic_numer"),c=(0,o.g2)("Input"),m=(0,o.g2)("Dropdown"),h=(0,o.g2)("modal"),p=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(p,{title:"برسی و اضافه کردن کامیون"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Gd,[(0,o.Lk)("div",Vd,[(0,o.Lk)("div",qd,[(0,o.Lk)("label",Jd,[t[6]||(t[6]=(0,o.eW)(" ایران ",-1)),(0,o.Lk)("p",Yd,(0,s.v_)(n.year.val),1)]),(0,o.Lk)("label",eu,[(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(n.second.val),1)]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(n.letter.val),1)]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(n.first.val),1)]),_:1})]),(0,o.Lk)("label",tu,[t[9]||(t[9]=(0,o.Lk)("img",{src:b,class:"h-5"},null,-1)),(0,o.Lk)("span",au,[(0,o.bF)(d,null,{default:(0,o.k6)(()=>[...t[7]||(t[7]=[(0,o.eW)("IR",-1)])]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[...t[8]||(t[8]=[(0,o.eW)("IRAN",-1)])]),_:1})])])])])]),(0,o.Lk)("form",ru,[(0,o.Lk)("div",ou,[(0,o.Lk)("div",null,[t[10]||(t[10]=(0,o.Lk)("label",{for:"code-1",class:"sr-only"},"First code",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.year.val=e),placeholder:n.year.val,type:"text",maxlength:"2","data-focus-input-init":"","data-focus-input-next":"code-2",id:"code-1",class:(0,s.C4)([[n.year.error?"appearance-none bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-12 h-9 py-3 text-sm font-extrabold text-center"]),required:""},null,10,su),[[r.Jo,n.year.val]])]),(0,o.Lk)("div",null,[t[11]||(t[11]=(0,o.Lk)("label",{for:"code-3",class:"sr-only"},"Third code",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.second.val=e),placeholder:n.second.val,type:"text",maxlength:"3","data-focus-input-init":"","data-focus-input-prev":"code-2","data-focus-input-next":"code-4",id:"code-3",class:(0,s.C4)([[n.second.error?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-14 h-9 py-3 text-sm font-extrabold text-center"]),required:""},null,10,lu),[[r.Jo,n.second.val]])]),(0,o.Lk)("button",{id:"letterButton","data-dropdown-toggle":"letterdropdown",class:(0,s.C4)([[n.letter.error?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-9 h-9 text-sm font-extrabold rounded-lg"]),type:"button"},(0,s.v_)(n.letter.val),3),(0,o.Lk)("div",nu,[(0,o.Lk)("ul",iu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.letter.alphabets,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked("letter",e),type:"button",class:"block text-center px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,du)]))),256))])]),(0,o.Lk)("div",null,[t[12]||(t[12]=(0,o.Lk)("label",{for:"code-4",class:"sr-only"},"Fourth code",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.first.val=e),placeholder:n.first.val,type:"text",maxlength:"2","data-focus-input-init":"","data-focus-input-prev":"code-3","data-focus-input-next":"code-5",id:"code-4",class:(0,s.C4)([[n.first.error?"bg-red-50 border border-red-500 text-red-900 placeholder-red-700 text-sm rounded-lg focus:ring-red-500 dark:bg-gray-700 focus:border-red-500 dark:text-red-500 dark:placeholder-red-500 dark:border-red-500":"text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"],"block w-12 h-9 py-3 text-sm font-extrabold text-center"]),required:""},null,10,uu),[[r.Jo,n.first.val]])])]),n.isExists?((0,o.uX)(),(0,o.CE)("div",cu,[t[13]||(t[13]=(0,o.Lk)("p",{class:"text-red-600"},"درحال حاضر پلاک ",-1)),(0,o.bF)(u,{lic:{first:this.first.val,letter:this.letter.val,second:this.second.val,country:"ایران",year:this.year.val}},null,8,["lic"]),t[14]||(t[14]=(0,o.Lk)("p",{class:"text-red-600"}," در سیستم وجود دارد.",-1))])):(0,o.Q3)("",!0),t[22]||(t[22]=(0,o.Lk)("p",{id:"helper-text-explanation",class:"text-sm text-gray-500 dark:text-gray-400"},"لطفا پلاک مورد نطر را وارد کرده و سپس بر روی دکمه چک کردن کلیک کنید.",-1)),n.error?((0,o.uX)(),(0,o.CE)("div",mu,[t[16]||(t[16]=(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),t[17]||(t[17]=(0,o.Lk)("span",{class:"sr-only"},"Danger",-1)),(0,o.Lk)("div",null,[t[15]||(t[15]=(0,o.Lk)("span",{class:"font-medium"},"خطا! لطفا اطلاعات را برسی کنید:",-1)),(0,o.Lk)("ul",hu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,e=>((0,o.uX)(),(0,o.CE)("li",null,(0,s.v_)(e.message),1))),256))])])])):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("div",pu,[...t[18]||(t[18]=[(0,o.Lk)("div",null,[(0,o.Lk)("div",{class:"mt-2 flex flex-row items-center gap-1"},[(0,o.Lk)("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,o.Lk)("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})]),(0,o.Lk)("p",{class:"font-medium"},"بارنامه با موفقیت کنسل شد")])],-1)])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["input"==e.type?((0,o.uX)(),(0,o.Wv)(c,{key:0,formName:a,label:e.name,type:e.lable,disabled:e.disabled,onUpdate:t=>e.value=t,value:e.value,onInputError:t[3]||(t[3]=e=>n.error=e)},null,8,["formName","label","type","disabled","onUpdate","value"])):(0,o.Q3)("",!0),"dropdown"==e.type?((0,o.uX)(),(0,o.Wv)(m,{key:1,formName:a,btnclass:["Outgoing"==n.forms.shipment_list.value.shipment_type&&n.forms.shipment_list.value.unload_location?"":"hidden"]},{btnName:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),list:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e),9,gu)]))),128))]),_:2},1032,["formName","btnclass"])):(0,o.Q3)("",!0),"btn"==e.type?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>i.load_shipments&&i.load_shipments(...e)),id:a+"Button",class:"w-44 block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},(0,s.v_)(e.name),9,fu)):(0,o.Q3)("",!0),"list"==e.type?((0,o.uX)(),(0,o.CE)("div",yu,[(0,o.Lk)("table",ku,[t[19]||(t[19]=(0,o.Lk)("thead",{class:"truncate text-md text-gray-100 uppercase bg-green-500 dark:bg-gray-700 dark:text-gray-400"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col",class:"px-3 py-3"},[(0,o.Lk)("span",{class:"sr-only"},"افزودن")]),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," تاریخ "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," فروشنده "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," مشتری "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," وزن خالص "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," نوع بارنامه "),(0,o.Lk)("th",{scope:"col",class:"px-6 py-3"}," محل تخلیه/بار شده ")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms.shipment_list.data,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",bu,[(0,o.Lk)("td",xu,[(0,o.Lk)("div",vu,[(0,o.Lk)("input",{onClick:t=>i.select(e),id:"bordered-radio-"+t,type:"radio",value:"",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,wu),(0,o.Lk)("label",{id:"bordered-radio-"+t,class:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},null,8,_u)])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=t?((0,o.uX)(),(0,o.CE)("td",Cu,(0,s.v_)(e),1)):(0,o.Q3)("",!0)],64))),256))]))),256))])])])):(0,o.Q3)("",!0)],64))),256)),(0,o.bF)(h,{type:"confirm",disabled:n.error},{button:(0,o.k6)(()=>[...t[20]||(t[20]=[(0,o.eW)("لغو بارنامه",-1)])]),text:(0,o.k6)(()=>[(0,o.Lk)("div",Lu,[(0,o.Lk)("div",Eu,[t[21]||(t[21]=(0,o.Lk)("p",null,"پلاک :",-1)),(0,o.bF)(u,{lic:{first:this.first.val,letter:this.letter.val,second:this.second.val,country:"ایران",year:this.year.val}},null,8,["lic"])]),n.forms.unloading_location.value?((0,o.uX)(),(0,o.CE)("p",Xu,(0,s.v_)(n.forms.unloading_location.title)+": "+(0,s.v_)(n.forms.unloading_location.value),1)):(0,o.Q3)("",!0),(0,o.Lk)("p",null,(0,s.v_)(n.forms.reason.title)+": "+(0,s.v_)(n.forms.reason.value),1),(0,o.Lk)("p",null,(0,s.v_)(n.forms.username.title)+": "+(0,s.v_)(n.forms.username.value),1)])]),btns:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.Lk)("button",{"data-modal-hide":"popup-modal","aria-label":"Close",onClick:t[5]||(t[5]=(...e)=>i.cancel&&i.cancel(...e)),type:"button",class:"inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 rounded-lg dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"},"درسته")])]),_:1},8,["disabled"])])]),_:1})}var Au={name:"addTruck",components:{Dropdown:Ge,Input:Be,Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{first:{val:12,error:!1},letter:{val:"ب",error:!1,alphabets:["الف","ب","پ","ت","ث","ج","چ","ح","خ","د","ذ","ر","ز","ژ","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ک","گ","ل","م","ن","و","ه","ی"]},second:{val:365,error:!1},year:{val:11,error:!1},isExists:!1,form:!0,driver_name:"",driver_doc:"",phone:0,username:"",forms:{load:{type:"btn",name:"چک کردن",title:"چک کردن"},shipment_list:{type:"list",name:"لیست بارنامه",title:"لیست بارنامه",value:[]},unloading_location:{type:"dropdown",name:"محل تخلیه",title:"محل تخلیه",data:"",value:""},reason:{type:"input",name:"علت لغو",title:"علت لغو",data:"",value:""},username:{type:"input",name:"نام کاربر",title:"نام کاربر",data:"",value:""}},success:!1,error:!1,errors:[]}},mounted(){this.axios.get("/myapp/api/getAnbarTableNames").then(e=>{this.forms.unloading_location.data=e.data["data"]})},methods:{select(e){this.forms.shipment_list.value=e},clicked(e,t){"letter"==e&&(this.letter.val=t),"unloading_location"==e&&(this.forms.unloading_location.name=t,this.forms.unloading_location.value=t)},async load_shipments(){const e={license_number:this.first.val+this.letter.val+this.second.val+"ایران"+this.year.val},t=await this.axios.post("/myapp/api/loadShipmentsBaesdLicenseNumberForCanceling",{},{params:e});this.isExists=JSON.parse(t.data["isExists"]),this.isExists||(this.forms.shipment_list.data=JSON.parse(t.data["shipment_list"]))},async cancel(){const e={license_number:this.first.val+this.letter.val+this.second.val+"ایران"+this.year.val,shipment:JSON.stringify(this.forms.shipment_list.value),unloading_location:this.forms.unloading_location.value,reason:this.forms.reason.value,username:this.forms.username.value};this.errors=[];for(const t in this.forms)""==this.forms[t].value?"Outgoing"==this.forms.shipment_list.value.shipment_type?"load"!=t&&(null==this.forms.shipment_list.value["unload_location"]||(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`}))):"unloading_location"!=t&&(this.forms[t].error=!0,this.errors.push({message:`${this.forms[t].name} مورد نیاز است`})):this.forms[t].error=!1;if(0==this.errors.length){this.error=!1;const t=await this.axios.post("/myapp/cancel/",{},{params:e});"success"==t.data["status"]?this.success=!0:(this.error=!0,this.errors=t.data["errors"])}else this.error=!0}},watch:{success(e,t){1==e&&setTimeout(()=>{this.success=!1,location.reload()},5e3)}}};const Fu=(0,d.A)(Au,[["render",Su]]);var Mu=Fu;a(8992),a(4520);const Wu={class:"container relative w-screen p-5"},Iu={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},Ku={class:"flex flex-row items-center gap-2"},Pu={class:"mt-5 flex flex-col items-center gap-4"},Tu={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[500px] sm:rounded-lg"},Du=["id"],Nu={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},Qu={class:"flex flex-row items-center gap-2"},$u=["onClick"],Ru=["onClick"],Bu=["id","data-dropdown-toggle"],Ou=["id"],Uu=["aria-labelledby"],zu=["onClick"],Zu=["onUpdate:modelValue","onInput"],ju={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},Hu=["onClick"],Gu={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},Vu={key:0,class:"w-4 p-4"};function qu(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Wu,[(0,o.Lk)("div",Iu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("p",Ku,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.eW)(" "+(0,s.v_)(i.formattedTime),1)]),(0,o.Lk)("form",Pu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",Tu,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",Nu,[(0,o.Lk)("div",Qu,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,$u),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,Ru),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[1]||(t[1]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,Bu),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,zu)]))),256))],8,Uu)],8,Ou),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,Zu),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",ju,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,Hu)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",Gu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",Vu,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,Du)]))),256))])])}a(1454),a(7550),a(4603),a(7566),a(8721);var Ju=a(1749),Yu=a(2125),ec=a.n(Yu),tc={name:"reportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{shipments:{type:"input",title:"لیست بارنامه",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""},sales:{type:"input",title:"لیست فروش",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""},purchases:{type:"input",title:"لیست خرید",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""},rawMaterial:{type:"input",title:"لیست مواد اولیه",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""},products:{type:"input",title:"لیست محصولات",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""},consumption:{type:"input",title:"لیست مصرف",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""},alerts:{type:"input",title:"هشدار ها",filter:"فیلتر",data:[],value:"",fields:["date","status","message"],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_shipment("year"),this.report_Products("year"),this.report_Sales("year"),this.report_Purchases("year"),this.report_Consumption("year"),this.report_RawMaterial("year"),this.report_alerts("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){window.location.reload()},countdown(){this.totalSeconds>0?this.totalSeconds-=1:window.location.reload()},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"shipments"==e&&(this.forms.shipments.filter=t.lable,this.report_shipment(t.value)),"sales"==e&&(this.forms.sales.filter=t.lable,this.report_Sales(t.value)),"purchases"==e&&(this.forms.purchases.filter=t.lable,this.report_Purchases(t.value)),"rawMaterial"==e&&(this.forms.rawMaterial.filter=t.lable,this.report_RawMaterial(t.value)),"products"==e&&(this.forms.products.filter=t.lable,this.report_Products(t.value)),"consumption"==e&&(this.forms.consumption.filter=t.lable,this.report_Consumption(t.value)),"alerts"==e&&(this.forms.alerts.filter=t.lable,this.report_alerts(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_Sales(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportSales",{},{params:t});console.log(a.data),this.forms["sales"].data=a.data["values"],this.forms["sales"].CopyData=a.data["values"],this.forms["sales"].fields=a.data["fields"]}catch(t){console.error("Error fetching sales report:",t),this.forms["sales"].data=[],this.forms["sales"].CopyData=[]}},async report_Purchases(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportPurchases",{},{params:t});console.log(a.data),this.forms["purchases"].data=a.data["values"],this.forms["purchases"].CopyData=a.data["values"],this.forms["purchases"].fields=a.data["fields"]}catch(t){console.error("Error fetching purchases report:",t),this.forms["purchases"].data=[],this.forms["purchases"].CopyData=[]}},async report_RawMaterial(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportRawMaterial",{},{params:t});console.log(a.data),this.forms["rawMaterial"].data=a.data["values"],this.forms["rawMaterial"].CopyData=a.data["values"],this.forms["rawMaterial"].fields=a.data["fields"]}catch(t){console.error("Error fetching raw material report:",t),this.forms["rawMaterial"].data=[],this.forms["rawMaterial"].CopyData=[]}},async report_Products(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportProducts",{},{params:t});console.log(a.data),this.forms["products"].data=a.data["values"],this.forms["products"].CopyData=a.data["values"],this.forms["products"].fields=a.data["fields"]}catch(t){console.error("Error fetching products report:",t),this.forms["products"].data=[],this.forms["products"].CopyData=[]}},async report_Consumption(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportConsumption",{},{params:t});this.forms["consumption"].data=a.data["values"],this.forms["consumption"].CopyData=a.data["values"],this.forms["consumption"].fields=a.data["fields"]}catch(t){console.error("Error fetching consumption report:",t),this.forms["consumption"].data=[],this.forms["consumption"].CopyData=[]}},async report_shipment(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportShipment",{},{params:t});this.forms["shipments"].data=a.data["values"],this.forms["shipments"].CopyData=a.data["values"],this.forms["shipments"].fields=a.data["fields"]}catch(t){console.error("Error fetching shipment report:",t),this.forms["shipments"].data=[],this.forms["shipments"].CopyData=[]}},async report_alerts(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportAlert",{},{params:t});console.log(a.data),this.forms["alerts"].data=a.data["values"],this.forms["alerts"].CopyData=a.data["values"],this.forms["alerts"].fields=a.data["fields"],console.log(this.forms.alerts)}catch(t){console.error("Error fetching alerts report:",t),this.forms["alerts"].data=[],this.forms["alerts"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const ac=(0,d.A)(tc,[["render",qu]]);var rc=ac;const oc={class:"w-full"},sc={class:"flex flex-col gap-4 items-center justify-center p-4"},lc={class:"w-full"},nc=["value"],ic=["disabled"];function dc(e,t,a,l,n,i){const d=(0,o.g2)("router-link"),u=(0,o.g2)("Card");return(0,o.uX)(),(0,o.CE)("div",oc,[(0,o.bF)(u,{title:"انتخاب گزارش"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",sc,[(0,o.Lk)("div",lc,[t[3]||(t[3]=(0,o.Lk)("label",{for:"report-select",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," انتخاب نوع گزارش ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"report-select","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedReport=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-500 dark:focus:border-green-500"},[t[2]||(t[2]=(0,o.Lk)("option",{value:"",disabled:"",selected:""},"یک گزارش را انتخاب کنید",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.reports,e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value},(0,s.v_)(e.name),9,nc))),128))],512),[[r.u1,n.selectedReport]])]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.displayReport&&i.displayReport(...e)),disabled:!n.selectedReport,type:"button",class:"w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," نمایش گزارش ",8,ic),(0,o.bF)(d,{to:"/myapp/",type:"button",class:"w-44 block text-white bg-gray-500 hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[4]||(t[4]=[(0,o.eW)(" بازگشت ",-1)])]),_:1})])]),_:1})])}var uc={name:"chooseReport",components:{Card:ae},data(){return{selectedReport:"",reports:[{name:"گزارش بارنامه",value:"shipment"},{name:"گزارش فروش",value:"sales"},{name:"گزارش خرید",value:"purchases"},{name:"گزارش محصولات",value:"products"},{name:"گزارش مواد اولیه",value:"rawMaterial"},{name:"گزارش مصرف",value:"consumption"},{name:"گزارش هشدارها",value:"alerts"}]}},methods:{displayReport(){this.selectedReport&&this.$router.push(`/myapp/${this.selectedReport}Report/`)}}};const cc=(0,d.A)(uc,[["render",dc],["__scopeId","data-v-245221c5"]]);var mc=cc;const hc={class:"relative w-full p-5"},pc={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},gc={class:"flex flex-row justify-between gap-2 mb-4"},fc={class:"flex flex-row items-center gap-2"},yc={class:"mt-5 flex flex-col items-center gap-4"},kc={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},bc=["id"],xc={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},vc={class:"flex flex-row items-center gap-2"},wc=["onClick"],_c=["onClick"],Cc=["id","data-dropdown-toggle"],Lc=["id"],Ec=["aria-labelledby"],Xc=["onClick"],Sc=["onUpdate:modelValue","onInput"],Ac={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},Fc=["onClick"],Mc={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},Wc={key:0,class:"w-4 p-4"};function Ic(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",hc,[(0,o.Lk)("div",pc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",gc,[(0,o.Lk)("div",fc,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",yc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",kc,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",xc,[(0,o.Lk)("div",vc,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,wc),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,_c),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,Cc),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,Xc)]))),256))],8,Ec)],8,Lc),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,Sc),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",Ac,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,Fc)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",Mc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",Wc,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,bc)]))),256))])])}a(2577);var Kc={name:"productsReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{products:{type:"input",title:"لیست محصولات",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_Products("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.products.filter)||this.filters[0];this.report_Products(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.products.filter),t=e?e.value:"year";this.report_Products(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"products"==e&&(this.forms.products.filter=t.lable,this.report_Products(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_Products(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportProducts",{},{params:t});console.log(a.data),this.forms["products"].data=a.data["values"],this.forms["products"].CopyData=a.data["values"],this.forms["products"].fields=a.data["fields"]}catch(t){console.error("Error fetching products report:",t),this.forms["products"].data=[],this.forms["products"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const Pc=(0,d.A)(Kc,[["render",Ic]]);var Tc=Pc;const Dc={class:"relative w-full p-5"},Nc={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},Qc={class:"flex flex-row justify-between gap-2 mb-4"},$c={class:"flex flex-row items-center gap-2"},Rc={class:"mt-5 flex flex-col items-center gap-4"},Bc={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},Oc=["id"],Uc={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},zc={class:"flex flex-row items-center gap-2"},Zc=["onClick"],jc=["onClick"],Hc=["id","data-dropdown-toggle"],Gc=["id"],Vc=["aria-labelledby"],qc=["onClick"],Jc=["onUpdate:modelValue","onInput"],Yc={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},em=["onClick"],tm={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},am={key:0,class:"w-4 p-4"};function rm(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Dc,[(0,o.Lk)("div",Nc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",Qc,[(0,o.Lk)("div",$c,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",Rc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",Bc,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",Uc,[(0,o.Lk)("div",zc,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,Zc),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,jc),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,Hc),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,qc)]))),256))],8,Vc)],8,Gc),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,Jc),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",Yc,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,em)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",tm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",am,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,Oc)]))),256))])])}var om={name:"shipmentReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{shipments:{type:"input",title:"لیست بارنامه",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_shipment("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.shipments.filter)||this.filters[0];this.report_shipment(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.shipments.filter),t=e?e.value:"year";this.report_shipment(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"shipments"==e&&(this.forms.shipments.filter=t.lable,this.report_shipment(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_shipment(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportShipment",{},{params:t});this.forms["shipments"].data=a.data["values"],this.forms["shipments"].CopyData=a.data["values"],this.forms["shipments"].fields=a.data["fields"]}catch(t){console.error("Error fetching shipment report:",t),this.forms["shipments"].data=[],this.forms["shipments"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const sm=(0,d.A)(om,[["render",rm]]);var lm=sm;const nm={class:"relative w-full p-5"},im={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},dm={class:"flex flex-row justify-between gap-2 mb-4"},um={class:"flex flex-row items-center gap-2"},cm={class:"mt-5 flex flex-col items-center gap-4"},mm={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},hm=["id"],pm={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},gm={class:"flex flex-row items-center gap-2"},fm=["onClick"],ym=["onClick"],km=["id","data-dropdown-toggle"],bm=["id"],xm=["aria-labelledby"],vm=["onClick"],wm=["onUpdate:modelValue","onInput"],_m={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},Cm=["onClick"],Lm={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},Em={key:0,class:"w-4 p-4"};function Xm(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",nm,[(0,o.Lk)("div",im,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",dm,[(0,o.Lk)("div",um,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",cm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",mm,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",pm,[(0,o.Lk)("div",gm,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,fm),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,ym),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,km),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,vm)]))),256))],8,xm)],8,bm),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,wm),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",_m,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,Cm)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",Lm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",Em,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,hm)]))),256))])])}var Sm={name:"salesReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{sales:{type:"input",title:"لیست فروش",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_Sales("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.sales.filter)||this.filters[0];this.report_Sales(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.sales.filter),t=e?e.value:"year";this.report_Sales(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"sales"==e&&(this.forms.sales.filter=t.lable,this.report_Sales(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_Sales(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportSales",{},{params:t});console.log(a.data),this.forms["sales"].data=a.data["values"],this.forms["sales"].CopyData=a.data["values"],this.forms["sales"].fields=a.data["fields"]}catch(t){console.error("Error fetching sales report:",t),this.forms["sales"].data=[],this.forms["sales"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const Am=(0,d.A)(Sm,[["render",Xm]]);var Fm=Am;const Mm={class:"relative w-full p-5"},Wm={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},Im={class:"flex flex-row justify-between gap-2 mb-4"},Km={class:"flex flex-row items-center gap-2"},Pm={class:"mt-5 flex flex-col items-center gap-4"},Tm={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},Dm=["id"],Nm={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},Qm={class:"flex flex-row items-center gap-2"},$m=["onClick"],Rm=["onClick"],Bm=["id","data-dropdown-toggle"],Om=["id"],Um=["aria-labelledby"],zm=["onClick"],Zm=["onUpdate:modelValue","onInput"],jm={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},Hm=["onClick"],Gm={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},Vm={key:0,class:"w-4 p-4"};function qm(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Mm,[(0,o.Lk)("div",Wm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",Im,[(0,o.Lk)("div",Km,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",Pm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",Tm,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",Nm,[(0,o.Lk)("div",Qm,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,$m),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,Rm),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,Bm),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,zm)]))),256))],8,Um)],8,Om),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,Zm),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",jm,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,Hm)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",Gm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",Vm,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,Dm)]))),256))])])}var Jm={name:"purchasesReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{purchases:{type:"input",title:"لیست خرید",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_Purchases("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.purchases.filter)||this.filters[0];this.report_Purchases(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.purchases.filter),t=e?e.value:"year";this.report_Purchases(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"purchases"==e&&(this.forms.purchases.filter=t.lable,this.report_Purchases(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_Purchases(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportPurchases",{},{params:t});console.log(a.data),this.forms["purchases"].data=a.data["values"],this.forms["purchases"].CopyData=a.data["values"],this.forms["purchases"].fields=a.data["fields"]}catch(t){console.error("Error fetching purchases report:",t),this.forms["purchases"].data=[],this.forms["purchases"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const Ym=(0,d.A)(Jm,[["render",qm]]);var eh=Ym;const th={class:"relative w-full p-5"},ah={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},rh={class:"flex flex-row justify-between gap-2 mb-4"},oh={class:"flex flex-row items-center gap-2"},sh={class:"mt-5 flex flex-col items-center gap-4"},lh={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},nh=["id"],ih={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},dh={class:"flex flex-row items-center gap-2"},uh=["onClick"],ch=["onClick"],mh=["id","data-dropdown-toggle"],hh=["id"],ph=["aria-labelledby"],gh=["onClick"],fh=["onUpdate:modelValue","onInput"],yh={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},kh=["onClick"],bh={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},xh={key:0,class:"w-4 p-4"};function vh(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",th,[(0,o.Lk)("div",ah,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",rh,[(0,o.Lk)("div",oh,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",sh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",lh,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",ih,[(0,o.Lk)("div",dh,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,uh),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,ch),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,mh),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,gh)]))),256))],8,ph)],8,hh),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,fh),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",yh,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,kh)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",bh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",xh,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,nh)]))),256))])])}var wh={name:"rawMaterialReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{rawMaterial:{type:"input",title:"لیست مواد اولیه",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_RawMaterial("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.rawMaterial.filter)||this.filters[0];this.report_RawMaterial(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.rawMaterial.filter),t=e?e.value:"year";this.report_RawMaterial(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"rawMaterial"==e&&(this.forms.rawMaterial.filter=t.lable,this.report_RawMaterial(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_RawMaterial(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportRawMaterial",{},{params:t});console.log(a.data),this.forms["rawMaterial"].data=a.data["values"],this.forms["rawMaterial"].CopyData=a.data["values"],this.forms["rawMaterial"].fields=a.data["fields"]}catch(t){console.error("Error fetching raw material report:",t),this.forms["rawMaterial"].data=[],this.forms["rawMaterial"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const _h=(0,d.A)(wh,[["render",vh]]);var Ch=_h;const Lh={class:"relative w-full p-5"},Eh={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},Xh={class:"flex flex-row justify-between gap-2 mb-4"},Sh={class:"flex flex-row items-center gap-2"},Ah={class:"mt-5 flex flex-col items-center gap-4"},Fh={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},Mh=["id"],Wh={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},Ih={class:"flex flex-row items-center gap-2"},Kh=["onClick"],Ph=["onClick"],Th=["id","data-dropdown-toggle"],Dh=["id"],Nh=["aria-labelledby"],Qh=["onClick"],$h=["onUpdate:modelValue","onInput"],Rh={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},Bh=["onClick"],Oh={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},Uh={key:0,class:"w-4 p-4"};function zh(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Lh,[(0,o.Lk)("div",Eh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",Xh,[(0,o.Lk)("div",Sh,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",Ah,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",Fh,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",Wh,[(0,o.Lk)("div",Ih,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,Kh),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,Ph),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,Th),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,Qh)]))),256))],8,Nh)],8,Dh),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,$h),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",Rh,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,Bh)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",Oh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",Uh,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,Mh)]))),256))])])}var Zh={name:"consumptionReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{consumption:{type:"input",title:"لیست مصرف",filter:"فیلتر",data:"",value:"",fields:[],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_Consumption("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.consumption.filter)||this.filters[0];this.report_Consumption(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.consumption.filter),t=e?e.value:"year";this.report_Consumption(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"consumption"==e&&(this.forms.consumption.filter=t.lable,this.report_Consumption(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_Consumption(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportConsumption",{},{params:t});this.forms["consumption"].data=a.data["values"],this.forms["consumption"].CopyData=a.data["values"],this.forms["consumption"].fields=a.data["fields"]}catch(t){console.error("Error fetching consumption report:",t),this.forms["consumption"].data=[],this.forms["consumption"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const jh=(0,d.A)(Zh,[["render",zh]]);var Hh=jh;const Gh={class:"relative w-full p-5"},Vh={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},qh={class:"flex flex-row justify-between gap-2 mb-4"},Jh={class:"flex flex-row items-center gap-2"},Yh={class:"mt-5 flex flex-col items-center gap-4"},ep={class:"relative h-auto w-full overflow-x-auto overflow-y-scroll shadow-md max-h-[85vh] sm:rounded-lg"},tp=["id"],ap={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},rp={class:"flex flex-row items-center gap-2"},op=["onClick"],sp=["onClick"],lp=["id","data-dropdown-toggle"],np=["id"],ip=["aria-labelledby"],dp=["onClick"],up=["onUpdate:modelValue","onInput"],cp={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},mp=["onClick"],hp={class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},pp={key:0,class:"w-4 p-4"};function gp(e,t,a,l,n,i){const d=(0,o.g2)("Alert"),u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Gh,[(0,o.Lk)("div",Vh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(d,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",qh,[(0,o.Lk)("div",Jh,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.reload&&i.reload(...e)),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," بارگیری مجدد "),(0,o.Lk)("span",null,(0,s.v_)(i.formattedTime),1)]),(0,o.bF)(u,{to:"/myapp/chooseReport/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.eW)(" ← بازگشت به انتخاب گزارش ",-1)])]),_:1})]),(0,o.Lk)("form",Yh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",ep,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",ap,[(0,o.Lk)("div",rp,["products"==a?((0,o.uX)(),(0,o.Wv)(u,{key:0,to:"/myapp/ProductsPage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64)),(0,o.Lk)("button",{onClick:e=>i.printTable(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," PDF ",8,op),(0,o.Lk)("button",{onClick:e=>i.generate_excel_report(a),class:"block w-auto rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," XLS ",8,sp),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"inline-flex w-44 items-center justify-between rounded-lg bg-green-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[2]||(t[2]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,lp),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden w-44 rounded-lg bg-white shadow divide-y divide-gray-100 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"h-auto max-h-48 overflow-y-auto py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>i.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,dp)]))),256))],8,ip)],8,np),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>n.forms[a].searchQuery=e,onInput:e=>i.filterTable(a),class:"block rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900 w-md focus:ring-primary-500 focus:border-primary-500 dark:placeholder-gray-400 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:""},null,40,up),[[r.Jo,n.forms[a].searchQuery]])])]),(0,o.Lk)("thead",cp,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>i.sortTable(a,e)},(0,s.v_)(e),9,mp)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,r)=>((0,o.uX)(),(0,o.CE)("tr",hp,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,r)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",pp,["sales"!==a&&"purchases"!==a||"total_price"!==e&&"unit_price"!==e&&"price_per_kg"!==e&&"net_weight"!==e?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64))])):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,tp)]))),256))])])}var fp={name:"alertsReportPage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{alerts:{type:"input",title:"هشدار ها",filter:"فیلتر",data:[],value:"",fields:["date","status","message"],CopyData:[],searchQuery:""}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[],totalSeconds:300,alerts:[],alertSocket:null,searchQuery:""}},computed:{formattedTime(){const e=Math.floor(this.totalSeconds/60),t=this.totalSeconds%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){(0,G.Tp)(),this.startCountdown(),this.report_alerts("year"),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log(this.forms.alerts.data),console.log(t.data),this.alerts.push({message:t.message}),this.update_alert(t.data)},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){this.forms.alerts.data.unshift(e)},async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},reload(){const e=this.filters.find(e=>e.lable===this.forms.alerts.filter)||this.filters[0];this.report_alerts(e.value),this.totalSeconds=300,console.log("Data reloaded successfully")},countdown(){if(this.totalSeconds>0)this.totalSeconds-=1;else{const e=this.filters.find(e=>e.lable===this.forms.alerts.filter),t=e?e.value:"year";this.report_alerts(t),this.totalSeconds=300}},startCountdown(){this.interval=setInterval(this.countdown,1e3)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"alerts"==e&&(this.forms.alerts.filter=t.lable,this.report_alerts(t.value))},async load_data(){const e=await this.axios.get("/myapp/api/loadReportData");console.log(e.data["data"]),this.forms=e.data["data"]},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_alerts(e){try{const t={filter:e},a=await this.axios.post("/myapp/api/reportAlert",{},{params:t});console.log(a.data),this.forms["alerts"].data=a.data["values"],this.forms["alerts"].CopyData=a.data["values"],this.forms["alerts"].fields=a.data["fields"],console.log(this.forms.alerts)}catch(t){console.error("Error fetching alerts report:",t),this.forms["alerts"].data=[],this.forms["alerts"].CopyData=[]}},sortTable(e,t){this.forms[e].data.sort((e,a)=>{if(!isNaN(e[t])&&!isNaN(a[t]))return e[t]-a[t];if("string"===typeof e[t]&&"string"===typeof a[t]){const r=e[t].toLowerCase(),o=a[t].toLowerCase();return r<o?-1:r>o?1:0}return e[t]<a[t]?-1:e[t]>a[t]?1:0})},reverseTable(e,t){this.forms[e].data=this.forms[e].data.map(e=>{const a={};for(const t in e)a[t]=e[t];return a[t]=e[t].reverse(),a})},filterTable(e){this.forms[e].searchQuery?this.forms[e].data=this.forms[e].data.filter(t=>Object.values(t).some(t=>null!==t&&void 0!==t&&t.toString().toLowerCase().includes(this.forms[e].searchQuery.toLowerCase()))):this.forms[e].data=this.forms[e].CopyData}}};const yp=(0,d.A)(fp,[["render",gp]]);var kp=yp;const bp={class:"flex flex-col gap-2 justify-center items-center"};function xp(e,t,a,r,l,n){const i=(0,o.g2)("router-link"),d=(0,o.g2)("Card");return(0,o.uX)(),(0,o.Wv)(d,{title:"All Pages"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",bp,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.routes,e=>((0,o.uX)(),(0,o.Wv)(i,{key:e.name,to:e.path,type:"button",class:"w-44 block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.name),1)]),_:2},1032,["to"]))),128))])]),_:1})}var vp={name:"AllPages",components:{Card:ae},data(){return{routes:[{path:"/myapp/addTruck/",name:"addTruck"},{path:"/myapp/addSupplier/",name:"addSupplier"},{path:"/myapp/addCustomer/",name:"addCustomer"},{path:"/myapp/addRawMaterial/",name:"addRawMaterial"},{path:"/myapp/addNewReel/",name:"addNewReel"},{path:"/myapp/addNewPM2Reel/",name:"addNewPM2Reel"},{path:"/myapp/addNewPM3Reel/",name:"addNewPM3Reel"},{path:"/myapp/addNewPM4Reel/",name:"addNewPM4Reel"},{path:"/myapp/forkliftPanel/",name:"forkliftPanel"},{path:"/myapp/addShipment/",name:"addShipment"},{path:"/myapp/createSalesOrder/",name:"createSalesOrder"},{path:"/myapp/createPurchaseOrder/",name:"createPurchaseOrder"},{path:"/myapp/weightStationPanel/",name:"weightStationPanel"},{path:"/myapp/addNewAnbar/",name:"addNewAnbar"},{path:"/myapp/addUnit/",name:"addNewUnit"},{path:"/myapp/addMaterialType/",name:"addNewMatrialType"},{path:"/myapp/addConsumptionProfile/",name:"addConsumptionProfile"},{path:"/myapp/cancel/",name:"cancel"},{path:"/myapp/report/",name:"report"},{path:"/myapp/chooseReport/",name:"chooseReport"},{path:"/myapp/ProductsPage/",name:"ProductsPage"},{path:"/myapp/InvoicePage/",name:"InvoicePage"},{path:"/myapp/FactoryMap/",name:"FactoryMap"}]}}};const wp=(0,d.A)(vp,[["render",xp]]);var _p=wp;const Cp={class:"w-screen p-5 container"},Lp={class:"flex flex-col items-center mt-5 gap-4"},Ep={class:"relative w-full h-auto max-h-[500px] overflow-y-scroll overflow-x-auto shadow-md sm:rounded-lg"},Xp=["id"],Sp={class:"p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},Ap={class:"flex flex-row gap-2 items-center"},Fp=["id","data-dropdown-toggle"],Mp=["id"],Wp=["aria-labelledby"],Ip=["onClick"],Kp={class:"text-xs text-gray-100 uppercase bg-green-500 dark:bg-gray-700 dark:text-gray-400"},Pp={key:0,scope:"col",class:"px-2 py-3"},Tp={class:"truncate bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-green-50 dark:hover:bg-gray-600"},Dp={key:0,class:"w-4 p-4"};function Np(e,t,a,r,l,n){return(0,o.uX)(),(0,o.CE)("div",Cp,[(0,o.Lk)("form",Lp,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",Ep,[(0,o.Lk)("table",{id:a,class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",Sp,[(0,o.Lk)("div",Ap,[(0,o.eW)((0,s.v_)(e.title)+" ",1),(0,o.Lk)("button",{id:a+"Button1","data-dropdown-toggle":a+"dropdown1",class:"justify-between w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[(0,o.eW)((0,s.v_)(e.filter)+" ",1),t[0]||(t[0]=(0,o.Lk)("svg",{class:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6"},[(0,o.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 4 4 4-4"})],-1))],8,Fp),(0,o.Lk)("div",{id:a+"dropdown1",class:"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700"},[(0,o.Lk)("ul",{class:"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":a+"Button1"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filters,e=>((0,o.uX)(),(0,o.CE)("li",null,[(0,o.Lk)("a",{onClick:t=>n.clicked(a,e),type:"button",class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"},(0,s.v_)(e.lable),9,Ip)]))),256))],8,Wp)],8,Mp)])]),(0,o.Lk)("thead",Kp,[(0,o.Lk)("tr",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("th",Pp,(0,s.v_)(e),1)):(0,o.Q3)("",!0)],64))),256))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,a)=>((0,o.uX)(),(0,o.CE)("tr",Tp,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,["id"!=e?((0,o.uX)(),(0,o.CE)("td",Dp,(0,s.v_)(t[e]),1)):(0,o.Q3)("",!0)],64))),256))]))),256))])],8,Xp)]))),256))])])}var Qp={name:"Products",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le},data(){return{forms:{products:{type:"input",title:"لیست محصولات",filter:"یک سال اخیر",data:"",value:"",fields:[]}},filters:[{lable:"یک سال اخیر",value:"year"},{lable:"یک ماه اخیر",value:"month"},{lable:"هفته اخیر",value:"week"},{lable:"امروز",value:"day"}],success:!1,error:!1,errors:[]}},mounted(){(0,G.Tp)(),this.report_Products("year")},methods:{async generate_excel_report(e){console.log(e);const t={model_name:e},a=await this.axios.post("/myapp/api/generateExcelReport",{},{params:t,responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=r;const s=a.headers["content-disposition"];o.setAttribute("download",s),document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log(a.data)},select(e){this.forms.shipment_list.value=e},clicked(e,t){"products"==e&&(this.forms.products.filter=t.lable,this.report_Products(t.value))},printTable(e){let t=document.getElementById(e);console.log(t),ec()(t).then(function(e){let t=e.toDataURL("image/png");console.log(t);var a=new Ju.uE("p","mm","a4"),r=210*e.height/e.width;a.addImage(t,"PNG",0,0,210,r),a.save("table.pdf")})},async report_Products(e){try{const t={filter:e},a=await this.axios.post("/myapp/ProductsPage/",{},{params:t});console.log(a.data),this.forms["products"].data=a.data["values"],this.forms["products"].fields=a.data["fields"]}catch(t){console.error("Error fetching products report:",t)}}}};const $p=(0,d.A)(Qp,[["render",Np]]);var Rp=$p;const Bp={class:"relative w-full p-5"},Op={class:"fixed top-0 right-0 left-0 z-10 flex w-full flex-col"},Up={class:"flex justify-between mb-4"},zp={class:"mt-5 flex flex-col items-center gap-4"},Zp={class:"relative h-auto w-full overflow-x-auto overflow-y-auto shadow-md max-h-[85vh] sm:rounded-lg"},jp=["id"],Hp={class:"bg-white p-5 text-left rtl:text-right text-lg font-semibold text-gray-900 dark:bg-gray-800 dark:text-white"},Gp={class:"flex flex-row items-center gap-2"},Vp={class:"bg-green-500 text-xs uppercase text-gray-100 dark:bg-gray-700 dark:text-gray-400"},qp=["onClick"],Jp={class:"p-4 text-center"},Yp=["value","checked","onChange"],eg={key:0,class:"w-4 p-4"},tg={class:"mt-4 flex flex-col items-center gap-4"},ag={class:"flex items-center gap-3"},rg=["disabled"],og={class:"text-sm text-gray-700"},sg=["disabled"],lg={class:"flex items-center gap-3"},ng=["disabled"],ig=["disabled"];function dg(e,t,a,r,l,n){const i=(0,o.g2)("Alert"),d=(0,o.g2)("router-link"),u=(0,o.g2)("InvoiceModal"),c=(0,o.g2)("StockTransferVoucherModal");return(0,o.uX)(),(0,o.CE)("div",Bp,[(0,o.Lk)("div",Op,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.alerts,(e,t)=>((0,o.uX)(),(0,o.Wv)(i,{key:t,msg:e.message},null,8,["msg"]))),128))]),(0,o.Lk)("div",Up,[(0,o.bF)(d,{to:"/myapp/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[4]||(t[4]=[(0,o.eW)(" ← بازگشت به صفحه اصلی ",-1)])]),_:1}),(0,o.bF)(d,{to:"/myapp/",type:"button",class:"block w-auto rounded-lg bg-gray-500 px-5 text-center text-sm font-medium text-white py-2.5 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-gray-300 dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"},{default:(0,o.k6)(()=>[...t[5]||(t[5]=[(0,o.eW)(" بازگشت به صفحه اصلی ← ",-1)])]),_:1})]),(0,o.Lk)("form",zp,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.forms,(e,a)=>((0,o.uX)(),(0,o.CE)("div",Zp,[(0,o.Lk)("table",{id:a,class:"w-full text-left rtl:text-right text-sm text-gray-500 dark:text-gray-400"},[(0,o.Lk)("caption",Hp,[(0,o.Lk)("div",Gp,["sales"==a?((0,o.uX)(),(0,o.Wv)(d,{key:0,to:"/myapp/invoicePage/",type:"button",class:"font-medium text-blue-600 hover:underline dark:text-blue-500"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.title),1)]),_:2},1024)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.title),1)],64))])]),(0,o.Lk)("thead",Vp,[(0,o.Lk)("tr",null,[t[6]||(t[6]=(0,o.Lk)("th",{class:"w-16 px-1 py-3 text-center whitespace-nowrap"},"Select",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,e=>((0,o.uX)(),(0,o.CE)(o.FK,{key:e},["id"!==e?((0,o.uX)(),(0,o.CE)("th",{key:0,scope:"col",class:"px-2 py-3",onClick:t=>n.sortTable(a,e)},(0,s.v_)(e),9,qp)):(0,o.Q3)("",!0)],64))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:a,class:"truncate border-b bg-white hover:bg-green-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"},[(0,o.Lk)("td",Jp,[(0,o.Lk)("input",{type:"radio",name:"selectedSale",value:a,checked:l.selectedRowIndex===a,onChange:e=>n.handleSelection(a,t)},null,40,Yp)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fields,e=>((0,o.uX)(),(0,o.CE)(o.FK,{key:e},["id"!==e?((0,o.uX)(),(0,o.CE)("td",eg,[["total_price","unit_price","price_per_kg","net_weight"].includes(e)?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,s.v_)(t[e]?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(t[e]),1)],64))])):(0,o.Q3)("",!0)],64))),128))]))),128))])],8,jp),(0,o.Lk)("div",tg,[(0,o.Lk)("div",ag,[(0,o.Lk)("button",{type:"button",class:"rounded bg-gray-500 px-4 py-2 text-sm text-white disabled:opacity-50",disabled:!l.pagination.hasPrevious,onClick:t[0]||(t[0]=(...e)=>n.goToPreviousPage&&n.goToPreviousPage(...e))}," صفحه قبل ",8,rg),(0,o.Lk)("span",og," صفحه "+(0,s.v_)(l.pagination.page)+" از "+(0,s.v_)(l.pagination.totalPages),1),(0,o.Lk)("button",{type:"button",class:"rounded bg-gray-500 px-4 py-2 text-sm text-white disabled:opacity-50",disabled:!l.pagination.hasNext,onClick:t[1]||(t[1]=(...e)=>n.goToNextPage&&n.goToNextPage(...e))}," صفحه بعد ",8,sg)]),(0,o.Lk)("div",lg,[(0,o.Lk)("button",{type:"button",class:"rounded bg-blue-600 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",disabled:!l.selectedSale||!l.selectedSale.id,onClick:t[2]||(t[2]=(...e)=>n.handleStockTransferVoucher&&n.handleStockTransferVoucher(...e))}," حواله خروج انبار ",8,ng),(0,o.Lk)("button",{type:"button",class:"rounded bg-green-600 px-5 py-2.5 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-50",disabled:!l.selectedSale,onClick:t[3]||(t[3]=(...e)=>n.handleSalesInvoice&&n.handleSalesInvoice(...e))}," فاکتور فروش ",8,ig)])])]))),256))]),(0,o.bF)(u,{show:l.showInvoiceModal,"sale-id":l.invoiceSaleId,onClose:n.closeInvoice},null,8,["show","sale-id","onClose"]),(0,o.bF)(c,{show:l.showStockTransferModal,"sale-id":l.stockTransferSaleId,onClose:n.closeStockTransferVoucher},null,8,["show","sale-id","onClose"])])}const ug={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6"},cg={class:"w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-lg bg-white p-6 shadow-xl"},mg={class:"mb-4 flex items-center justify-between"},hg={key:0,class:"mb-4 rounded-lg bg-red-100 p-3 text-sm text-red-800"},pg={key:1,class:"py-10 text-center text-gray-500"},gg={key:2,class:"space-y-4"},fg={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},yg={class:"flex flex-col gap-1"},kg={class:"flex flex-col gap-1"},bg={class:"flex flex-col gap-1"},xg=["value"],vg={class:"flex flex-col gap-1"},wg={class:"flex flex-col gap-1"},_g={class:"flex flex-col gap-1"},Cg=["value"],Lg={class:"flex flex-col gap-1"},Eg={class:"flex flex-col gap-1"},Xg={class:"md:col-span-2 flex flex-col gap-1"},Sg={class:"flex justify-end gap-3 border-t pt-4"},Ag=["disabled"],Fg={key:0},Mg={key:1};function Wg(e,t,a,l,n,i){return a.show?((0,o.uX)(),(0,o.CE)("div",ug,[(0,o.Lk)("div",cg,[(0,o.Lk)("div",mg,[t[12]||(t[12]=(0,o.Lk)("h2",{class:"text-lg font-semibold"},"حواله خروج انبار",-1)),(0,o.Lk)("button",{type:"button",class:"rounded-full bg-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-300",onClick:t[0]||(t[0]=(...e)=>i.closeModal&&i.closeModal(...e))}," × ")]),n.error?((0,o.uX)(),(0,o.CE)("div",hg,(0,s.v_)(n.error),1)):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("div",pg," در حال بارگذاری اطلاعات... ")):((0,o.uX)(),(0,o.CE)("div",gg,[(0,o.Lk)("div",fg,[(0,o.Lk)("div",yg,[t[13]||(t[13]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"تاریخ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.date=e),disabled:""},null,512),[[r.Jo,n.form.date]])]),(0,o.Lk)("div",kg,[t[14]||(t[14]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"شماره سریال",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[2]||(t[2]=e=>n.form.serialNumber=e)},null,512),[[r.Jo,n.form.serialNumber]])]),(0,o.Lk)("div",bg,[t[15]||(t[15]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"مشخصات",-1)),(0,o.bo)((0,o.Lk)("select",{class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[3]||(t[3]=e=>n.form.grade=e)},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.gradeOptions,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,s.v_)(e),9,xg))),128))],512),[[r.u1,n.form.grade]])]),(0,o.Lk)("div",vg,[t[16]||(t[16]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"گرماز",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[4]||(t[4]=e=>n.form.gsm=e)},null,512),[[r.Jo,n.form.gsm]])]),(0,o.Lk)("div",wg,[t[17]||(t[17]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"عرض کالا",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[5]||(t[5]=e=>n.form.width=e)},null,512),[[r.Jo,n.form.width]])]),(0,o.Lk)("div",_g,[t[19]||(t[19]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"نام خریدار",-1)),(0,o.bo)((0,o.Lk)("select",{class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[6]||(t[6]=e=>n.form.customerName=e)},[t[18]||(t[18]=(0,o.Lk)("option",{value:"",disabled:""},"انتخاب مشتری",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.customerOptions,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,s.v_)(e),9,Cg))),128))],512),[[r.u1,n.form.customerName]])]),(0,o.Lk)("div",Lg,[t[20]||(t[20]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"تعداد / مقدار",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[7]||(t[7]=e=>n.form.quantity=e)},null,512),[[r.Jo,n.form.quantity]])]),(0,o.Lk)("div",Eg,[t[21]||(t[21]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"وزن کالا",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[8]||(t[8]=e=>n.form.netWeight=e)},null,512),[[r.Jo,n.form.netWeight]])]),(0,o.Lk)("div",Xg,[t[22]||(t[22]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"ملاحظات",-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[9]||(t[9]=e=>n.form.truckInfo=e),maxlength:"100",rows:"3",disabled:""},null,512),[[r.Jo,n.form.truckInfo]])])]),(0,o.Lk)("div",Sg,[(0,o.Lk)("button",{type:"button",class:"rounded-lg border border-gray-300 px-4 py-2 text-sm text-gray-600 hover:bg-gray-100",onClick:t[10]||(t[10]=(...e)=>i.closeModal&&i.closeModal(...e))}," انصراف "),(0,o.Lk)("button",{type:"button",class:"rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-50",disabled:n.submitting||n.loading,onClick:t[11]||(t[11]=(...e)=>i.handlePrint&&i.handlePrint(...e))},[n.submitting?((0,o.uX)(),(0,o.CE)("span",Fg,"در حال آماده‌سازی...")):((0,o.uX)(),(0,o.CE)("span",Mg,"چاپ حواله انبار"))],8,Ag)])]))])])):(0,o.Q3)("",!0)}var Ig={name:"StockTransferVoucherModal",props:{show:{type:Boolean,default:!1},saleId:{type:[Number,String],default:null}},data(){return{loading:!1,submitting:!1,error:null,logoSrc:h,logoDataUrl:"",gradeOptions:["Test Linear Homayoun","Kraft Linear Homayoun","Whitetop Linear Homayoun","Flutting Homayoun"],customerOptions:[],form:{date:"",serialNumber:"",grade:"",gsm:"",width:"",customerName:"",quantity:"",netWeight:"",truckInfo:""}}},watch:{show(e){e?this.initialize():this.resetForm()},saleId(e){this.show&&e&&this.initialize()}},mounted(){this.prepareLogo()},methods:{async prepareLogo(){try{const e=this.getResolvedLogoUrl();if(!e)return;const t=await fetch(e,{credentials:"same-origin"});if(!t.ok)return;const a=await t.blob(),r=new FileReader,o=await new Promise((e,t)=>{r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(a)});this.logoDataUrl="string"===typeof o?o:""}catch(e){console.error("Failed to prepare logo for print preview:",e)}},getResolvedLogoUrl(){return this.logoSrc?this.logoSrc.startsWith("http")?this.logoSrc:`${window.location.origin}${this.logoSrc}`:""},async initialize(){if(this.saleId){this.error=null,this.loading=!0;try{await this.loadVoucherData(),await this.fetchCustomers()}catch(e){console.error("Failed to load stock transfer voucher data:",e),this.error="خطا در دریافت اطلاعات حواله. لطفا دوباره تلاش کنید."}finally{this.loading=!1}}else this.resetForm()},resetForm(){this.error=null,this.loading=!1,this.submitting=!1,this.form={date:this.form.date||this.getToday(),serialNumber:"",grade:this.gradeOptions[0],gsm:"",width:"",customerName:"",quantity:"",netWeight:"",truckInfo:""}},getToday(){const e=new Date;return e.toLocaleDateString("fa-IR")},ensureOption(e,t){t&&!e.includes(t)&&e.unshift(t)},async loadVoucherData(){const{data:e}=await this.axios.get("/myapp/api/getStockTransferVoucherData",{params:{sale_id:this.saleId}}),t=e?.values||{};this.form.date=t.stock_transfer_voucher_date||this.getToday(),this.form.serialNumber=t.stock_transfer_voucher_number||"",this.form.grade=t.grade_from_product||this.gradeOptions[0],this.ensureOption(this.gradeOptions,this.form.grade),this.form.gsm=t.gsm_from_product||"",this.form.width=t.width||"",this.form.customerName=t.customer_name||"",this.form.quantity=t.quantity||"",this.form.netWeight=t.net_weight||"",this.form.truckInfo=t.stock_transfer_voucher_comment||""},async fetchCustomers(){try{const{data:e}=await this.axios.get("/myapp/api/getCustomerNames");this.customerOptions=Array.isArray(e?.customer_names)?[...e.customer_names]:[],this.ensureOption(this.customerOptions,this.form.customerName)}catch(e){console.error("Failed to load customer names:",e)}},closeModal(){this.$emit("close")},async handlePrint(){if(this.submitting)return;if(!this.form.serialNumber)return void(this.error="لطفا شماره سریال را وارد کنید.");this.error=null,this.submitting=!0;const e={date:this.form.date,serial_number:this.form.serialNumber,grade:this.form.grade,gsm:this.form.gsm,width:this.form.width,customer_name:this.form.customerName,quantity:this.form.quantity,net_weight:this.form.netWeight,truck_info:this.form.truckInfo};try{await this.axios.post("/myapp/api/generateStockTransferVoucher",e,{params:{sale_id:this.saleId}}),this.openPrintPreview()}catch(t){console.error("Failed to generate stock transfer voucher:",t),this.error="خطا در ایجاد فایل حواله. لطفا دوباره تلاش کنید."}finally{this.submitting=!1}},escapeHtml(e){return null===e||void 0===e?"":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},openPrintPreview(){const e=window.open("","_blank");if(!e)return void(this.error="مرورگر اجازه باز کردن صفحه چاپ را نداد. لطفا پاپ‌آپ‌ها را فعال کنید.");const t=this.logoDataUrl||this.getResolvedLogoUrl(),a=`<!DOCTYPE html>\n        <html lang="fa" dir="rtl">\n        <head>\n          <meta charset="UTF-8" />\n          <title>چاپ حواله انبار</title>\n          <style>\n            body { font-family: 'Tahoma', sans-serif; padding: 32px; background: #fff; }\n            header { display: flex; flex-direction: row; justify-content: flex-start; align-items: flex-start; gap: 24px; margin-bottom: 10px; direction: ltr; }\n            header .logo-wrapper { display: flex; align-items: flex-start; min-width: 180px; order: 1; }\n            header .header-text { flex: 1; text-align: right; min-width: 320px; order: 2; }\n            header h1 { font-size: 20px; margin: 0 0 4px 0; }\n            header h2 { font-size: 18px; margin: 0 0 10px 0; }\n            header .meta-line { font-size: 14px; margin-bottom: 4px; text-align: center; }\n            header .logo { width: 180px; height: auto; object-fit: contain; }\n            table { width: 100%; border-collapse: collapse; margin-bottom: 16px; }\n            th, td { border: 1px solid #000; padding: 8px; text-align: center; font-size: 14px; }\n            th { background: #f3f4f6; font-weight: bold; }\n            tfoot td { font-weight: bold; }\n            tfoot td:first-child,\n            tfoot td:nth-child(2),\n            tfoot td:nth-child(3),\n            tfoot td:nth-child(4) { text-align: right; }\n            tfoot td:nth-child(2) { padding-right: 12px; }\n            .footer { display: flex; justify-content: space-between; font-size: 14px; margin-top: 48px; }\n            .ack { display: flex; justify-content: center; align-items: center; gap: 12px; margin-top: 32px; font-size: 14px; }\n            .ack .receiver-placeholder { display: inline-block; min-width: 220px; height: 18px; }\n          </style>\n        </head>\n        <body>\n          <header>\n            <div class="logo-wrapper">\n              ${t?`<img class="logo" src="${t}" alt="Homayoun Logo" />`:""}\n            </div>\n            <div class="header-text">\n              <h1>شرکت صنایع تولیدی کاغذ و مقوای همایون</h1>\n              <h2>حواله خروج از انبار</h2>\n              <div class="meta-line">تاریخ ارسال : ${this.escapeHtml(this.form.date)}</div>\n              <div class="meta-line">شماره سریال : ${this.escapeHtml(this.form.serialNumber)}</div>\n            </div>\n          </header>\n          <table>\n            <thead>\n              <tr>\n                <th>ردیف</th>\n                <th>نام کالا و مشخصات کالا</th>\n                <th>گرماز</th>\n                <th>عرض کالا</th>\n                <th>نام خریدار</th>\n                <th>تعداد / مقدار</th>\n                <th>وزن کالا</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>1</td>\n                <td>${this.escapeHtml(this.form.grade)}</td>\n                <td>${this.escapeHtml(this.form.gsm)}</td>\n                <td>${this.escapeHtml(this.form.width)}</td>\n                <td>${this.escapeHtml(this.form.customerName)}</td>\n                <td>${this.escapeHtml(this.form.quantity)}</td>\n                <td>${this.escapeHtml(this.form.netWeight)}</td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr class="note-row">\n                <td>ملاحظات</td>\n                <td colspan="3">${this.escapeHtml(this.form.truckInfo)}</td>\n                <td>جمع</td>\n                <td></td>\n                <td>${this.escapeHtml(this.form.netWeight)}</td>\n              </tr>\n            </tfoot>\n          </table>\n          <div class="footer">\n            <span>حسابداری</span>\n            <span>انبارداری</span>\n            <span>مدیر فروش</span>\n            <span>مدیریت کارخانه</span>\n            <span>تحویل گیرنده</span>\n          </div>\n          <div class="ack">\n            <span>بار صحیح و سالم تحویل اینجانب</span>\n            <span class="receiver-placeholder"></span>\n            <span>گردید</span>\n          </div>\n          <script>\n            window.addEventListener('load', function () {\n              window.focus()\n              window.print()\n              window.close()\n            })\n          <\/script>\n        </body>\n        </html>`;e.document.open(),e.document.write(a),e.document.close()}}};const Kg=(0,d.A)(Ig,[["render",Wg]]);var Pg=Kg;const Tg={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6"},Dg={class:"w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-lg bg-white p-6 shadow-xl"},Ng={class:"mb-4 flex items-center justify-between"},Qg={key:0,class:"mb-4 rounded-lg bg-red-100 p-3 text-sm text-red-800"},$g={key:1,class:"py-10 text-center text-gray-500"},Rg={key:2,class:"space-y-4"},Bg={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Og={class:"flex flex-col gap-1"},Ug={class:"flex flex-col gap-1"},zg={class:"flex flex-col gap-1"},Zg=["value"],jg={class:"flex flex-col gap-1"},Hg={class:"flex flex-col gap-1"},Gg={class:"flex flex-col gap-1"},Vg={class:"md:col-span-2 flex flex-col gap-1"},qg={class:"flex flex-col gap-1"},Jg={class:"flex flex-col gap-1"},Yg={class:"md:col-span-2 flex flex-col gap-1"},ef={class:"flex flex-col gap-1"},tf={class:"flex flex-col gap-1"},af={class:"flex flex-col gap-1"},rf={class:"flex flex-col gap-1"},of={class:"flex flex-col gap-1"},sf={class:"flex flex-col gap-1"},lf={class:"flex flex-col gap-1"},nf={class:"flex flex-col gap-1"},df={class:"flex justify-end gap-3 border-t pt-4"},uf=["disabled"],cf={key:0},mf={key:1};function hf(e,t,a,l,n,i){return a.show?((0,o.uX)(),(0,o.CE)("div",Tg,[(0,o.Lk)("div",Dg,[(0,o.Lk)("div",Ng,[t[21]||(t[21]=(0,o.Lk)("h2",{class:"text-lg font-semibold"},"صورت حساب فروش کالا",-1)),(0,o.Lk)("button",{type:"button",class:"rounded-full bg-gray-200 px-3 py-1 text-sm text-gray-600 hover:bg-gray-300",onClick:t[0]||(t[0]=(...e)=>i.closeModal&&i.closeModal(...e))}," × ")]),n.error?((0,o.uX)(),(0,o.CE)("div",Qg,(0,s.v_)(n.error),1)):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("div",$g," در حال بارگذاری اطلاعات... ")):((0,o.uX)(),(0,o.CE)("div",Rg,[(0,o.Lk)("div",Bg,[(0,o.Lk)("div",Og,[t[22]||(t[22]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"تاریخ فاکتور",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.invoice_date=e),disabled:""},null,512),[[r.Jo,n.form.invoice_date]])]),(0,o.Lk)("div",Ug,[t[23]||(t[23]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"شماره فاکتور",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[2]||(t[2]=e=>n.form.invoice_number=e)},null,512),[[r.Jo,n.form.invoice_number]])]),t[41]||(t[41]=(0,o.Lk)("div",{class:"md:col-span-2 border-t pt-4"},[(0,o.Lk)("h3",{class:"text-md font-semibold mb-3"},"اطلاعات مشتری")],-1)),(0,o.Lk)("div",zg,[t[25]||(t[25]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"نام مشتری",-1)),(0,o.bo)((0,o.Lk)("select",{class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[3]||(t[3]=e=>n.form.customer_name=e)},[t[24]||(t[24]=(0,o.Lk)("option",{value:"",disabled:""},"انتخاب مشتری",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.customerOptions,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,s.v_)(e),9,Zg))),128))],512),[[r.u1,n.form.customer_name]])]),(0,o.Lk)("div",jg,[t[26]||(t[26]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"کد ملی",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[4]||(t[4]=e=>n.form.customer_national_id=e)},null,512),[[r.Jo,n.form.customer_national_id]])]),(0,o.Lk)("div",Hg,[t[27]||(t[27]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"شماره ثبت",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[5]||(t[5]=e=>n.form.customer_register_number=e)},null,512),[[r.Jo,n.form.customer_register_number]])]),(0,o.Lk)("div",Gg,[t[28]||(t[28]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"کد اقتصادی",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[6]||(t[6]=e=>n.form.customer_commercial_code=e)},null,512),[[r.Jo,n.form.customer_commercial_code]])]),(0,o.Lk)("div",Vg,[t[29]||(t[29]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"آدرس",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[7]||(t[7]=e=>n.form.customer_address=e)},null,512),[[r.Jo,n.form.customer_address]])]),(0,o.Lk)("div",qg,[t[30]||(t[30]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"کد پستی",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[8]||(t[8]=e=>n.form.customer_postal_code=e)},null,512),[[r.Jo,n.form.customer_postal_code]])]),(0,o.Lk)("div",Jg,[t[31]||(t[31]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"تلفن",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-200","onUpdate:modelValue":t[9]||(t[9]=e=>n.form.customer_phone=e)},null,512),[[r.Jo,n.form.customer_phone]])]),t[42]||(t[42]=(0,o.Lk)("div",{class:"md:col-span-2 border-t pt-4"},[(0,o.Lk)("h3",{class:"text-md font-semibold mb-3"},"اطلاعات کالا")],-1)),(0,o.Lk)("div",Yg,[t[32]||(t[32]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"توضیحات کالا",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[10]||(t[10]=e=>n.form.product_description=e),disabled:""},null,512),[[r.Jo,n.form.product_description]])]),(0,o.Lk)("div",ef,[t[33]||(t[33]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"وزن خالص",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[11]||(t[11]=e=>n.form.net_weight=e),disabled:""},null,512),[[r.Jo,n.form.net_weight]])]),(0,o.Lk)("div",tf,[t[34]||(t[34]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"واحد",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[12]||(t[12]=e=>n.form.unit=e),disabled:""},null,512),[[r.Jo,n.form.unit]])]),(0,o.Lk)("div",af,[t[35]||(t[35]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"قیمت هر کیلوگرم",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[13]||(t[13]=e=>n.form.price_per_kg=e),disabled:""},null,512),[[r.Jo,n.form.price_per_kg]])]),(0,o.Lk)("div",rf,[t[36]||(t[36]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"قیمت کل",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[14]||(t[14]=e=>n.form.total_price=e),disabled:""},null,512),[[r.Jo,n.form.total_price]])]),(0,o.Lk)("div",of,[t[37]||(t[37]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"هزینه اضافی",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[15]||(t[15]=e=>n.form.extra_cost=e),disabled:""},null,512),[[r.Jo,n.form.extra_cost]])]),(0,o.Lk)("div",sf,[t[38]||(t[38]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"قیمت پس از تخفیف",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[16]||(t[16]=e=>n.form.total_price_after_off=e),disabled:""},null,512),[[r.Jo,n.form.total_price_after_off]])]),(0,o.Lk)("div",lf,[t[39]||(t[39]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"مالیات",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm","onUpdate:modelValue":t[17]||(t[17]=e=>n.form.tax=e),disabled:""},null,512),[[r.Jo,n.form.tax]])]),(0,o.Lk)("div",nf,[t[40]||(t[40]=(0,o.Lk)("label",{class:"text-sm font-medium text-gray-700"},"قیمت نهایی",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-100 px-3 py-2 text-sm font-semibold","onUpdate:modelValue":t[18]||(t[18]=e=>n.form.total_price_after_tax=e),disabled:""},null,512),[[r.Jo,n.form.total_price_after_tax]])])]),(0,o.Lk)("div",df,[(0,o.Lk)("button",{type:"button",class:"rounded-lg border border-gray-300 px-4 py-2 text-sm text-gray-600 hover:bg-gray-100",onClick:t[19]||(t[19]=(...e)=>i.closeModal&&i.closeModal(...e))}," انصراف "),(0,o.Lk)("button",{type:"button",class:"rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-50",disabled:n.submitting||n.loading,onClick:t[20]||(t[20]=(...e)=>i.handlePrint&&i.handlePrint(...e))},[n.submitting?((0,o.uX)(),(0,o.CE)("span",cf,"در حال آماده‌سازی...")):((0,o.uX)(),(0,o.CE)("span",mf,"چاپ فاکتور فروش"))],8,uf)])]))])])):(0,o.Q3)("",!0)}var pf={name:"InvoiceModal",props:{show:{type:Boolean,default:!1},saleId:{type:[Number,String],default:null}},data(){return{loading:!1,submitting:!1,error:null,customerOptions:[],isLoadingCustomerData:!1,form:{invoice_date:"",invoice_number:"",our_company_name:"",our_company_national_id:"",our_company_register_no:"",our_company_commercial_code:"",our_company_address:"",our_company_postal_code:"",our_company_phone:"",customer_name:"",customer_national_id:"",customer_register_number:"",customer_commercial_code:"",customer_address:"",customer_postal_code:"",customer_phone:"",product_id:"",product_description:"",net_weight:"",unit:"",price_per_kg:"",total_price:"",extra_cost:"",total_price_after_off:"",tax:"",total_price_after_tax:""}}},watch:{show(e){e?this.initialize():this.resetForm()},saleId(e){this.show&&e&&this.initialize()},"form.customer_name"(e){e&&!this.isLoadingCustomerData&&this.loadCustomerData(e)}},mounted(){},methods:{async initialize(){if(this.saleId){this.error=null,this.loading=!0;try{await this.fetchCustomers(),await this.loadInvoiceData()}catch(e){console.error("Failed to load invoice data:",e),this.error="خطا در دریافت اطلاعات فاکتور فروش. لطفا دوباره تلاش کنید."}finally{this.loading=!1}}else this.resetForm()},resetForm(){this.error=null,this.loading=!1,this.submitting=!1,this.form={invoice_date:this.form.invoice_date||this.getToday(),invoice_number:"",our_company_name:"",our_company_national_id:"",our_company_register_no:"",our_company_commercial_code:"",our_company_address:"",our_company_postal_code:"",our_company_phone:"",customer_name:"",customer_national_id:"",customer_register_number:"",customer_commercial_code:"",customer_address:"",customer_postal_code:"",customer_phone:"",product_id:"",product_description:"",net_weight:"",unit:"",price_per_kg:"",total_price:"",extra_cost:"",total_price_after_off:"",tax:"",total_price_after_tax:""}},getToday(){const e=new Date;return e.toLocaleDateString("fa-IR")},ensureOption(e,t){t&&!e.includes(t)&&e.unshift(t)},async loadInvoiceData(){this.isLoadingCustomerData=!0;try{const{data:e}=await this.axios.get("/myapp/api/getInvoiceData",{params:{sale_id:this.saleId}}),t=e?.values||{};this.form.invoice_date=t.invoice_date||this.getToday(),this.form.invoice_number=t.invoice_number||"",this.form.our_company_name=t.our_company_name||"",this.form.our_company_national_id=t.our_company_national_id||"",this.form.our_company_register_no=t.our_company_register_no||"",this.form.our_company_commercial_code=t.our_company_commercial_code||"",this.form.our_company_address=t.our_company_address||"",this.form.our_company_postal_code=t.our_company_postal_code||"",this.form.our_company_phone=t.our_company_phone||"",this.form.customer_name=t.customer_name||"",this.form.customer_national_id=t.customer_national_id||"",this.form.customer_register_number=t.customer_register_number||"",this.form.customer_commercial_code=t.customer_commercial_code||"",this.form.customer_address=t.customer_address||"",this.form.customer_postal_code=t.customer_postal_code||"",this.form.customer_phone=t.customer_phone||"",this.form.product_id=t.product_id||"",this.form.product_description=t.product_description||"",this.form.net_weight=t.net_weight||"",this.form.unit=t.unit||"",this.form.price_per_kg=t.price_per_kg||"",this.form.total_price=t.total_price||"",this.form.extra_cost=t.extra_cost||"",this.form.total_price_after_off=t.total_price_after_off||"",this.form.tax=t.tax||"",this.form.total_price_after_tax=t.total_price_after_tax||""}finally{this.isLoadingCustomerData=!1,this.form.customer_name&&await this.loadCustomerData(this.form.customer_name)}},async fetchCustomers(){try{const{data:e}=await this.axios.get("/myapp/api/getCustomerNames");this.customerOptions=Array.isArray(e?.customer_data)?[...e.customer_data]:[],this.ensureOption(this.customerOptions,this.form.customer_name)}catch(e){console.error("Failed to load customer names:",e)}},formatNumber(e){if(null===e||void 0===e||""===e)return"";const t="string"===typeof e?e.replace(/,/g,""):e,a=Number(t);return Number.isNaN(a)?e:a.toLocaleString("fa-IR")},async loadCustomerData(e){if(e)try{const{data:t}=await this.axios.get("/myapp/api/getCustomerData",{params:{customer_name:e}}),a=t?.customer_names||{};a&&(this.form.customer_national_id=a.national_id||"",this.form.customer_register_number=a.register_no||a.register_number||"",this.form.customer_commercial_code=a.commercial_code||"",this.form.customer_address=a.address||"",this.form.customer_postal_code=a.postal_code||"",this.form.customer_phone=a.phone||"")}catch(t){console.error("Failed to load customer data:",t)}},closeModal(){this.$emit("close")},async handlePrint(){if(this.submitting)return;if(!this.form.invoice_number)return void(this.error="لطفا شماره فاکتور را وارد کنید.");this.error=null,this.submitting=!0;const e={invoice_date:this.form.invoice_date,invoice_number:this.form.invoice_number,our_company_name:this.form.our_company_name,our_company_national_id:this.form.our_company_national_id,our_company_register_no:this.form.our_company_register_no,our_company_commercial_code:this.form.our_company_commercial_code,our_company_address:this.form.our_company_address,our_company_postal_code:this.form.our_company_postal_code,our_company_phone:this.form.our_company_phone,customer_name:this.form.customer_name,customer_national_id:this.form.customer_national_id,customer_register_number:this.form.customer_register_number,customer_commercial_code:this.form.customer_commercial_code,customer_address:this.form.customer_address,customer_postal_code:this.form.customer_postal_code,customer_phone:this.form.customer_phone,product_id:this.form.product_id,product_description:this.form.product_description,net_weight:this.form.net_weight,unit:this.form.unit,price_per_kg:this.form.price_per_kg,total_price:this.form.total_price,extra_cost:this.form.extra_cost,total_price_after_off:this.form.total_price_after_off,tax:this.form.tax,total_price_after_tax:this.form.total_price_after_tax};try{await this.axios.post("/myapp/api/generateInvoice",e,{params:{sale_id:this.saleId}}),this.openPrintPreview()}catch(t){console.error("Failed to generate invoice:",t),this.error="خطا در ایجاد فایل فاکتور فروش. لطفا دوباره تلاش کنید."}finally{this.submitting=!1}},escapeHtml(e){return null===e||void 0===e?"":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},openPrintPreview(){const e=window.open("","_blank");if(!e)return void(this.error="مرورگر اجازه باز کردن صفحه چاپ را نداد. لطفا پاپ‌آپ‌ها را فعال کنید.");const t=(e,t="")=>{const a=null===e||void 0===e||""===e?t:String(e);return this.escapeHtml(a)},a=(e,t="-")=>{const a=this.formatNumber(e);return""===a?this.escapeHtml(t):this.escapeHtml(a)},r=e=>a(e,"0"),o=`<!DOCTYPE html>\n        <html lang="fa" dir="rtl">\n        <head>\n          <meta charset="UTF-8" />\n          <title>صورت حساب فروش کالا</title>\n          <style>\n            @page { size: A4 landscape; margin: 10mm; }\n            body { \n              font-family: 'Tahoma', sans-serif; \n              margin: 0; \n              padding: 0; \n              color: #000; \n              -webkit-print-color-adjust: exact; \n              print-color-adjust: exact;\n            }\n            .invoice-wrapper { \n              width: 100%; \n              padding: 0 10px; \n              display: flex;\n              flex-direction: column;\n              justify-content: center;\n              min-height: 100vh;\n            }\n            .main-table { \n              width: 98%; \n              margin: 0 auto;\n              border-collapse: collapse; \n            }\n            .main-table > tbody > tr > td { padding: 0; border: none; }\n            \n            .nested-table { width: 100%; border-collapse: collapse; border: 1px solid #000; font-size: 11px; }\n            .nested-table th,\n            .nested-table td { padding: 4px 6px; vertical-align: middle; }\n            \n            .title-row th { \n              font-size: 16px; \n              text-align: center; \n              padding: 8px 0; \n              border: 1px solid #000;\n            }\n            \n            .section-title th { \n              background: #d9d9d9; \n              font-weight: bold; \n              text-align: center; \n              border: 1px solid #000;\n              padding: 6px 8px;\n            }\n            \n            .info-table { border: none; }\n            .info-table td { border: none; padding: 5px; }\n            .label-cell { \n              font-weight: bold; \n              width: 150px;\n              text-align: right;\n            }\n            .label-cell-grey { \n              background: #f0f0f0; \n              font-weight: bold; \n              width: 120px;\n              text-align: right;\n            }\n            .value-cell { text-align: right; width: auto; }\n            \n            .meta-box-cell { \n              vertical-align: top; \n              background: #f7f7f7; \n              border: 1px solid #000;\n              width: 200px;\n            }\n            .meta-box { \n              display: flex; \n              flex-direction: column; \n              gap: 8px; \n              padding: 14px; \n              direction: rtl; \n              text-align: right; \n            }\n            .meta-item { \n              display: flex; \n              align-items: center; \n              gap: 10px; \n              font-weight: bold; \n            }\n            .meta-label { min-width: 60px; }\n            .meta-value { font-weight: normal; }\n            \n            .product-header th { \n              background: #d9d9d9; \n              text-align: center; \n              border: 1px solid #000;\n            }\n            .product-cell { text-align: center; border: 1px solid #000; }\n            .product-desc { text-align: right; border: 1px solid #000; }\n            .totals-row td { \n              font-weight: bold; \n              text-align: center; \n              border: 1px solid #000;\n            }\n            .amount-row td { \n              font-weight: bold; \n              border: 1px solid #000;\n            }\n            .payment-signature-row td { \n              border: 1px solid #000;\n              vertical-align: top;\n              padding: 12px;\n            }\n            .payment-info {\n              text-align: right;\n              font-weight: bold;\n              line-height: 2;\n            }\n            .signature-box {\n              padding: 12px;\n              min-height: 60px;\n              display: flex;\n              justify-content: space-around;\n              align-items: center;\n              gap: 40px;\n            }\n            .signature-item {\n              text-align: center;\n              font-weight: bold;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="invoice-wrapper">\n            <table class="main-table" cellspacing="0" cellpadding="0">\n              <tbody>\n                \x3c!-- Title Row --\x3e\n                <tr>\n                  <td>\n                    <table class="nested-table" cellspacing="0" cellpadding="0">\n                      <tr class="title-row">\n                        <th>صورت حساب فروش کالا</th>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                \x3c!-- Seller Info with Meta Box --\x3e\n                <tr>\n                  <td>\n                    <table class="nested-table" cellspacing="0" cellpadding="0">\n                      <tr class="section-title">\n                        <th colspan="2">مشخصات فروشنده</th>\n                      </tr>\n                      <tr>\n                        <td style="width: 100%; padding: 0; vertical-align: top;">\n                          <table class="info-table" style="width: 100%; border-collapse: collapse;">\n                            <tr>\n                              <td class="label-cell">نام شخص حقیقی / حقوقی</td>\n                              <td class="value-cell">${t(this.form.our_company_name,"-")}</td>\n                              <td class="label-cell">کد اقتصادی</td>\n                              <td class="value-cell">${t(this.form.our_company_commercial_code,"-")}</td>\n                              <td class="label-cell">شماره ثبت</td>\n                              <td class="value-cell">${t(this.form.our_company_register_no,"-")}</td>\n                            </tr>\n                            <tr>\n                              <td class="label-cell">شناسه ملی</td>\n                              <td class="value-cell">${t(this.form.our_company_national_id,"-")}</td>\n                              <td class="label-cell">کد پستی</td>\n                              <td class="value-cell">${t(this.form.our_company_postal_code,"-")}</td>\n                              <td class="label-cell">تلفن/ایمیل</td>\n                              <td class="value-cell">${t(this.form.our_company_phone,"-")}</td>\n                            </tr>\n                            <tr>\n                              <td class="label-cell">نشانی</td>\n                              <td colspan="5" class="value-cell">${t(this.form.our_company_address,"-")}</td>\n                            </tr>\n                          </table>\n                        </td>\n                        <td class="meta-box-cell">\n                          <div class="meta-box">\n                            <div class="meta-item">\n                              <span class="meta-label">شماره</span>\n                              <span class="meta-value">${t(this.form.invoice_number,"-")}</span>\n                            </div>\n                            <div class="meta-item">\n                              <span class="meta-label">تاریخ</span>\n                              <span class="meta-value">${t(this.form.invoice_date,"-")}</span>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                \x3c!-- Buyer Info --\x3e\n                <tr>\n                  <td>\n                    <table class="nested-table" cellspacing="0" cellpadding="0">\n                      <tr class="section-title">\n                        <th>مشخصات خریدار</th>\n                      </tr>\n                      <tr>\n                        <td style="padding: 0;">\n                          <table class="info-table" style="width: 100%; border-collapse: collapse;">\n                            <tr>\n                              <td class="label-cell">نام شخص حقیقی / حقوقی</td>\n                              <td class="value-cell">${t(this.form.customer_name,"-")}</td>\n                              <td class="label-cell">کد اقتصادی</td>\n                              <td class="value-cell">${t(this.form.customer_commercial_code,"-")}</td>\n                              <td class="label-cell">شماره ثبت</td>\n                              <td class="value-cell">${t(this.form.customer_register_number,"-")}</td>\n                            </tr>\n                            <tr>\n                              <td class="label-cell">شناسه ملی</td>\n                              <td class="value-cell">${t(this.form.customer_national_id,"-")}</td>\n                              <td class="label-cell">کد پستی</td>\n                              <td class="value-cell">${t(this.form.customer_postal_code,"-")}</td>\n                              <td class="label-cell">تلفن/ایمیل</td>\n                              <td class="value-cell">${t(this.form.customer_phone,"-")}</td>\n                            </tr>\n                            <tr>\n                              <td class="label-cell">نشانی</td>\n                              <td colspan="5" class="value-cell">${t(this.form.customer_address,"-")}</td>\n                            </tr>\n                          </table>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                \x3c!-- Product Table --\x3e\n                <tr>\n                  <td>\n                    <table class="nested-table" cellspacing="0" cellpadding="0">\n                      <tr class="section-title">\n                        <th colspan="13">مشخصات کالا</th>\n                      </tr>\n                      <tr class="product-header">\n                        <th style="width: 3%;">ردیف</th>\n                        <th style="width: 6%;">کد کالا</th>\n                        <th colspan="3" style="width: 24%;">شرح کالا یا خدمت</th>\n                        <th style="width: 7%;">مقدار</th>\n                        <th style="width: 6%;">واحد</th>\n                        <th style="width: 8%;">قیمت واحد</th>\n                        <th style="width: 8%;">مبلغ کل</th>\n                        <th style="width: 10%;">مبلغ کل پس از تخفیف</th>\n                        <th style="width: 8%;">جمع مبلغ کل</th>\n                        <th style="width: 10%;">جمع مالیات و عوارض ۱۰٪</th>\n                        <th style="width: 10%;">جمع مبلغ کل و مالیات</th>\n                      </tr>\n                      <tr>\n                        <td class="product-cell">1</td>\n                        <td class="product-cell">${t(this.form.product_id,"-")}</td>\n                        <td colspan="3" class="product-desc">${t(this.form.product_description,"-")}</td>\n                        <td class="product-cell">${a(this.form.net_weight)}</td>\n                        <td class="product-cell">${t(this.form.unit,"-")}</td>\n                        <td class="product-cell">${a(this.form.price_per_kg)}</td>\n                        <td class="product-cell">${r(this.form.total_price)}</td>\n                        <td class="product-cell">${r(this.form.total_price_after_off)}</td>\n                        <td class="product-cell">${r(this.form.total_price_after_off)}</td>\n                        <td class="product-cell">${r(this.form.tax)}</td>\n                        <td class="product-cell">${r(this.form.total_price_after_tax)}</td>\n                      </tr>\n                      ${Array.from({length:4}).map(()=>'\n                      <tr>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td colspan="3" class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                        <td class="product-cell">&nbsp;</td>\n                      </tr>').join("")}\n                      <tr class="totals-row">\n                        <td colspan="8" style="text-align: right;">جمع کل</td>\n                        <td>${r(this.form.total_price)}</td>\n                        <td>${r(this.form.total_price_after_off)}</td>\n                        <td>${r(this.form.total_price_after_off)}</td>\n                        <td>${r(this.form.tax)}</td>\n                        <td>${r(this.form.total_price_after_tax)}</td>\n                      </tr>\n                      <tr class="payment-signature-row">\n                        <td colspan="8" style="text-align: right;">\n                          <div class="signature-box">\n                            <div class="signature-item">مهر و امضاء فروشنده</div>\n                            <div class="signature-item">مهر و امضاء خریدار</div>\n                          </div>\n                        </td>\n                        <td colspan="5" style="text-align: right; vertical-align: middle;">\n                          <div class="payment-info">\n                            <div>مبلغ قابل پرداخت (به عدد): ${r(this.form.total_price_after_tax)}</div>\n                            <div>مبلغ قابل پرداخت (به حروف): ........................................................</div>\n                          </div>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <script>\n            window.addEventListener('load', function () {\n              window.focus()\n              window.print()\n              window.close()\n            })\n          <\/script>\n        </body>\n        </html>`;e.document.open(),e.document.write(o),e.document.close()}}};const gf=(0,d.A)(pf,[["render",hf]]);var ff=gf,yf={name:"invoicePage",components:{Lic_numer:Pe,Card:ae,modal:ye,Alert:Le,InvoiceModal:ff,StockTransferVoucherModal:Pg},data(){return{forms:{sales:{type:"input",title:"لیست فروش",data:[],value:"",fields:[],CopyData:[],searchQuery:""}},pagination:{page:1,pageSize:10,totalPages:1,totalItems:0,hasNext:!1,hasPrevious:!1},selectedSale:null,selectedRowIndex:null,alerts:[],alertSocket:null,showInvoiceModal:!1,invoiceSaleId:null,showStockTransferModal:!1,stockTransferSaleId:null}},mounted(){(0,G.Tp)(),this.fetchSalesPage(),this.alertSocket=new WebSocket("ws://"+window.location.host+"/ws/alert/"),this.alertSocket.onmessage=e=>{const t=JSON.parse(e.data);this.update_alert({message:t.message,payload:t.data})},this.alertSocket.onerror=e=>{console.error("WebSocket Error: ",e)}},beforeDestroy(){this.alertSocket&&this.alertSocket.close()},methods:{update_alert(e){if(!e)return;const{message:t=""}=e;t&&this.alerts.unshift({message:t})},async fetchSalesPage(e=1){try{this.pagination.page=e;const t={page:this.pagination.page,page_size:this.pagination.pageSize},{data:a}=await this.axios.get("/myapp/api/getSalesData",{params:t}),{values:r=[],fields:o=[],pagination:s={}}=a;this.forms.sales.data=r,this.forms.sales.CopyData=r,this.forms.sales.fields=o,this.pagination={page:s.page??e,pageSize:s.page_size??this.pagination.pageSize,totalPages:s.total_pages??1,totalItems:s.total_items??r.length,hasNext:s.has_next??!1,hasPrevious:s.has_previous??!1},r.length?(null===this.selectedRowIndex||this.selectedRowIndex>=r.length)&&this.handleSelection(0,r[0]):(this.selectedSale=null,this.selectedRowIndex=null,this.stockTransferSaleId=null,this.invoiceSaleId=null)}catch(t){console.error("Error fetching sales invoice data:",t),this.forms.sales.data=[],this.forms.sales.CopyData=[],this.pagination={page:1,pageSize:this.pagination.pageSize,totalPages:1,totalItems:0,hasNext:!1,hasPrevious:!1},this.selectedSale=null,this.selectedRowIndex=null}},goToPreviousPage(){this.pagination.hasPrevious&&this.fetchSalesPage(this.pagination.page-1)},goToNextPage(){this.pagination.hasNext&&this.fetchSalesPage(this.pagination.page+1)},handleSelection(e,t){this.selectedRowIndex=e,this.selectedSale=t,this.stockTransferSaleId=t?.id??null,this.invoiceSaleId=t?.id??null},handleStockTransferVoucher(){this.selectedSale&&this.selectedSale.id&&(this.stockTransferSaleId=this.selectedSale.id,this.showStockTransferModal=!0)},closeStockTransferVoucher(){this.showStockTransferModal=!1},handleSalesInvoice(){this.selectedSale&&this.selectedSale.id&&(this.invoiceSaleId=this.selectedSale.id,this.showInvoiceModal=!0)},closeInvoice(){this.showInvoiceModal=!1},sortTable(e,t){const a=this.forms[e];a&&Array.isArray(a.data)&&(a.data=[...a.data].sort((e,a)=>{const r=e[t],o=a[t];if(null===r||void 0===r)return 1;if(null===o||void 0===o)return-1;if(!isNaN(r)&&!isNaN(o))return Number(r)-Number(o);const s=r.toString().toLowerCase(),l=o.toString().toLowerCase();return s<l?-1:s>l?1:0}))}}};const kf=(0,d.A)(yf,[["render",dg]]);var bf=kf;const xf={class:"factory-map-container"},vf={key:0,class:"error-banner"},wf={key:1,class:"loading-overlay"},_f={class:"svg-container"},Cf={viewBox:"0 0 1700 1000",preserveAspectRatio:"xMidYMid meet",class:"factory-svg"},Lf={class:"anbar-salon-tolid"},Ef=["stroke","stroke-width"],Xf={x:"81",y:"49","text-anchor":"middle","font-size":"12","font-weight":"bold"},Sf={x:"81",y:"216","text-anchor":"middle","font-size":"12","font-weight":"bold"},Af={x:"208",y:"40","text-anchor":"middle","font-size":"12","font-weight":"bold"},Ff={x:"208",y:"135","text-anchor":"middle","font-size":"12","font-weight":"bold"},Mf=["onMouseenter"],Wf={key:0},If=["x","y"],Kf=["d"],Pf={key:1},Tf=["d"],Df=["x","y"],Nf=["cx","cy","rx","ry"],Qf=["d"],$f=["cx","cy","rx","ry"],Rf=["x","y"],Bf={class:"anbar-parvandeh"},Of=["stroke","stroke-width"],Uf={class:"anbar-koochak"},zf=["stroke","stroke-width"],Zf={class:"anbar-khamir-ghadim"},jf=["stroke","stroke-width"],Hf=["stroke","stroke-width"],Gf=["transform","onMouseenter"],Vf={x:"18",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold"},qf={x:"18",y:"38","text-anchor":"middle","font-size":"6"},Jf=["onMouseenter"],Yf={key:0},ey=["x","y"],ty=["d"],ay={key:1},ry=["d"],oy=["x","y"],sy=["cx","cy","rx","ry"],ly=["d"],ny=["cx","cy","rx","ry"],iy=["x","y"],dy={class:"anbar-mohavate-kardan"},uy=["fill","stroke","stroke-width"],cy=["transform","onMouseenter"],my={x:"18",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold"},hy={x:"18",y:"38","text-anchor":"middle","font-size":"6"},py={class:"weight-station-1"},gy=["fill","stroke","stroke-width"],fy={class:"anbar-sangin"},yy=["stroke","stroke-width"],ky=["onMouseenter"],by={key:0},xy=["x","y"],vy=["d"],wy={key:1},_y=["d"],Cy=["x","y"],Ly=["cx","cy","rx","ry"],Ey=["d"],Xy=["cx","cy","rx","ry"],Sy=["x","y"],Ay=["fill","stroke","stroke-width"],Fy=["transform","onMouseenter"],My={x:"18",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold"},Wy={x:"18",y:"38","text-anchor":"middle","font-size":"6"},Iy={class:"right-container"},Ky=["stroke","stroke-width"],Py=["transform","onMouseenter"],Ty={x:"18",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold"},Dy={x:"18",y:"38","text-anchor":"middle","font-size":"6"},Ny={x:"1316",y:"350","text-anchor":"middle","font-size":"12","font-weight":"bold"},Qy={x:"1316",y:"595","text-anchor":"middle","font-size":"12","font-weight":"bold"},$y={class:"office"},Ry=["fill","stroke","stroke-width"],By={class:"weight-station-2"},Oy=["fill","stroke","stroke-width"],Uy={class:"anbar-pak"},zy=["stroke","stroke-width"],Zy=["transform","onMouseenter"],jy={x:"18",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold"},Hy={x:"18",y:"38","text-anchor":"middle","font-size":"6"},Gy={class:"anbar-akhal-bottom"},Vy=["stroke","stroke-width"],qy=["transform","onMouseenter"],Jy={x:"18",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold"},Yy={x:"18",y:"38","text-anchor":"middle","font-size":"6"},ek={class:"static-forklifts"},tk={key:0,transform:"translate(600, 95)"},ak={key:1,transform:"translate(1080, 35)"},rk={key:2,transform:"translate(270, 255)"},ok=["transform"],sk={key:0,transform:"translate(12, -8)"},lk={key:1,x:"20",y:"5","font-size":"20","text-anchor":"middle"},nk={x:"-12",y:"-10","text-anchor":"middle","font-size":"8",fill:"#fff","font-weight":"bold"},ik={class:"warehouse-badges"},dk=["transform"],uk=["onClick"],ck={x:"0",y:"-3","text-anchor":"middle","font-size":"10","font-weight":"bold",fill:"#fff"},mk=["onClick"],hk={x:"30",y:"-3","text-anchor":"middle","font-size":"10","font-weight":"bold",fill:"#fff"},pk={class:"active-trucks"},gk=["transform"],fk=["transform"],yk={key:0,class:"motion-trail",opacity:"0.4"},kk=["fill"],bk=["fill"],xk=["fill"],vk=["fill"],wk=["fill"],_k=["fill"],Ck=["fill"],Lk=["onClick"],Ek={transform:"translate(25, 30)"},Xk={x:"30",y:"10","text-anchor":"middle","font-size":"6","font-weight":"bold",fill:"#1a1a1a","font-family":"Arial, sans-serif"},Sk={x:"30",y:"26","text-anchor":"middle","font-size":"7","font-weight":"bold",fill:"#000","font-family":"Arial, sans-serif"},Ak=["fill"],Fk=["fill"],Mk=["fill"],Wk=["fill"],Ik={x:"55",y:"28","text-anchor":"middle","font-size":"9","font-weight":"bold",fill:"#000","font-family":"Arial, sans-serif"},Kk=["fill"],Pk={x:"90",y:"117","text-anchor":"middle","font-size":"9","font-weight":"bold",fill:"#fff","font-family":"Arial, sans-serif"},Tk={class:"active-forklifts"},Dk={key:0},Nk=["transform"],Qk={key:0,transform:"translate(12, -8)"},$k={key:1,x:"20",y:"5","font-size":"20","text-anchor":"middle"},Rk={x:"0",y:"25","text-anchor":"middle","font-size":"8","font-weight":"bold",fill:"#ff9800"},Bk={key:1,class:"data-info"},Ok={x:"1380",y:"888","text-anchor":"end","font-size":"12",fill:"#fff","font-weight":"bold"},Uk={x:"1450",y:"888","text-anchor":"end","font-size":"13",fill:"#fff","font-weight":"bold"},zk={x:"1515",y:"888","text-anchor":"end","font-size":"13",fill:"#fff","font-weight":"bold"},Zk={x:"1665",y:"888","text-anchor":"end","font-size":"13",fill:"#fff","font-weight":"bold"},jk={x:"1380",y:"912","text-anchor":"end","font-size":"12",fill:"#fff","font-weight":"bold"},Hk={x:"1515",y:"912","text-anchor":"end","font-size":"12",fill:"#fff","font-weight":"bold"},Gk={x:"1450",y:"935","text-anchor":"end","font-size":"12",fill:"#fff","font-weight":"bold"},Vk=["transform"],qk=["x","width"],Jk={x:"0",y:"-3","font-size":"9",fill:"#fff","font-family":"Tahoma, Arial, sans-serif","text-anchor":"middle"},Yk={class:"inventory-dialog"},eb={key:0},tb={key:1},ab={key:2},rb={key:0,class:"dialog-loading"},ob={key:1,class:"dialog-content"},sb={class:"summary-stats"},lb={class:"stat-box stat-green"},nb={class:"stat-value"},ib={class:"stat-box stat-blue"},db={class:"stat-value"},ub={key:0,class:"no-data-section"},cb={key:1,class:"visualization-container"},mb={class:"cylinders-grid"},hb=["height"],pb=["height"],gb=["cy"],fb=["y"],yb=["y"],kb={class:"cylinder-label"},bb={class:"width-value"},xb={class:"summary-stats"},vb={class:"stat-box stat-orange"},wb={class:"stat-value"},_b={class:"stat-box stat-blue"},Cb={class:"stat-value"},Lb={key:0,class:"no-data-section"},Eb={key:1,class:"visualization-container"},Xb={class:"cubes-grid"},Sb=["width","height"],Ab={transform:"translate(10, 10)"},Fb=["width","height"],Mb=["d"],Wb=["d"],Ib=["x","y"],Kb=["x","y"],Pb={class:"cube-label"},Tb={class:"material-name"},Db={class:"summary-stats"},Nb={class:"stat-box stat-purple"},Qb={class:"stat-value"},$b={key:0,class:"no-data-section"},Rb={key:1,class:"visualization-container"},Bb={class:"cubes-grid"},Ob=["width","height"],Ub={transform:"translate(10, 10)"},zb=["width","height"],Zb=["d"],jb=["d"],Hb=["x","y"],Gb={class:"cube-label"},Vb={class:"profile-name"},qb={key:3,class:"no-data"},Jb={class:"cargo-dialog"},Yb={key:0},ex={key:1},tx={key:2},ax={key:0},rx={key:0,class:"dialog-loading"},ox={key:1,class:"dialog-content cargo-content"},sx={key:0,class:"cargo-info-grid"},lx={class:"cargo-info-item"},nx={class:"info-details"},ix={class:"info-value"},dx={class:"cargo-info-item"},ux={class:"info-details"},cx={class:"info-value"},mx={class:"cargo-info-item"},hx={class:"info-details"},px={class:"info-value supplier-name"},gx={key:0,class:"cargo-info-item"},fx={class:"info-details"},yx={class:"info-value"},kx={key:1,class:"cargo-info-item"},bx={class:"info-details"},xx={class:"info-value"},vx={key:2,class:"cargo-info-item"},wx={class:"info-details"},_x={class:"info-value"},Cx={class:"cargo-info-grid"},Lx={class:"cargo-info-item"},Ex={class:"info-details"},Xx={class:"info-value customer-name"},Sx={class:"cargo-info-item"},Ax={class:"info-details"},Fx={class:"info-value"},Mx={key:0,class:"cargo-info-item"},Wx={class:"info-details"},Ix={class:"info-value"},Kx={key:0,class:"reels-section"},Px={class:"reels-grid"},Tx={class:"status-section"},Dx={class:"right-sidebar"},Nx={class:"sidebar-top"},Qx=["disabled"],$x={key:0},Rx={key:1},Bx={class:"sidebar-footer",dir:"ltr"},Ox={style:{"margin-top":"8px","padding-top":"8px","border-top":"1px solid rgba(255,255,255,0.3)"}},Ux={style:{"font-size":"16px",color:"#ffeb3b"}};function zx(e,t,a,l,n,i){const d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",xf,[n.error?((0,o.uX)(),(0,o.CE)("div",vf,(0,s.v_)(n.error),1)):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("div",wf,[...t[26]||(t[26]=[(0,o.Lk)("div",{class:"loading-spinner"},null,-1),(0,o.Lk)("p",null,"در حال بارگذاری نقشه...",-1)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",_f,[((0,o.uX)(),(0,o.CE)("svg",Cf,[t[106]||(t[106]=(0,o.Lk)("rect",{x:"0",y:"0",width:"1700",height:"1000",fill:"#ffffff"},null,-1)),t[107]||(t[107]=(0,o.Lk)("rect",{x:"40",y:"10",width:"1340",height:"773",fill:"none",stroke:"#000","stroke-width":"3"},null,-1)),t[108]||(t[108]=(0,o.Lk)("rect",{x:"0",y:"783",width:"1700",height:"60",fill:"#999",stroke:"#666","stroke-width":"2"},null,-1)),t[109]||(t[109]=(0,o.Lk)("text",{x:"800",y:"818","text-anchor":"middle","font-size":"16","font-weight":"bold",fill:"#fff"},"STREET",-1)),(0,o.Lk)("g",Lf,[(0,o.Lk)("rect",{x:"40",y:"10",width:"200",height:"430",fill:"none",stroke:i.isWarehouseActive("Anbar_Salon_Tolid")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Salon_Tolid")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Salon_Tolid")})},null,10,Ef),t[31]||(t[31]=(0,o.Lk)("text",{x:"140",y:"430","text-anchor":"middle","font-size":"12","font-weight":"bold"},"Anbar Salon Tolid",-1)),t[32]||(t[32]=(0,o.Lk)("rect",{x:"50",y:"15",width:"63",height:"230",fill:"#f5f5f5",stroke:"#000","stroke-width":"2"},null,-1)),(0,o.Lk)("g",{onMouseenter:t[0]||(t[0]=e=>i.showPMDailyProductionTooltip(e,"PM3")),onMouseleave:t[1]||(t[1]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[27]||(t[27]=(0,o.Lk)("rect",{x:"55",y:"20",width:"53",height:"53",fill:"#fff",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Xf,(0,s.v_)(n.todayPm3Count),1)],32),(0,o.Lk)("g",{onMouseenter:t[2]||(t[2]=e=>i.showPMWeeklyProductionTooltip(e,"PM3")),onMouseleave:t[3]||(t[3]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[28]||(t[28]=(0,o.Lk)("rect",{x:"55",y:"187",width:"53",height:"53",fill:"#fff",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Sf,(0,s.v_)(n.pm3Count),1)],32),t[33]||(t[33]=(0,o.Lk)("text",{x:"81",y:"140","text-anchor":"middle","font-size":"12","font-weight":"bold"},"PM3",-1)),t[34]||(t[34]=(0,o.Lk)("rect",{x:"185",y:"15",width:"45",height:"140",fill:"#f5f5f5",stroke:"#000","stroke-width":"2"},null,-1)),(0,o.Lk)("g",{onMouseenter:t[4]||(t[4]=e=>i.showPMDailyProductionTooltip(e,"PM2")),onMouseleave:t[5]||(t[5]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[29]||(t[29]=(0,o.Lk)("rect",{x:"190",y:"20",width:"36",height:"36",fill:"#fff",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Af,(0,s.v_)(n.todayPm2Count),1)],32),(0,o.Lk)("g",{onMouseenter:t[6]||(t[6]=e=>i.showPMWeeklyProductionTooltip(e,"PM2")),onMouseleave:t[7]||(t[7]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[30]||(t[30]=(0,o.Lk)("rect",{x:"190",y:"115",width:"36",height:"36",fill:"#fff",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Ff,(0,s.v_)(n.pm2Count),1)],32),t[35]||(t[35]=(0,o.Lk)("text",{x:"208",y:"90","text-anchor":"middle","font-size":"12","font-weight":"bold"},"PM2",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseCylinders("Anbar_Salon_Tolid"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,onMouseenter:t=>i.showCylinderTooltip(t,e),onMouseleave:t[8]||(t[8]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[e.isFull?((0,o.uX)(),(0,o.CE)("g",Wf,[(0,o.Lk)("text",{x:e.x+(e.hasHalf?e.groupWidth/2:0),y:e.y-14,"text-anchor":"middle","font-size":"6","font-weight":"bold",fill:"#000"},(0,s.v_)(e.width)+"mm × "+(0,s.v_)(e.quotient),9,If),(0,o.Lk)("path",{d:`M ${e.x-e.rx-2},${e.y-4} \n                    L ${e.x-e.rx-2},${e.y-8} \n                    L ${e.x+(e.hasHalf?e.groupWidth:0)+e.rx+2},${e.y-8} \n                    L ${e.x+(e.hasHalf?e.groupWidth:0)+e.rx+2},${e.y-4}`,fill:"none",stroke:"#666","stroke-width":"1"},null,8,Kf)])):(0,o.Q3)("",!0),!e.isFull&&e.showBracket?((0,o.uX)(),(0,o.CE)("g",Pf,[(0,o.Lk)("path",{d:`M ${e.x-e.rx-2},${e.y-4} \n                    L ${e.x-e.rx-2},${e.y-8} \n                    L ${e.x+e.rx+2},${e.y-8} \n                    L ${e.x+e.rx+2},${e.y-4}`,fill:"none",stroke:"#666","stroke-width":"1"},null,8,Tf)])):(0,o.Q3)("",!0),e.isFull?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("text",{key:2,x:e.x,y:e.y-(e.showBracket?12:4),"text-anchor":"middle","font-size":"5",fill:"#000"},"("+(0,s.v_)(e.reelCount)+")",9,Df)),(0,o.Lk)("ellipse",{cx:e.x,cy:e.y+e.height,rx:e.rx,ry:e.ry,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,Nf),(0,o.Lk)("path",{d:`M ${e.x-e.rx},${e.y+e.height} L ${e.x-e.rx},${e.y} L ${e.x+e.rx},${e.y} L ${e.x+e.rx},${e.y+e.height}`,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,Qf),(0,o.Lk)("ellipse",{cx:e.x,cy:e.y,rx:e.rx,ry:e.ry,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,$f),(0,o.Lk)("text",{x:e.x,y:e.y+e.height/2+2,"text-anchor":"middle","font-size":"5",fill:"#000"},(0,s.v_)(e.weight)+"t",9,Rf)],40,Mf))),128))]),t[110]||(t[110]=(0,o.Fv)('<g class="restaurant" data-v-16c3c0d1><rect x="40" y="440" width="200" height="150" fill="none" stroke="#000" stroke-width="2" data-v-16c3c0d1></rect><text x="140" y="520" text-anchor="middle" font-size="12" font-weight="bold" fill="#000" data-v-16c3c0d1>Restaurant</text></g><g class="restaurant" data-v-16c3c0d1><rect x="120" y="600" width="120" height="120" fill="none" stroke="#000" stroke-width="2" data-v-16c3c0d1></rect><text x="180" y="665" text-anchor="middle" font-size="12" font-weight="bold" fill="#000" data-v-16c3c0d1>Otagh Estrahat</text></g>',2)),(0,o.Lk)("g",Bf,[(0,o.Lk)("rect",{x:"240",y:"69",width:"190",height:"50",fill:"none",stroke:i.isWarehouseActive("Anbar_Parvandeh")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Parvandeh")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Parvandeh")})},null,10,Of),t[36]||(t[36]=(0,o.Lk)("text",{x:"335",y:"103","text-anchor":"middle","font-size":"11","font-weight":"bold"},"Anbar Parvandeh",-1))]),(0,o.Lk)("g",Uf,[(0,o.Lk)("rect",{x:"240",y:"119",width:"190",height:"104",fill:"none",stroke:i.isWarehouseActive("Anbar_Koochak")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Koochak")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Koochak")})},null,10,zf),t[37]||(t[37]=(0,o.Fv)('<text x="335" y="210" text-anchor="middle" font-size="11" font-weight="bold" data-v-16c3c0d1>Anbar Koochak</text><g transform="translate(305, 150)" data-v-16c3c0d1><path d="M 0,12 L 35,12 L 35,44 L 0,44 Z" fill="#ddd" stroke="#000" stroke-width="1.5" data-v-16c3c0d1></path><text x="18" y="24" text-anchor="middle" font-size="7" font-weight="bold" data-v-16c3c0d1>Pallet</text><text x="18" y="32" text-anchor="middle" font-size="7" font-weight="bold" data-v-16c3c0d1>A</text><text x="18" y="40" text-anchor="middle" font-size="7" font-weight="bold" data-v-16c3c0d1>22</text><path d="M 0,12 L 12,5 L 47,5 L 35,12 Z" fill="#eee" stroke="#000" stroke-width="1.5" data-v-16c3c0d1></path><path d="M 35,12 L 47,5 L 47,37 L 35,44 Z" fill="#bbb" stroke="#000" stroke-width="1.5" data-v-16c3c0d1></path></g>',2))]),(0,o.Lk)("g",Zf,[(0,o.Lk)("path",{d:"M 710,69 L 240,69 L 240,10 L 900,10 L 900,69",fill:"none",stroke:i.isWarehouseActive("Anbar_Khamir_Ghadim")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Khamir_Ghadim")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Khamir_Ghadim")})},null,10,jf),(0,o.Lk)("path",{d:"M 710,69 L 710,160 L 900,160 L 900,69",fill:"none",stroke:i.isWarehouseActive("Anbar_Khamir_Ghadim")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Khamir_Ghadim")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Khamir_Ghadim")})},null,10,Hf),t[41]||(t[41]=(0,o.Fv)('<path d="M 710,160 L 710,190 L 900,190 L 900,160" fill="none" stroke="#000" stroke-width="2" data-v-16c3c0d1></path><path d="M 710,190 L 710,223 L 900,223 L 900,190" fill="none" stroke="#000" stroke-width="2" data-v-16c3c0d1></path><ellipse cx="525" cy="40" rx="90" ry="25" fill="#fff0d5" stroke="#000" stroke-width="1.5" data-v-16c3c0d1></ellipse><text x="540" y="43" text-anchor="middle" font-size="12" font-weight="bold" data-v-16c3c0d1>Anbar Khamir Ghadim</text><text x="800" y="175" text-anchor="middle" font-size="11" font-weight="bold" data-v-16c3c0d1>Water Station</text><text x="800" y="210" text-anchor="middle" font-size="11" font-weight="bold" data-v-16c3c0d1>Gas Station</text><rect x="270" y="10" width="100" height="30" fill="#fff" stroke="#000" stroke-width="1.5" data-v-16c3c0d1></rect><text x="320" y="30" text-anchor="middle" font-size="11" font-weight="bold" data-v-16c3c0d1>Laboratory</text>',8)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseAkhalPacks("Anbar_Khamir_Ghadim"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,transform:`translate(${e.x}, ${e.y})`,onMouseenter:t=>i.showAkhalTooltip(t,e),onMouseleave:t[9]||(t[9]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[38]||(t[38]=(0,o.Lk)("path",{d:"M 0,12 L 35,12 L 35,44 L 0,44 Z",fill:"#ddd",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Vf,(0,s.v_)(e.kind),1),(0,o.Lk)("text",qf,(0,s.v_)(e.weight)+"t",1),t[39]||(t[39]=(0,o.Lk)("path",{d:"M 0,12 L 12,5 L 47,5 L 35,12 Z",fill:"#eee",stroke:"#000","stroke-width":"1.5"},null,-1)),t[40]||(t[40]=(0,o.Lk)("path",{d:"M 35,12 L 47,5 L 47,37 L 35,44 Z",fill:"#bbb",stroke:"#000","stroke-width":"1.5"},null,-1))],40,Gf))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseCylinders("Anbar_Khamir_Ghadim"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,onMouseenter:t=>i.showCylinderTooltip(t,e),onMouseleave:t[10]||(t[10]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[e.isFull?((0,o.uX)(),(0,o.CE)("g",Yf,[(0,o.Lk)("text",{x:e.x+(e.hasHalf?e.groupWidth/2:0),y:e.y-14,"text-anchor":"middle","font-size":"6","font-weight":"bold",fill:"#000"},(0,s.v_)(e.width)+"mm × "+(0,s.v_)(e.quotient),9,ey),(0,o.Lk)("path",{d:`M ${e.x-e.rx-2},${e.y-4} \n                    L ${e.x-e.rx-2},${e.y-8} \n                    L ${e.x+(e.hasHalf?e.groupWidth:0)+e.rx+2},${e.y-8} \n                    L ${e.x+(e.hasHalf?e.groupWidth:0)+e.rx+2},${e.y-4}`,fill:"none",stroke:"#666","stroke-width":"1"},null,8,ty)])):(0,o.Q3)("",!0),!e.isFull&&e.showBracket?((0,o.uX)(),(0,o.CE)("g",ay,[(0,o.Lk)("path",{d:`M ${e.x-e.rx-2},${e.y-4} \n                    L ${e.x-e.rx-2},${e.y-8} \n                    L ${e.x+e.rx+2},${e.y-8} \n                    L ${e.x+e.rx+2},${e.y-4}`,fill:"none",stroke:"#666","stroke-width":"1"},null,8,ry)])):(0,o.Q3)("",!0),e.isFull?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("text",{key:2,x:e.x,y:e.y-(e.showBracket?12:4),"text-anchor":"middle","font-size":"5",fill:"#000"},"("+(0,s.v_)(e.reelCount)+")",9,oy)),(0,o.Lk)("ellipse",{cx:e.x,cy:e.y+e.height,rx:e.rx,ry:e.ry,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,sy),(0,o.Lk)("path",{d:`M ${e.x-e.rx},${e.y+e.height} L ${e.x-e.rx},${e.y} L ${e.x+e.rx},${e.y} L ${e.x+e.rx},${e.y+e.height}`,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,ly),(0,o.Lk)("ellipse",{cx:e.x,cy:e.y,rx:e.rx,ry:e.ry,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,ny),(0,o.Lk)("text",{x:e.x,y:e.y+e.height/2+2,"text-anchor":"middle","font-size":"5",fill:"#000"},(0,s.v_)(e.weight)+"t",9,iy)],40,Jf))),128))]),(0,o.Lk)("g",dy,[(0,o.Lk)("rect",{x:"515",y:"75",width:"70",height:"60",fill:i.isWarehouseActive("Anbar_Muhavateh_Homayoun")?"rgba(255, 68, 68, 0.1)":"none",stroke:i.isWarehouseActive("Anbar_Muhavateh_Homayoun")?"#ff4444":"transparent","stroke-width":i.isWarehouseActive("Anbar_Muhavateh_Homayoun")?3:0,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Muhavateh_Homayoun")})},null,10,uy),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseAkhalPacks("Anbar_Muhavateh_Homayoun"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,transform:`translate(${e.x}, ${e.y})`,onMouseenter:t=>i.showAkhalTooltip(t,e),onMouseleave:t[11]||(t[11]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[42]||(t[42]=(0,o.Lk)("path",{d:"M 0,12 L 35,12 L 35,44 L 0,44 Z",fill:"#ddd",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",my,(0,s.v_)(e.kind),1),(0,o.Lk)("text",hy,(0,s.v_)(e.weight)+"t",1),t[43]||(t[43]=(0,o.Lk)("path",{d:"M 0,12 L 12,5 L 47,5 L 35,12 Z",fill:"#eee",stroke:"#000","stroke-width":"1.5"},null,-1)),t[44]||(t[44]=(0,o.Lk)("path",{d:"M 35,12 L 47,5 L 47,37 L 35,44 Z",fill:"#bbb",stroke:"#000","stroke-width":"1.5"},null,-1))],40,cy))),128))]),(0,o.Lk)("g",py,[(0,o.Lk)("rect",{x:"320",y:"490",width:"60",height:"150",fill:"#fff",stroke:i.isWeightStation1Active()?"#ff8c00":"#000","stroke-width":i.isWeightStation1Active()?3:2,class:(0,s.C4)({"station-active":i.isWeightStation1Active()})},null,10,gy),t[45]||(t[45]=(0,o.Lk)("text",{x:"350",y:"565","text-anchor":"middle","font-size":"11","font-weight":"bold"},"Weight",-1)),t[46]||(t[46]=(0,o.Lk)("text",{x:"350",y:"585","text-anchor":"middle","font-size":"11","font-weight":"bold"},"Station",-1)),t[47]||(t[47]=(0,o.Lk)("text",{x:"350",y:"605","text-anchor":"middle","font-size":"11","font-weight":"bold"},"1",-1))]),(0,o.Lk)("g",fy,[t[48]||(t[48]=(0,o.Lk)("rect",{x:"710",y:"345",width:"190",height:"55",fill:"none",stroke:"#000","stroke-width":"2"},null,-1)),(0,o.Lk)("rect",{x:"710",y:"400",width:"190",height:"210",fill:"none",stroke:i.isWarehouseActive("Anbar_Sangin")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Sangin")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Sangin")})},null,10,yy),t[49]||(t[49]=(0,o.Fv)('<text x="800" y="380" text-anchor="middle" font-size="12" font-weight="bold" data-v-16c3c0d1>Anbar Abzar</text><text x="800" y="600" text-anchor="middle" font-size="12" font-weight="bold" data-v-16c3c0d1>Anbar Sangin</text><g class="chemical-sacks" transform="translate(730, 400)" data-v-16c3c0d1><g transform="translate(33, 40)" data-v-16c3c0d1><rect x="0" y="0" width="20" height="20" rx="3" fill="#f5e6dc" stroke="#5D2906" stroke-width="1.5" data-v-16c3c0d1></rect><path d="M 0,0 L 10,-10 L 25,-10 L 20,0 Z" fill="#fabc9f" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><path d="M 20,0 L 25,-10 L 25,15 L 20,20 Z" fill="#a3a19e" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><text x="15" y="28" text-anchor="middle" font-size="6" fill="#fff" font-weight="bold" data-v-16c3c0d1>CHEM</text></g><g transform="translate(58, 40)" data-v-16c3c0d1><rect x="0" y="0" width="20" height="20" rx="3" fill="#f5e6dc" stroke="#5D2906" stroke-width="1.5" data-v-16c3c0d1></rect><path d="M 0,0 L 10,-10 L 25,-10 L 20,0 Z" fill="#fabc9f" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><path d="M 20,0 L 25,-10 L 25,15 L 20,20 Z" fill="#a3a19e" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><text x="15" y="28" text-anchor="middle" font-size="6" fill="#fff" font-weight="bold" data-v-16c3c0d1>CHEM</text></g><g transform="translate(83, 40)" data-v-16c3c0d1><rect x="0" y="0" width="20" height="20" rx="3" fill="#f5e6dc" stroke="#5D2906" stroke-width="1.5" data-v-16c3c0d1></rect><path d="M 0,0 L 10,-10 L 25,-10 L 20,0 Z" fill="#fabc9f" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><path d="M 20,0 L 25,-10 L 25,15 L 20,20 Z" fill="#a3a19e" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><text x="15" y="28" text-anchor="middle" font-size="6" fill="#fff" font-weight="bold" data-v-16c3c0d1>CHEM</text></g><g transform="translate(50, 20)" data-v-16c3c0d1><rect x="0" y="0" width="20" height="20" rx="3" fill="#fabc9f" stroke="#5D2906" stroke-width="1.5" data-v-16c3c0d1></rect><path d="M 0,0 L 10,-10 L 25,-10 L 20,0 Z" fill="#CD853F" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><path d="M 20,0 L 25,-10 L 25,15 L 20,20 Z" fill="#f5e6dc" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><text x="15" y="28" text-anchor="middle" font-size="6" fill="#fff" font-weight="bold" data-v-16c3c0d1>CHEM</text></g><g transform="translate(70, 20)" data-v-16c3c0d1><rect x="0" y="0" width="20" height="20" rx="3" fill="#fabc9f" stroke="#5D2906" stroke-width="1.5" data-v-16c3c0d1></rect><path d="M 0,0 L 10,-10 L 25,-10 L 20,0 Z" fill="#CD853F" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><path d="M 20,0 L 25,-10 L 25,15 L 20,20 Z" fill="#f5e6dc" stroke="#5D2906" stroke-width="1" data-v-16c3c0d1></path><text x="15" y="28" text-anchor="middle" font-size="6" fill="#fff" font-weight="bold" data-v-16c3c0d1>CHEM</text></g></g>',3)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseCylinders("Anbar_Sangin"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,onMouseenter:t=>i.showCylinderTooltip(t,e),onMouseleave:t[12]||(t[12]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[e.isFull?((0,o.uX)(),(0,o.CE)("g",by,[(0,o.Lk)("text",{x:e.x+(e.hasHalf?e.groupWidth/2:0),y:e.y-14,"text-anchor":"middle","font-size":"6","font-weight":"bold",fill:"#000"},(0,s.v_)(e.width)+"mm × "+(0,s.v_)(e.quotient),9,xy),(0,o.Lk)("path",{d:`M ${e.x-e.rx-2},${e.y-4} \n                    L ${e.x-e.rx-2},${e.y-8} \n                    L ${e.x+(e.hasHalf?e.groupWidth:0)+e.rx+2},${e.y-8} \n                    L ${e.x+(e.hasHalf?e.groupWidth:0)+e.rx+2},${e.y-4}`,fill:"none",stroke:"#666","stroke-width":"1"},null,8,vy)])):(0,o.Q3)("",!0),!e.isFull&&e.showBracket?((0,o.uX)(),(0,o.CE)("g",wy,[(0,o.Lk)("path",{d:`M ${e.x-e.rx-2},${e.y-4} \n                    L ${e.x-e.rx-2},${e.y-8} \n                    L ${e.x+e.rx+2},${e.y-8} \n                    L ${e.x+e.rx+2},${e.y-4}`,fill:"none",stroke:"#666","stroke-width":"1"},null,8,_y)])):(0,o.Q3)("",!0),e.isFull?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("text",{key:2,x:e.x,y:e.y-(e.showBracket?12:4),"text-anchor":"middle","font-size":"5",fill:"#000"},"("+(0,s.v_)(e.reelCount)+")",9,Cy)),(0,o.Lk)("ellipse",{cx:e.x,cy:e.y+e.height,rx:e.rx,ry:e.ry,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,Ly),(0,o.Lk)("path",{d:`M ${e.x-e.rx},${e.y+e.height} L ${e.x-e.rx},${e.y} L ${e.x+e.rx},${e.y} L ${e.x+e.rx},${e.y+e.height}`,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,Ey),(0,o.Lk)("ellipse",{cx:e.x,cy:e.y,rx:e.rx,ry:e.ry,fill:"#f3dab0",stroke:"#000","stroke-width":"1.5"},null,8,Xy),(0,o.Lk)("text",{x:e.x,y:e.y+e.height/2+2,"text-anchor":"middle","font-size":"5",fill:"#000"},(0,s.v_)(e.weight)+"t",9,Sy)],40,ky))),128))]),t[111]||(t[111]=(0,o.Fv)('<g class="qc-area" data-v-16c3c0d1><rect x="710" y="610" width="190" height="110" fill="#fff" stroke="#000" stroke-width="2" data-v-16c3c0d1></rect><text x="800" y="670" text-anchor="middle" font-size="13" font-weight="bold" data-v-16c3c0d1>QC</text></g><g class="roads" data-v-16c3c0d1><ellipse cx="480" cy="520" rx="10" ry="175" fill="#c8e6c9" stroke="#4caf50" stroke-width="2" data-v-16c3c0d1></ellipse><ellipse cx="950" cy="520" rx="10" ry="175" fill="#c8e6c9" stroke="#4caf50" stroke-width="2" data-v-16c3c0d1></ellipse><ellipse cx="950" cy="117.5" rx="10" ry="106.7" fill="#c8e6c9" stroke="#4caf50" stroke-width="2" data-v-16c3c0d1></ellipse></g><g class="workflow-path" data-v-16c3c0d1><g stroke="#4caf50" stroke-width="4" stroke-dasharray="12,8" opacity="0.5" fill="none" class="path-animation" data-v-16c3c0d1><line x1="350" y1="760" x2="350" y2="260" data-v-16c3c0d1></line><line x1="350" y1="260" x2="650" y2="260" data-v-16c3c0d1></line><line x1="650" y1="260" x2="650" y2="715" data-v-16c3c0d1></line><line x1="650" y1="715" x2="350" y2="715" data-v-16c3c0d1></line><line x1="350" y1="715" x2="350" y2="760" data-v-16c3c0d1></line><line x1="650" y1="260" x2="1050" y2="260" data-v-16c3c0d1></line><line x1="1050" y1="260" x2="1050" y2="410" data-v-16c3c0d1></line><line x1="1050" y1="410" x2="1140" y2="410" data-v-16c3c0d1></line><line x1="1140" y1="410" x2="1050" y2="410" data-v-16c3c0d1></line><line x1="1050" y1="410" x2="1050" y2="724" data-v-16c3c0d1></line><line x1="1050" y1="724" x2="1050" y2="760" data-v-16c3c0d1></line><line x1="1050" y1="760" x2="1050" y2="820" data-v-16c3c0d1></line><line x1="1050" y1="820" x2="0" y2="820" data-v-16c3c0d1></line></g><g stroke="#04467c" stroke-width="4" stroke-dasharray="12,8" opacity="0.5" fill="none" class="path-animation" data-v-16c3c0d1><line x1="350" y1="760" x2="350" y2="670" data-v-16c3c0d1></line><line x1="350" y1="670" x2="350" y2="580" data-v-16c3c0d1></line><line x1="350" y1="580" x2="350" y2="465" data-v-16c3c0d1></line><line x1="350" y1="465" x2="280" y2="465" data-v-16c3c0d1></line><line x1="280" y1="465" x2="280" y2="280" data-v-16c3c0d1></line><line x1="280" y1="280" x2="1110" y2="280" data-v-16c3c0d1></line><line x1="1110" y1="280" x2="1110" y2="410" data-v-16c3c0d1></line><line x1="1110" y1="410" x2="1070" y2="410" data-v-16c3c0d1></line><line x1="1070" y1="410" x2="1070" y2="724" data-v-16c3c0d1></line><line x1="1070" y1="724" x2="1070" y2="760" data-v-16c3c0d1></line><line x1="1070" y1="760" x2="1070" y2="820" data-v-16c3c0d1></line><line x1="1070" y1="820" x2="100" y2="820" data-v-16c3c0d1></line></g><g stroke="#ff0000" stroke-width="4" stroke-dasharray="8,6" opacity="0.5" fill="none" data-v-16c3c0d1><line x1="1050" y1="760" x2="1050" y2="820" data-v-16c3c0d1></line><line x1="1050" y1="820" x2="1400" y2="820" data-v-16c3c0d1></line><line x1="1400" y1="820" x2="1400" y2="650" data-v-16c3c0d1></line></g></g>',3)),(0,o.Lk)("rect",{x:"975",y:"15",width:"300",height:"50",fill:i.isWarehouseActive("Anbar_Muhvateh_Kardan")?"rgba(255, 68, 68, 0.1)":"none",stroke:i.isWarehouseActive("Anbar_Muhvateh_Kardan")?"#ff4444":"transparent","stroke-width":i.isWarehouseActive("Anbar_Muhvateh_Kardan")?3:0,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Muhvateh_Kardan")})},null,10,Ay),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseAkhalPacks("Anbar_Muhvateh_Kardan"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,transform:`translate(${e.x}, ${e.y})`,onMouseenter:t=>i.showAkhalTooltip(t,e),onMouseleave:t[13]||(t[13]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[50]||(t[50]=(0,o.Lk)("path",{d:"M 0,12 L 35,12 L 35,44 L 0,44 Z",fill:"#ddd",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",My,(0,s.v_)(e.kind),1),(0,o.Lk)("text",Wy,(0,s.v_)(e.weight)+"t",1),t[51]||(t[51]=(0,o.Lk)("path",{d:"M 0,12 L 12,5 L 47,5 L 35,12 Z",fill:"#eee",stroke:"#000","stroke-width":"1.5"},null,-1)),t[52]||(t[52]=(0,o.Lk)("path",{d:"M 35,12 L 47,5 L 47,37 L 35,44 Z",fill:"#bbb",stroke:"#000","stroke-width":"1.5"},null,-1))],40,Fy))),128)),(0,o.Lk)("g",Iy,[(0,o.Lk)("rect",{x:"1170",y:"70",width:"210",height:"220",fill:"none",stroke:i.isWarehouseActive("Anbar_Khamir_Kordan")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Khamir_Kordan")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Khamir_Kordan")})},null,10,Ky),t[58]||(t[58]=(0,o.Fv)('<path d="M 1170,290 L 1170,660 L 1380,660 L 1380,290" fill="none" stroke="#000" stroke-width="1.5" data-v-16c3c0d1></path><ellipse cx="1280" cy="125" rx="90" ry="40" fill="#fff0d5" stroke="#000" stroke-width="2" data-v-16c3c0d1></ellipse><text x="1280" y="115" text-anchor="middle" font-size="12" font-weight="bold" data-v-16c3c0d1>Anbar</text><text x="1280" y="130" text-anchor="middle" font-size="12" font-weight="bold" data-v-16c3c0d1>Khamir</text><text x="1280" y="145" text-anchor="middle" font-size="12" font-weight="bold" data-v-16c3c0d1>KORDAN</text>',5)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseAkhalPacks("Anbar_Khamir_Kordan"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,transform:`translate(${e.x}, ${e.y})`,onMouseenter:t=>i.showAkhalTooltip(t,e),onMouseleave:t[14]||(t[14]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[53]||(t[53]=(0,o.Lk)("path",{d:"M 0,12 L 35,12 L 35,44 L 0,44 Z",fill:"#ddd",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Ty,(0,s.v_)(e.kind),1),(0,o.Lk)("text",Dy,(0,s.v_)(e.weight)+"t",1),t[54]||(t[54]=(0,o.Lk)("path",{d:"M 0,12 L 12,5 L 47,5 L 35,12 Z",fill:"#eee",stroke:"#000","stroke-width":"1.5"},null,-1)),t[55]||(t[55]=(0,o.Lk)("path",{d:"M 35,12 L 47,5 L 47,37 L 35,44 Z",fill:"#bbb",stroke:"#000","stroke-width":"1.5"},null,-1))],40,Py))),128)),t[59]||(t[59]=(0,o.Lk)("rect",{x:"1290",y:"320",width:"55",height:"300",fill:"#f5f5f5",stroke:"#000","stroke-width":"2"},null,-1)),(0,o.Lk)("g",{onMouseenter:t[15]||(t[15]=e=>i.showPMDailyProductionTooltip(e,"PM4")),onMouseleave:t[16]||(t[16]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[56]||(t[56]=(0,o.Lk)("rect",{x:"1295",y:"325",width:"45",height:"45",fill:"#fff",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Ny,(0,s.v_)(n.todayPm4Count),1)],32),(0,o.Lk)("g",{onMouseenter:t[17]||(t[17]=e=>i.showPMWeeklyProductionTooltip(e,"PM4")),onMouseleave:t[18]||(t[18]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[57]||(t[57]=(0,o.Lk)("rect",{x:"1295",y:"570",width:"45",height:"45",fill:"#fff",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Qy,(0,s.v_)(n.pm4Count),1)],32),t[60]||(t[60]=(0,o.Lk)("text",{x:"1320",y:"470","text-anchor":"middle","font-size":"12","font-weight":"bold"},"PM4",-1))]),(0,o.Lk)("g",$y,[(0,o.Lk)("rect",{x:"1170",y:"670",width:"100",height:"80",fill:"#fff",stroke:i.isOfficeActive()?"#0096ff":"#000","stroke-width":i.isOfficeActive()?3:2,class:(0,s.C4)({"station-active":i.isOfficeActive()})},null,10,Ry),t[61]||(t[61]=(0,o.Lk)("text",{x:"1224",y:"715","text-anchor":"middle","font-size":"12","font-weight":"bold"},"Office",-1))]),(0,o.Lk)("g",By,[(0,o.Lk)("rect",{x:"1110",y:"320",width:"60",height:"150",fill:"#fff",stroke:i.isWeightStation2Active()?"#ff8c00":"#000","stroke-width":i.isWeightStation2Active()?3:2,class:(0,s.C4)({"station-active":i.isWeightStation2Active()})},null,10,Oy),t[62]||(t[62]=(0,o.Lk)("text",{x:"1140",y:"395","text-anchor":"middle","font-size":"11","font-weight":"bold"},"Weight",-1)),t[63]||(t[63]=(0,o.Lk)("text",{x:"1140",y:"415","text-anchor":"middle","font-size":"11","font-weight":"bold"},"Station",-1)),t[64]||(t[64]=(0,o.Lk)("text",{x:"1140",y:"435","text-anchor":"middle","font-size":"11","font-weight":"bold"},"2",-1))]),(0,o.Lk)("g",Uy,[(0,o.Lk)("rect",{x:"1380",y:"460",width:"80",height:"323",fill:"none",stroke:i.isWarehouseActive("Anbar_PAK")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_PAK")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_PAK")})},null,10,zy),t[68]||(t[68]=(0,o.Lk)("text",{x:"1430",y:"620","text-anchor":"middle","font-size":"12","font-weight":"bold",transform:"rotate(90 1410 620)"},"Anbar PAK",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseAkhalPacks("Anbar_PAK"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,transform:`translate(${e.x}, ${e.y})`,onMouseenter:t=>i.showAkhalTooltip(t,e),onMouseleave:t[19]||(t[19]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[65]||(t[65]=(0,o.Lk)("path",{d:"M 0,12 L 35,12 L 35,44 L 0,44 Z",fill:"#ddd",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",jy,(0,s.v_)(e.kind),1),(0,o.Lk)("text",Hy,(0,s.v_)(e.weight)+"t",1),t[66]||(t[66]=(0,o.Lk)("path",{d:"M 0,12 L 12,5 L 47,5 L 35,12 Z",fill:"#eee",stroke:"#000","stroke-width":"1.5"},null,-1)),t[67]||(t[67]=(0,o.Lk)("path",{d:"M 35,12 L 47,5 L 47,37 L 35,44 Z",fill:"#bbb",stroke:"#000","stroke-width":"1.5"},null,-1))],40,Zy))),128))]),(0,o.Lk)("g",Gy,[(0,o.Lk)("rect",{x:"40",y:"843",width:"320",height:"125",fill:"none",stroke:i.isWarehouseActive("Anbar_Akhal")?"#ff4444":"#000","stroke-width":i.isWarehouseActive("Anbar_Akhal")?4:2,class:(0,s.C4)({"warehouse-active":i.isWarehouseActive("Anbar_Akhal")})},null,10,Vy),t[72]||(t[72]=(0,o.Lk)("text",{x:"200",y:"860","text-anchor":"middle","font-size":"12","font-weight":"bold"},"Anbar Akhal",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.getWarehouseAkhalPacks("Anbar_Akhal"),e=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,transform:`translate(${e.x}, ${e.y})`,onMouseenter:t=>i.showAkhalTooltip(t,e),onMouseleave:t[20]||(t[20]=(...e)=>i.hideTooltip&&i.hideTooltip(...e)),style:{cursor:"pointer"}},[t[69]||(t[69]=(0,o.Lk)("path",{d:"M 0,12 L 35,12 L 35,44 L 0,44 Z",fill:"#ddd",stroke:"#000","stroke-width":"1.5"},null,-1)),(0,o.Lk)("text",Jy,(0,s.v_)(e.kind),1),(0,o.Lk)("text",Yy,(0,s.v_)(e.weight)+"t",1),t[70]||(t[70]=(0,o.Lk)("path",{d:"M 0,12 L 12,5 L 47,5 L 35,12 Z",fill:"#eee",stroke:"#000","stroke-width":"1.5"},null,-1)),t[71]||(t[71]=(0,o.Lk)("path",{d:"M 35,12 L 47,5 L 47,37 L 35,44 Z",fill:"#bbb",stroke:"#000","stroke-width":"1.5"},null,-1))],40,qy))),128))]),t[112]||(t[112]=(0,o.Fv)('<g class="entrances" data-v-16c3c0d1><rect x="290" y="760" width="120" height="42" fill="#fff" stroke="#000" stroke-width="2" data-v-16c3c0d1></rect><text x="350" y="785" text-anchor="middle" font-size="12" data-v-16c3c0d1>Entrance</text><rect x="1010" y="760" width="120" height="42" fill="#fff" stroke="#000" stroke-width="2" data-v-16c3c0d1></rect><text x="1070" y="785" text-anchor="middle" font-size="12" data-v-16c3c0d1>Entrance</text></g>',1)),(0,o.Lk)("g",ek,[i.isStaticForkliftHidden(1)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("g",tk,[...t[73]||(t[73]=[(0,o.Lk)("text",{x:"0",y:"0","font-size":"30","text-anchor":"middle"},"🚜",-1),(0,o.Lk)("circle",{cx:"-12",cy:"-13",r:"5",fill:"#4caf50",stroke:"#fff","stroke-width":"2"},null,-1),(0,o.Lk)("text",{x:"0",y:"20","text-anchor":"middle","font-size":"8",fill:"#4caf50","font-weight":"bold"},"READY",-1)])])),i.isStaticForkliftHidden(2)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("g",ak,[...t[74]||(t[74]=[(0,o.Lk)("text",{x:"0",y:"0","font-size":"30","text-anchor":"middle"},"🚜",-1),(0,o.Lk)("circle",{cx:"-12",cy:"-13",r:"5",fill:"#4caf50",stroke:"#fff","stroke-width":"2"},null,-1),(0,o.Lk)("text",{x:"0",y:"20","text-anchor":"middle","font-size":"8",fill:"#4caf50","font-weight":"bold"},"READY",-1)])])),i.isStaticForkliftHidden(3)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("g",rk,[...t[75]||(t[75]=[(0,o.Lk)("text",{x:"0",y:"0","font-size":"30","text-anchor":"middle"},"🚜",-1),(0,o.Lk)("circle",{cx:"-12",cy:"-13",r:"5",fill:"#4caf50",stroke:"#fff","stroke-width":"2"},null,-1),(0,o.Lk)("text",{x:"0",y:"20","text-anchor":"middle","font-size":"8",fill:"#4caf50","font-weight":"bold"},"READY",-1)])]))]),n.activeWarehouseMovement&&i.getWarehouseForkliftAnimPosition()?((0,o.uX)(),(0,o.CE)("g",{key:0,transform:`translate(${i.getWarehouseForkliftAnimPosition().x}, ${i.getWarehouseForkliftAnimPosition().y})`,class:"warehouse-forklift-animated"},[t[77]||(t[77]=(0,o.Lk)("text",{x:"0",y:"0","font-size":"30","text-anchor":"middle"},"🚜",-1)),(0,o.bo)((0,o.Lk)("g",null,[i.shouldShowReel("warehouse")?((0,o.uX)(),(0,o.CE)("g",sk,[...t[76]||(t[76]=[(0,o.Fv)('<ellipse cx="10" cy="6" rx="5" ry="2" fill="#f3dab0" stroke="#000" stroke-width="1" data-v-16c3c0d1></ellipse><rect x="5" y="-10" width="10" height="16" fill="#f3dab0" stroke="none" data-v-16c3c0d1></rect><line x1="5" y1="-10" x2="5" y2="6" stroke="#000" stroke-width="1" data-v-16c3c0d1></line><line x1="15" y1="-10" x2="15" y2="6" stroke="#000" stroke-width="1" data-v-16c3c0d1></line><ellipse cx="10" cy="-10" rx="5" ry="2" fill="#f3dab0" stroke="#000" stroke-width="1" data-v-16c3c0d1></ellipse><line x1="5" y1="8" x2="20" y2="8" stroke="#000" stroke-width="3" data-v-16c3c0d1></line>',6)])])):((0,o.uX)(),(0,o.CE)("text",lk,"📦"))],512),[[r.aG,i.warehouseForkliftHasCargo()]]),t[78]||(t[78]=(0,o.Lk)("circle",{cx:"-12",cy:"-13",r:"8",fill:"#2196f3",stroke:"#fff","stroke-width":"2"},null,-1)),(0,o.Lk)("text",nk,(0,s.v_)(n.activeWarehouseMovement.currentTrip)+"/"+(0,s.v_)(n.activeWarehouseMovement.quantity),1)],8,ok)):(0,o.Q3)("",!0),(0,o.Lk)("g",ik,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.warehouseNames,e=>((0,o.uX)(),(0,o.CE)("g",{key:e,transform:`translate(${n.warehouseBadgePositions[e].x}, ${n.warehouseBadgePositions[e].y})`},[(0,o.Lk)("g",{class:"clickable-circle",onClick:t=>i.openProductsDialog(e)},[t[79]||(t[79]=(0,o.Lk)("circle",{cx:"0",cy:"0",r:"15",fill:"#4CAF50",stroke:"#fff","stroke-width":"2.5",opacity:"0.95"},null,-1)),(0,o.Lk)("text",ck,(0,s.v_)(i.formatWeight(i.getWarehouseProductsWeight(e))),1),t[80]||(t[80]=(0,o.Lk)("text",{x:"0",y:"8","text-anchor":"middle","font-size":"7",fill:"#fff",opacity:"0.9"}," Products ",-1))],8,uk),(0,o.Lk)("g",{class:"clickable-circle",onClick:t=>i.openRawMaterialsDialog(e)},[t[81]||(t[81]=(0,o.Lk)("circle",{cx:"30",cy:"0",r:"15",fill:"#FF9800",stroke:"#fff","stroke-width":"2.5",opacity:"0.95"},null,-1)),(0,o.Lk)("text",hk,(0,s.v_)(i.formatWeight(i.getWarehouseRawMaterialsWeight(e))),1),t[82]||(t[82]=(0,o.Lk)("text",{x:"30",y:"8","text-anchor":"middle","font-size":"7",fill:"#fff",opacity:"0.9"}," Raw Mat. ",-1))],8,mk),(0,o.Lk)("title",null,(0,s.v_)(i.formatWarehouseName(e))+" Products: "+(0,s.v_)((i.getWarehouseProductsWeight(e)||0).toFixed(2))+" ton Raw Materials: "+(0,s.v_)((i.getWarehouseRawMaterialsWeight(e)||0).toFixed(2))+" ton Total: "+(0,s.v_)((i.getWarehouseWeight(e)||0).toFixed(2))+" ton",1)],8,dk))),128))]),(0,o.Lk)("g",pk,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.activeShipments.filter(e=>!n.truckAnimations[e.id]?.exited),(e,a)=>((0,o.uX)(),(0,o.CE)("g",{key:e.id,style:(0,s.Tr)({transform:`translate(${i.getAnimatedTruckPosition(e).x}px, ${i.getAnimatedTruckPosition(e).y}px)`}),class:"truck-animated"},[t[92]||(t[92]=(0,o.eW)(" -63, -49 ",-1)),(0,o.Lk)("g",{transform:`translate(${-120.4*(n.truckAnimations[e.id]?.flipX||1)}, -43.75) scale(${.7*(n.truckAnimations[e.id]?.flipX||1)}, 0.7)`},[(0,o.Lk)("g",{transform:`rotate(${i.getAnimatedTruckRotation(e)}, 172, 62.5)`},["Registered"===e.status||"LoadedUnloaded"===e.status?((0,o.uX)(),(0,o.CE)("g",yk,[(0,o.Lk)("ellipse",{cx:"135",cy:"95",rx:"30",ry:"8",fill:"Incoming"===e.shipment_type?"#4caf50":"#2196f3",class:"trail-pulse"},null,8,kk),(0,o.Lk)("ellipse",{cx:"155",cy:"95",rx:"20",ry:"6",fill:"Incoming"===e.shipment_type?"#4caf50":"#2196f3",class:"trail-pulse",style:{"animation-delay":"0.2s"}},null,8,bk),(0,o.Lk)("ellipse",{cx:"170",cy:"95",rx:"15",ry:"4",fill:"Incoming"===e.shipment_type?"#4caf50":"#2196f3",class:"trail-pulse",style:{"animation-delay":"0.4s"}},null,8,xk)])):(0,o.Q3)("",!0),t[86]||(t[86]=(0,o.Lk)("ellipse",{cx:"90",cy:"93",rx:"80",ry:"10",fill:"#00000030"},null,-1)),(0,o.Lk)("rect",{x:"5",y:"45",width:"105",height:"35",fill:"Incoming"===e.shipment_type?"#e8e8e8":"#f0f0f0",stroke:"#333","stroke-width":"2",rx:"2"},null,8,vk),(0,o.Lk)("path",{d:"M 5,45 L -3,38 L -3,73 L 5,80 Z",fill:"Incoming"===e.shipment_type?"#d0d0d0":"#dadada",stroke:"#333","stroke-width":"2"},null,8,wk),t[87]||(t[87]=(0,o.Fv)('<line x1="10" y1="38" x2="10" y2="80" stroke="#999" stroke-width="1.5" opacity="0.5" data-v-16c3c0d1></line><line x1="30" y1="38" x2="30" y2="80" stroke="#999" stroke-width="1.5" opacity="0.5" data-v-16c3c0d1></line><line x1="50" y1="38" x2="50" y2="80" stroke="#999" stroke-width="1.5" opacity="0.5" data-v-16c3c0d1></line><line x1="70" y1="38" x2="70" y2="80" stroke="#999" stroke-width="1.5" opacity="0.5" data-v-16c3c0d1></line><line x1="90" y1="38" x2="90" y2="80" stroke="#999" stroke-width="1.5" opacity="0.5" data-v-16c3c0d1></line>',5)),(0,o.Lk)("rect",{x:"5",y:"43",width:"105",height:"3",fill:"Incoming"===e.shipment_type?"#4caf50":"#2196f3",stroke:"#222","stroke-width":"1"},null,8,_k),(0,o.Lk)("rect",{x:"5",y:"80",width:"105",height:"3",fill:"Incoming"===e.shipment_type?"#4caf50":"#2196f3",stroke:"#222","stroke-width":"1"},null,8,Ck),i.truckHasCargo(e)?((0,o.uX)(),(0,o.CE)("g",{key:1,class:"cargo-clickable",onClick:t=>i.openCargoDialog(e),style:{cursor:"pointer"}},[(0,o.Lk)("g",Ek,[t[83]||(t[83]=(0,o.Fv)('<rect x="0" y="0" width="60" height="50" fill="#D2691E" stroke="#8B4513" stroke-width="3" data-v-16c3c0d1></rect><path d="M 60,0 L 68,-6 L 68,-6 L 60,0 Z" fill="#F4A460" stroke="#8B4513" stroke-width="3" data-v-16c3c0d1></path><path d="M 60,0 L 68,-6 L 68,44 L 60,50 Z" fill="#A0522D" stroke="#8B4513" stroke-width="2.5" data-v-16c3c0d1></path><rect x="3" y="12" width="54" height="3" fill="#FFD700" stroke="#DAA520" stroke-width="1" data-v-16c3c0d1></rect><rect x="3" y="35" width="54" height="3" fill="#FFD700" stroke="#DAA520" stroke-width="1" data-v-16c3c0d1></rect><rect x="28" y="2" width="3" height="46" fill="#FFD700" stroke="#DAA520" stroke-width="1" data-v-16c3c0d1></rect><rect x="8" y="4" width="44" height="9" fill="#FFFFFF" stroke="#333" stroke-width="1.5" rx="1" data-v-16c3c0d1></rect>',7)),(0,o.Lk)("text",Xk,(0,s.v_)(e.material_type||"TYPE"),1),t[84]||(t[84]=(0,o.Lk)("rect",{x:"8",y:"18",width:"44",height:"12",fill:"#FFFFFF",stroke:"#333","stroke-width":"1.5",rx:"1"},null,-1)),(0,o.Lk)("text",Sk,(0,s.v_)(e.material_name||"Material"),1),t[85]||(t[85]=(0,o.Fv)('<g transform="translate(2, 19)" data-v-16c3c0d1><path d="M 4,0 L 0,5 L 8,5 Z" fill="none" stroke="#FF0000" stroke-width="1.5" data-v-16c3c0d1></path><circle cx="4" cy="7" r="0.8" fill="#FF0000" data-v-16c3c0d1></circle><text x="4" y="11" text-anchor="middle" font-size="3" fill="#FF0000" font-weight="bold" data-v-16c3c0d1>!</text></g><g transform="translate(50, 42)" data-v-16c3c0d1><path d="M 0,0 L 3,-3 L 6,0" fill="none" stroke="#000" stroke-width="1" data-v-16c3c0d1></path><line x1="3" y1="-3" x2="3" y2="2" stroke="#000" stroke-width="1" data-v-16c3c0d1></line></g>',2))])],8,Lk)):(0,o.Q3)("",!0),t[88]||(t[88]=(0,o.Fv)('<rect x="5" y="48" width="3" height="28" fill="#ff4444" stroke="#222" stroke-width="1" data-v-16c3c0d1></rect><rect x="10" y="50" width="2" height="6" fill="#ffeb3b" data-v-16c3c0d1></rect><rect x="10" y="58" width="2" height="6" fill="#ff3333" data-v-16c3c0d1></rect><rect x="10" y="66" width="2" height="6" fill="#ffeb3b" data-v-16c3c0d1></rect><rect x="10" y="74" width="2" height="6" fill="#ff3333" data-v-16c3c0d1></rect>',5)),(0,o.Lk)("path",{d:"M 172,48 L 172,75 L 168,82 L 115,82 L 112,75 L 112,42 L 118,38 L 165,38 Z",fill:"Incoming"===e.shipment_type?"#66bb6a":"#64b5f6",stroke:"#1a1a1a","stroke-width":"2.5"},null,8,Ak),(0,o.Lk)("path",{d:"M 172,48 L 165,42 L 112,42 L 112,42 Z",fill:"Incoming"===e.shipment_type?"#81c784":"#90caf9",stroke:"#1a1a1a","stroke-width":"2"},null,8,Fk),t[89]||(t[89]=(0,o.Fv)('<path d="M 168,40 L 162,38 L 125,38 L 120,40 L 120,50 L 168,50 Z" fill="#90caf9" stroke="#1a1a1a" stroke-width="2" opacity="0.85" data-v-16c3c0d1></path><path d="M 165,40 L 160,39 L 145,39 L 145,42 L 165,42 Z" fill="#ffffff" opacity="0.4" data-v-16c3c0d1></path><rect x="148" y="55" width="20" height="18" fill="#90caf9" stroke="#1a1a1a" stroke-width="1.5" opacity="0.85" data-v-16c3c0d1></rect><line x1="145" y1="75" x2="145" y2="82" stroke="#1a1a1a" stroke-width="2" data-v-16c3c0d1></line><rect x="168" y="60" width="6" height="15" fill="#263238" stroke="#1a1a1a" stroke-width="2" data-v-16c3c0d1></rect><line x1="170" y1="62" x2="170" y2="73" stroke="#444" stroke-width="1.5" data-v-16c3c0d1></line><line x1="172" y1="62" x2="172" y2="73" stroke="#444" stroke-width="1.5" data-v-16c3c0d1></line><ellipse cx="172" cy="72" rx="3" ry="4" fill="#ff3333" stroke="#1a1a1a" stroke-width="1" opacity="0.9" data-v-16c3c0d1></ellipse><ellipse cx="172" cy="79" rx="3" ry="3" fill="#ff9800" stroke="#1a1a1a" stroke-width="1" data-v-16c3c0d1></ellipse>',9)),(0,o.Lk)("rect",{x:"172",y:"52",width:"4",height:"3",fill:"Incoming"===e.shipment_type?"#558b2f":"#1976d2",stroke:"#000","stroke-width":"1"},null,8,Mk),t[90]||(t[90]=(0,o.Fv)('<line x1="172" y1="53" x2="168" y2="58" stroke="#333" stroke-width="1.5" data-v-16c3c0d1></line><g data-v-16c3c0d1><circle cx="15" cy="85" r="10" fill="#2c3e50" stroke="#1a1a1a" stroke-width="2.5" data-v-16c3c0d1></circle><circle cx="15" cy="85" r="6" fill="#546e7a" data-v-16c3c0d1></circle><circle cx="15" cy="85" r="3" fill="#1a1a1a" data-v-16c3c0d1></circle><circle cx="15" cy="85" r="1.5" fill="#666" data-v-16c3c0d1></circle><circle cx="35" cy="85" r="10" fill="#2c3e50" stroke="#1a1a1a" stroke-width="2.5" data-v-16c3c0d1></circle><circle cx="35" cy="85" r="6" fill="#546e7a" data-v-16c3c0d1></circle><circle cx="35" cy="85" r="3" fill="#1a1a1a" data-v-16c3c0d1></circle><circle cx="35" cy="85" r="1.5" fill="#666" data-v-16c3c0d1></circle><circle cx="55" cy="85" r="10" fill="#2c3e50" stroke="#1a1a1a" stroke-width="2.5" data-v-16c3c0d1></circle><circle cx="55" cy="85" r="6" fill="#546e7a" data-v-16c3c0d1></circle><circle cx="55" cy="85" r="3" fill="#1a1a1a" data-v-16c3c0d1></circle><circle cx="55" cy="85" r="1.5" fill="#666" data-v-16c3c0d1></circle></g><g data-v-16c3c0d1><circle cx="160" cy="85" r="9" fill="#2c3e50" stroke="#1a1a1a" stroke-width="2.5" data-v-16c3c0d1></circle><circle cx="160" cy="85" r="5" fill="#546e7a" data-v-16c3c0d1></circle><circle cx="160" cy="85" r="2" fill="#1a1a1a" data-v-16c3c0d1></circle><circle cx="120" cy="85" r="10" fill="#2c3e50" stroke="#1a1a1a" stroke-width="2.5" data-v-16c3c0d1></circle><circle cx="120" cy="85" r="6" fill="#546e7a" data-v-16c3c0d1></circle><circle cx="120" cy="85" r="3" fill="#1a1a1a" data-v-16c3c0d1></circle><circle cx="120" cy="85" r="1.5" fill="#666" data-v-16c3c0d1></circle></g><circle cx="15" cy="85" r="2" fill="#c0c0c0" opacity="0.8" data-v-16c3c0d1></circle><circle cx="35" cy="85" r="2" fill="#c0c0c0" opacity="0.8" data-v-16c3c0d1></circle><circle cx="55" cy="85" r="2" fill="#c0c0c0" opacity="0.8" data-v-16c3c0d1></circle><circle cx="120" cy="85" r="2" fill="#c0c0c0" opacity="0.8" data-v-16c3c0d1></circle><circle cx="160" cy="85" r="1.5" fill="#c0c0c0" opacity="0.8" data-v-16c3c0d1></circle><rect x="118" y="35" width="4" height="10" fill="#333" stroke="#000" stroke-width="1" rx="1" data-v-16c3c0d1></rect><ellipse cx="120" cy="35" rx="2" ry="1.5" fill="#444" stroke="#000" stroke-width="1" data-v-16c3c0d1></ellipse><rect x="126" y="37" width="6" height="8" fill="#e0e0e0" stroke="#333" stroke-width="1" rx="1" data-v-16c3c0d1></rect>',11)),(0,o.Lk)("circle",{cx:"5",cy:"25",r:"12",fill:"LoadingUnloading"===e.status?"#ff5722":"Incoming"===e.shipment_type?"#4caf50":"#2196f3",stroke:"#fff","stroke-width":"3",class:(0,s.C4)({"blink-animation":"Weight_Station_1"===e.location||"Weight_Station_2"===e.location||"LoadingUnloading"===e.status&&e.unload_location})},null,10,Wk),t[91]||(t[91]=(0,o.Lk)("rect",{x:"30",y:"20",width:"50",height:"12",fill:"#ffffff",stroke:"#000","stroke-width":"2.5",rx:"2"},null,-1)),(0,o.Lk)("text",Ik,(0,s.v_)(e.license_number),1),(0,o.Lk)("rect",{x:"35",y:"105",width:"110",height:"18",fill:"Registered"===e.status||"LoadedUnloaded"===e.status?"#ff9800":"LoadingUnloading"===e.status?"#ff5722":"Incoming"===e.shipment_type?"#4caf50":"#2196f3",stroke:"#fff","stroke-width":"2",rx:"3",opacity:"0.9",class:(0,s.C4)({"blink-animation":"Registered"===e.status||"LoadedUnloaded"===e.status})},null,10,Kk),(0,o.Lk)("text",Pk,(0,s.v_)("Registered"===e.status?"→ MOVING TO W1":"LoadedUnloaded"===e.status?"→ MOVING TO W2":"LoadingUnloading"===e.status?"LOADING...":e.status),1),(0,o.Lk)("title",null,"License: "+(0,s.v_)(e.license_number)+" Type: "+(0,s.v_)(e.shipment_type)+" Status: "+(0,s.v_)(e.status)+" Location: "+(0,s.v_)(e.location)+" "+(0,s.v_)(e.supplier_name?"Supplier: "+e.supplier_name:"")+" "+(0,s.v_)(e.customer_name?"Customer: "+e.customer_name:"")+" "+(0,s.v_)(e.unload_location?"Target: "+e.unload_location:""),1)],8,fk)],8,gk)],4))),128))]),(0,o.Lk)("g",Tk,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.activeShipments,e=>((0,o.uX)(),(0,o.CE)(o.FK,{key:"forklift-"+e.id},["LoadingUnloading"===e.status&&e.unload_location&&n.forkliftAnimations["forklift-"+e.id]?((0,o.uX)(),(0,o.CE)("g",Dk,[((0,o.uX)(),(0,o.CE)("g",{transform:`translate(${i.getForkliftPosition(e.id).x}, ${i.getForkliftPosition(e.id).y})`,class:"forklift-animated",key:"fl-"+e.id},[t[94]||(t[94]=(0,o.Lk)("text",{x:"0",y:"0","font-size":"30","text-anchor":"middle"},"🚜",-1)),(0,o.bo)(((0,o.uX)(),(0,o.CE)("g",{key:"cargo-"+e.id+"-"+n.forkliftUpdateCounter},[i.shouldShowReel("shipment",e)?((0,o.uX)(),(0,o.CE)("g",Qk,[...t[93]||(t[93]=[(0,o.Fv)('<ellipse cx="10" cy="6" rx="5" ry="2" fill="#f3dab0" stroke="#000" stroke-width="1" data-v-16c3c0d1></ellipse><rect x="5" y="-10" width="10" height="16" fill="#f3dab0" stroke="none" data-v-16c3c0d1></rect><line x1="5" y1="-10" x2="5" y2="6" stroke="#000" stroke-width="1" data-v-16c3c0d1></line><line x1="15" y1="-10" x2="15" y2="6" stroke="#000" stroke-width="1" data-v-16c3c0d1></line><ellipse cx="10" cy="-10" rx="5" ry="2" fill="#f3dab0" stroke="#000" stroke-width="1" data-v-16c3c0d1></ellipse><line x1="5" y1="8" x2="20" y2="8" stroke="#000" stroke-width="3" data-v-16c3c0d1></line>',6)])])):((0,o.uX)(),(0,o.CE)("text",$k,"📦"))])),[[r.aG,n.forkliftAnimations["forklift-"+e.id]?.hasCargo]]),t[95]||(t[95]=(0,o.Lk)("circle",{cx:"-15",cy:"-18",r:"6",fill:"#ff5722",class:"blink-animation",stroke:"#fff","stroke-width":"2"},null,-1)),(0,o.Lk)("text",Rk,(0,s.v_)("toTruck"===n.forkliftAnimations["forklift-"+e.id]?.phase?"→ TRUCK":"→ WAREHOUSE"),1),(0,o.Lk)("title",null,"Forklift "+(0,s.v_)(i.forkliftHasCargo(e.id)?"(Carrying cargo)":"(Empty)")+" Truck: "+(0,s.v_)(e.license_number)+" "+(0,s.v_)("Incoming"===e.shipment_type?"Unloading from truck":"Loading to truck")+" Destination: "+(0,s.v_)(e.unload_location),1)],8,Nk))])):(0,o.Q3)("",!0)],64))),128))]),n.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("g",Bk,[t[96]||(t[96]=(0,o.Lk)("rect",{x:"1280",y:"843",width:"300",height:"125",fill:"#6c79c5",opacity:"0.95",rx:"10",stroke:"#fff","stroke-width":"4"},null,-1)),t[97]||(t[97]=(0,o.Lk)("text",{x:"1430",y:"865","text-anchor":"middle","font-size":"13","font-weight":"bold",fill:"#fff"}," STATUS 📊 ",-1)),t[98]||(t[98]=(0,o.Lk)("text",{x:"1350",y:"888","font-size":"12",fill:"#ffd54f","font-weight":"bold"}," :Trucks 🚚 ",-1)),(0,o.Lk)("text",Ok,(0,s.v_)(n.activeShipments.length),1),t[99]||(t[99]=(0,o.Lk)("text",{x:"1395",y:"888","font-size":"13",fill:"#a5d6a7"}," :In ",-1)),(0,o.Lk)("text",Uk,(0,s.v_)(i.incomingCount),1),t[100]||(t[100]=(0,o.Lk)("text",{x:"1460",y:"888","font-size":"13",fill:"#90caf9"}," :Out ",-1)),(0,o.Lk)("text",zk,(0,s.v_)(i.outgoingCount),1),t[101]||(t[101]=(0,o.Lk)("text",{x:"1525",y:"888","font-size":"13",fill:"#ffab91"}," :Load ",-1)),(0,o.Lk)("text",Zk,(0,s.v_)(i.activeLoadingCount),1),t[102]||(t[102]=(0,o.Lk)("text",{x:"1295",y:"912","font-size":"12",fill:"#fff9c4"}," → :To W1 ",-1)),(0,o.Lk)("text",jk,(0,s.v_)(i.registeredCount),1),t[103]||(t[103]=(0,o.Lk)("text",{x:"1395",y:"912","font-size":"12",fill:"#f8bbd0"}," → :To W2 ",-1)),(0,o.Lk)("text",Hk,(0,s.v_)(i.loadedUnloadedCount),1),t[104]||(t[104]=(0,o.Lk)("text",{x:"1350",y:"935","font-size":"12",fill:"#b39ddb","font-weight":"bold"}," :Stock 📦 ",-1)),(0,o.Lk)("text",Gk," :Reels "+(0,s.v_)(i.totalInventory),1)])),n.tooltip.visible?((0,o.uX)(),(0,o.CE)("g",{key:2,class:"custom-tooltip",transform:`translate(${n.tooltip.x}, ${n.tooltip.y})`},[(0,o.Lk)("rect",{x:-(4.5*n.tooltip.content.length+16)/2,y:"-18",width:4.5*n.tooltip.content.length+16,height:"22",rx:"4",ry:"4",fill:"#333","fill-opacity":"0.9",stroke:"#555","stroke-width":"1"},null,8,qk),t[105]||(t[105]=(0,o.Lk)("polygon",{points:"-5,4 5,4 0,10",fill:"#333"},null,-1)),(0,o.Lk)("text",Jk,(0,s.v_)(n.tooltip.content),1)],8,Vk)):(0,o.Q3)("",!0)]))]),n.showInventoryDialog?((0,o.uX)(),(0,o.CE)("div",{key:2,class:"inventory-dialog-overlay",onClick:t[22]||(t[22]=(0,r.D$)((...e)=>i.closeInventoryDialog&&i.closeInventoryDialog(...e),["self"]))},[(0,o.Lk)("div",Yk,[(0,o.Lk)("div",{class:(0,s.C4)(["dialog-header",{"header-green":"products"===n.dialogType,"header-orange":"products"!==n.dialogType}])},[(0,o.Lk)("h2",null,["products"===n.dialogType?((0,o.uX)(),(0,o.CE)("span",eb,"📦 Products Inventory")):"profiles"===n.dialogType?((0,o.uX)(),(0,o.CE)("span",tb,"📋 Profiles")):((0,o.uX)(),(0,o.CE)("span",ab,"🧱 Raw Materials"))]),(0,o.Lk)("h3",null,(0,s.v_)(i.formatWarehouseName(n.selectedWarehouse)),1),(0,o.Lk)("button",{class:"close-btn",onClick:t[21]||(t[21]=(...e)=>i.closeInventoryDialog&&i.closeInventoryDialog(...e))},"✕")],2),n.loadingDetails?((0,o.uX)(),(0,o.CE)("div",rb,[...t[113]||(t[113]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading data...",-1)])])):n.selectedWarehouseDetails?((0,o.uX)(),(0,o.CE)("div",ob,["products"===n.dialogType?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",sb,[(0,o.Lk)("div",lb,[(0,o.Lk)("span",nb,(0,s.v_)(n.selectedWarehouseDetails.data.summary?.total_reels||0),1),t[114]||(t[114]=(0,o.Lk)("span",{class:"stat-label"},"Total Reels",-1))]),(0,o.Lk)("div",ib,[(0,o.Lk)("span",db,(0,s.v_)((n.selectedWarehouseDetails.data.summary?.total_products_weight_tons||0).toFixed(2))+"t",1),t[115]||(t[115]=(0,o.Lk)("span",{class:"stat-label"},"Total Weight",-1))])]),n.selectedWarehouseDetails.data.reels_by_width&&0!==n.selectedWarehouseDetails.data.reels_by_width.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ub,[...t[116]||(t[116]=[(0,o.Lk)("p",null,"📦 No products found in this warehouse",-1)])])),n.selectedWarehouseDetails.data.reels_by_width&&n.selectedWarehouseDetails.data.reels_by_width.length>0?((0,o.uX)(),(0,o.CE)("div",cb,[t[118]||(t[118]=(0,o.Lk)("h4",null,"Products by Width",-1)),(0,o.Lk)("div",mb,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.selectedWarehouseDetails.data.reels_by_width,(e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:"width-"+a,class:"cylinder-item"},[((0,o.uX)(),(0,o.CE)("svg",{height:i.getCylinderHeight(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.reels_by_width))+50,width:"80",class:"cylinder-svg"},[t[117]||(t[117]=(0,o.Lk)("ellipse",{cx:"40",cy:"20",rx:"30",ry:"10",fill:"#4CAF50",stroke:"#2E7D32","stroke-width":"2"},null,-1)),(0,o.Lk)("rect",{x:"10",y:"20",width:"60",height:i.getCylinderHeight(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.reels_by_width)),fill:"#66BB6A",stroke:"#2E7D32","stroke-width":"2"},null,8,pb),(0,o.Lk)("ellipse",{cx:"40",cy:20+i.getCylinderHeight(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.reels_by_width)),rx:"30",ry:"10",fill:"#4CAF50",stroke:"#2E7D32","stroke-width":"2"},null,8,gb),(0,o.Lk)("text",{x:"40",y:20+i.getCylinderHeight(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.reels_by_width))/2-5,"text-anchor":"middle",fill:"#fff","font-size":"14","font-weight":"bold"},(0,s.v_)(e.count),9,fb),(0,o.Lk)("text",{x:"40",y:20+i.getCylinderHeight(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.reels_by_width))/2+12,"text-anchor":"middle",fill:"#fff","font-size":"10"},(0,s.v_)(e.total_weight_tons)+"t ",9,yb)],8,hb)),(0,o.Lk)("div",kb,[(0,o.Lk)("span",bb,(0,s.v_)(e.width)+"mm",1)])]))),128))])])):(0,o.Q3)("",!0)],64)):"rawMaterials"===n.dialogType?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",xb,[(0,o.Lk)("div",vb,[(0,o.Lk)("span",wb,(0,s.v_)(n.selectedWarehouseDetails.data.summary?.total_raw_materials||0),1),t[119]||(t[119]=(0,o.Lk)("span",{class:"stat-label"},"Total Raw Materials",-1))]),(0,o.Lk)("div",_b,[(0,o.Lk)("span",Cb,(0,s.v_)((n.selectedWarehouseDetails.data.summary?.total_raw_materials_weight_tons||0).toFixed(2))+"t",1),t[120]||(t[120]=(0,o.Lk)("span",{class:"stat-label"},"Total Weight",-1))])]),n.selectedWarehouseDetails.data.raw_materials_by_name&&0!==n.selectedWarehouseDetails.data.raw_materials_by_name.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Lb,[...t[121]||(t[121]=[(0,o.Lk)("p",null,"🧱 No raw materials found in this warehouse",-1)])])),n.selectedWarehouseDetails.data.raw_materials_by_name&&n.selectedWarehouseDetails.data.raw_materials_by_name.length>0?((0,o.uX)(),(0,o.CE)("div",Eb,[t[122]||(t[122]=(0,o.Lk)("h4",null,"Raw Materials",-1)),(0,o.Lk)("div",Xb,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.selectedWarehouseDetails.data.raw_materials_by_name,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:"material-"+t,class:"cube-item"},[((0,o.uX)(),(0,o.CE)("svg",{width:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))+20,height:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))+30,class:"cube-svg"},[(0,o.Lk)("g",Ab,[(0,o.Lk)("rect",{x:"0",y:15,width:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15,height:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15,fill:"#FF9800",stroke:"#E65100","stroke-width":"2"},null,8,Fb),(0,o.Lk)("path",{d:`M 0,15 L 15,0 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))},0 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15},15 Z`,fill:"#FFB74D",stroke:"#E65100","stroke-width":"2"},null,8,Mb),(0,o.Lk)("path",{d:`M ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15},15 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))},0 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))},${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15} L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15},${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))} Z`,fill:"#F57C00",stroke:"#E65100","stroke-width":"2"},null,8,Wb),(0,o.Lk)("text",{x:(i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15)/2,y:15+(i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15)/2-5,"text-anchor":"middle",fill:"#fff","font-size":"16","font-weight":"bold"},(0,s.v_)(e.count),9,Ib),(0,o.Lk)("text",{x:(i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15)/2,y:15+(i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.raw_materials_by_name))-15)/2+12,"text-anchor":"middle",fill:"#fff","font-size":"11"},(0,s.v_)(e.total_weight_tons)+"t ",9,Kb)])],8,Sb)),(0,o.Lk)("div",Pb,[(0,o.Lk)("span",Tb,(0,s.v_)(e.material_name||"Unknown"),1)])]))),128))])])):(0,o.Q3)("",!0)],64)):"profiles"===n.dialogType?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.Lk)("div",Db,[(0,o.Lk)("div",Nb,[(0,o.Lk)("span",Qb,(0,s.v_)(n.selectedWarehouseDetails.data.summary?.total_profiles||0),1),t[123]||(t[123]=(0,o.Lk)("span",{class:"stat-label"},"Total Profiles",-1))])]),n.selectedWarehouseDetails.data.profiles&&0!==n.selectedWarehouseDetails.data.profiles.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",$b,[...t[124]||(t[124]=[(0,o.Lk)("p",null,"📋 No profiles found in this warehouse",-1)])])),n.selectedWarehouseDetails.data.profiles&&n.selectedWarehouseDetails.data.profiles.length>0?((0,o.uX)(),(0,o.CE)("div",Rb,[t[125]||(t[125]=(0,o.Lk)("h4",null,"Profiles",-1)),(0,o.Lk)("div",Bb,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.selectedWarehouseDetails.data.profiles,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:"profile-"+t,class:"cube-item"},[((0,o.uX)(),(0,o.CE)("svg",{width:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))+20,height:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))+30,class:"cube-svg"},[(0,o.Lk)("g",Ub,[(0,o.Lk)("rect",{x:"0",y:15,width:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15,height:i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15,fill:"#9C27B0",stroke:"#6A1B9A","stroke-width":"2"},null,8,zb),(0,o.Lk)("path",{d:`M 0,15 L 15,0 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))},0 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15},15 Z`,fill:"#BA68C8",stroke:"#6A1B9A","stroke-width":"2"},null,8,Zb),(0,o.Lk)("path",{d:`M ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15},15 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))},0 L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))},${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15} L ${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15},${i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))} Z`,fill:"#7B1FA2",stroke:"#6A1B9A","stroke-width":"2"},null,8,jb),(0,o.Lk)("text",{x:(i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15)/2,y:15+(i.getCubeSize(e.count,i.getMaxCount(n.selectedWarehouseDetails.data.profiles))-15)/2+5,"text-anchor":"middle",fill:"#fff","font-size":"18","font-weight":"bold"},(0,s.v_)(e.count),9,Hb)])],8,Ob)),(0,o.Lk)("div",Gb,[(0,o.Lk)("span",Vb,(0,s.v_)(e.profile_name),1)])]))),128))])])):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.CE)("div",qb,[...t[126]||(t[126]=[(0,o.Lk)("p",null,"No data available",-1)])]))])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),n.showCargoDialog?((0,o.uX)(),(0,o.CE)("div",{key:3,class:"cargo-dialog-overlay",onClick:t[24]||(t[24]=(0,r.D$)((...e)=>i.closeCargoDialog&&i.closeCargoDialog(...e),["self"]))},[(0,o.Lk)("div",Jb,[(0,o.Lk)("div",{class:(0,s.C4)(["dialog-header",{"header-green":"Incoming"===n.selectedShipment.shipment_type,"header-blue":"Outgoing"===n.selectedShipment.shipment_type,"header-loading":n.loadingCargoDetails}])},[(0,o.Lk)("h2",null,[n.loadingCargoDetails?((0,o.uX)(),(0,o.CE)("span",Yb,"📦 Loading...")):"Incoming"===n.selectedShipment?.shipment_type?((0,o.uX)(),(0,o.CE)("span",ex,"📦 Incoming Cargo")):((0,o.uX)(),(0,o.CE)("span",tx,"📦 Outgoing Cargo"))]),n.selectedShipment?((0,o.uX)(),(0,o.CE)("h3",ax,(0,s.v_)(n.selectedShipment.license_number),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"close-btn",onClick:t[23]||(t[23]=(...e)=>i.closeCargoDialog&&i.closeCargoDialog(...e))},"✕")],2),n.loadingCargoDetails?((0,o.uX)(),(0,o.CE)("div",rx,[...t[127]||(t[127]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading cargo details...",-1)])])):n.selectedShipment?((0,o.uX)(),(0,o.CE)("div",ox,["Incoming"===n.selectedShipment.shipment_type?((0,o.uX)(),(0,o.CE)("div",sx,[(0,o.Lk)("div",lx,[t[129]||(t[129]=(0,o.Lk)("span",{class:"info-icon"},"📋",-1)),(0,o.Lk)("div",nx,[t[128]||(t[128]=(0,o.Lk)("span",{class:"info-label"},"Material Type",-1)),(0,o.Lk)("span",ix,(0,s.v_)(n.selectedShipment.material_type||"N/A"),1)])]),(0,o.Lk)("div",dx,[t[131]||(t[131]=(0,o.Lk)("span",{class:"info-icon"},"🏭",-1)),(0,o.Lk)("div",ux,[t[130]||(t[130]=(0,o.Lk)("span",{class:"info-label"},"Material Name",-1)),(0,o.Lk)("span",cx,(0,s.v_)(n.selectedShipment.material_name||"N/A"),1)])]),(0,o.Lk)("div",mx,[t[133]||(t[133]=(0,o.Lk)("span",{class:"info-icon"},"🚚",-1)),(0,o.Lk)("div",hx,[t[132]||(t[132]=(0,o.Lk)("span",{class:"info-label"},"Supplier",-1)),(0,o.Lk)("span",px,(0,s.v_)(n.selectedShipment.supplier_name||"N/A"),1)])]),n.selectedShipment.quantity?((0,o.uX)(),(0,o.CE)("div",gx,[t[135]||(t[135]=(0,o.Lk)("span",{class:"info-icon"},"📊",-1)),(0,o.Lk)("div",fx,[t[134]||(t[134]=(0,o.Lk)("span",{class:"info-label"},"Quantity",-1)),(0,o.Lk)("span",yx,(0,s.v_)(n.selectedShipment.quantity)+" "+(0,s.v_)(n.selectedShipment.unit||""),1)])])):(0,o.Q3)("",!0),n.selectedShipment.net_weight?((0,o.uX)(),(0,o.CE)("div",kx,[t[137]||(t[137]=(0,o.Lk)("span",{class:"info-icon"},"⚖️",-1)),(0,o.Lk)("div",bx,[t[136]||(t[136]=(0,o.Lk)("span",{class:"info-label"},"Net Weight",-1)),(0,o.Lk)("span",xx,(0,s.v_)(n.selectedShipment.net_weight)+" kg",1)])])):(0,o.Q3)("",!0),n.selectedShipment.unload_location?((0,o.uX)(),(0,o.CE)("div",vx,[t[139]||(t[139]=(0,o.Lk)("span",{class:"info-icon"},"📍",-1)),(0,o.Lk)("div",wx,[t[138]||(t[138]=(0,o.Lk)("span",{class:"info-label"},"Destination",-1)),(0,o.Lk)("span",_x,(0,s.v_)(i.formatWarehouseName(n.selectedShipment.unload_location)),1)])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",Cx,[(0,o.Lk)("div",Lx,[t[141]||(t[141]=(0,o.Lk)("span",{class:"info-icon"},"👤",-1)),(0,o.Lk)("div",Ex,[t[140]||(t[140]=(0,o.Lk)("span",{class:"info-label"},"Customer",-1)),(0,o.Lk)("span",Xx,(0,s.v_)(n.selectedShipment.customer_name||"N/A"),1)])]),(0,o.Lk)("div",Sx,[t[143]||(t[143]=(0,o.Lk)("span",{class:"info-icon"},"📊",-1)),(0,o.Lk)("div",Ax,[t[142]||(t[142]=(0,o.Lk)("span",{class:"info-label"},"Quantity",-1)),(0,o.Lk)("span",Fx,(0,s.v_)(i.parseReelsList(n.selectedShipment.list_of_reels).length)+" Reels",1)])]),n.selectedShipment.net_weight?((0,o.uX)(),(0,o.CE)("div",Mx,[t[145]||(t[145]=(0,o.Lk)("span",{class:"info-icon"},"⚖️",-1)),(0,o.Lk)("div",Wx,[t[144]||(t[144]=(0,o.Lk)("span",{class:"info-label"},"Net Weight",-1)),(0,o.Lk)("span",Ix,(0,s.v_)(n.selectedShipment.net_weight)+" kg",1)])])):(0,o.Q3)("",!0)]),n.selectedShipment.list_of_reels?((0,o.uX)(),(0,o.CE)("div",Kx,[t[146]||(t[146]=(0,o.Lk)("h4",null,"🧻 Reel Numbers",-1)),(0,o.Lk)("div",Px,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.parseReelsList(n.selectedShipment.list_of_reels),(e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"reel-badge"},(0,s.v_)(e),1))),128))])])):(0,o.Q3)("",!0)],64)),(0,o.Lk)("div",Tx,[(0,o.Lk)("span",{class:(0,s.C4)(["status-badge","status-"+n.selectedShipment.status.toLowerCase()])},(0,s.v_)(n.selectedShipment.status),3)])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",Dx,[(0,o.Lk)("div",Nx,[t[148]||(t[148]=(0,o.Lk)("h1",{class:"map-title"},[(0,o.eW)("نقشه کارخانه"),(0,o.Lk)("br"),(0,o.eW)("Factory Map")],-1)),(0,o.Lk)("button",{class:"refresh-button",onClick:t[25]||(t[25]=(...e)=>i.handleRefresh&&i.handleRefresh(...e)),disabled:n.loading},[n.loading?((0,o.uX)(),(0,o.CE)("span",$x,"در حال بارگذاری...")):((0,o.uX)(),(0,o.CE)("span",Rx,"بروزرسانی ↻"))],8,Qx),(0,o.bF)(d,{to:"/myapp/",class:"back-button"},{default:(0,o.k6)(()=>[...t[147]||(t[147]=[(0,o.eW)(" → بازگشت به صفحه اصلی ",-1)])]),_:1})]),(0,o.Lk)("div",Bx,[t[152]||(t[152]=(0,o.Fv)('<p style="font-weight:bold;margin-bottom:8px;border-bottom:1px solid rgba(255,255,255,0.3);padding-bottom:6px;font-size:12px;" data-v-16c3c0d1>Slow Motion Workflow:</p><p style="font-size:9px;line-height:1.8;" data-v-16c3c0d1><strong data-v-16c3c0d1>Registered:</strong><br data-v-16c3c0d1> Entrance 1/2 → W.Station 1/2 (15s) ⚠️<br data-v-16c3c0d1><strong data-v-16c3c0d1>LoadingUnloading:</strong><br data-v-16c3c0d1> At Warehouse + Forklift 🚜<br data-v-16c3c0d1><strong data-v-16c3c0d1>LoadedUnloaded:</strong><br data-v-16c3c0d1> Warehouse → W.Station 1/2 (15s)<br data-v-16c3c0d1><strong data-v-16c3c0d1>Office:</strong><br data-v-16c3c0d1> W.Station 1/2 → Office<br data-v-16c3c0d1><strong data-v-16c3c0d1>Delivered:</strong><br data-v-16c3c0d1> Office → Street (Exit) </p><p style="margin-top:10px;padding-top:8px;border-top:1px solid rgba(255,255,255,0.3);font-weight:bold;" data-v-16c3c0d1> Locations: </p><p style="font-size:10px;" data-v-16c3c0d1> 🏭 8 Warehouses<br data-v-16c3c0d1> ⚖️ 2 Weight Stations<br data-v-16c3c0d1> 🚜 4 Forklifts<br data-v-16c3c0d1> 🚪 2 Entrance/Exit </p>',4)),(0,o.Lk)("p",Ox,[t[149]||(t[149]=(0,o.Lk)("strong",null,"Total Inventory:",-1)),t[150]||(t[150]=(0,o.Lk)("br",null,null,-1)),t[151]||(t[151]=(0,o.eW)(" Reels ",-1)),(0,o.Lk)("span",Ux,(0,s.v_)(i.totalInventory),1)])])])])}a(3949);var Zx=a(4373),jx={name:"FactoryMap",data(){return{loading:!0,error:null,activeShipments:[],warehouseInventory:{},warehouseInventoryDetails:{},pmCount:0,pm2Count:0,pm3Count:0,pm4Count:0,todayPm2Count:0,todayPm3Count:0,todayPm4Count:0,pollingInterval:null,lastUpdateTime:null,locationCoordinates:{Anbar_Akhal:{x:200,y:905},Entrance1:{x:320,y:760},Weight_Station_1:{x:390,y:540},Otagh_Estrahat:{x:120,y:600},Restaurant:{x:40,y:440},Anbar_Salon_Tolid:{x:140,y:237},Anbar_Parvandeh:{x:335,y:94},Anbar_Koochak:{x:335,y:170},Anbar_Muhavateh_Homayoun:{x:550,y:150},Anbar_Khamir_Ghadim:{x:805,y:150},Anbar_Sangin:{x:660,y:560},QC:{x:845,y:580},Loading_Unloading:{x:510,y:610},Anbar_Muhvateh_Kardan:{x:1090,y:140},Anbar_Khamir_Kordan:{x:1090,y:180},Weight_Station_2:{x:1170,y:370},Office:{x:1070,y:650},Entrance2:{x:1070,y:760},Anbar_PAK:{x:1410,y:620}},truckStopPositions:{Entrance1:{x:350,y:750},Weight_Station_1:{x:350,y:540},Anbar_Salon_Tolid:{x:350,y:300},Anbar_Akhal:{x:160,y:825},Anbar_PAK:{x:1410,y:820},Anbar_Khamir_Kordan:{x:1090,y:180},Anbar_Muhvateh_Kardan:{x:1090,y:85},Anbar_Khamir_Ghadim:{x:805,y:150},Anbar_Muhavateh_Homayoun:{x:550,y:150},Anbar_Parvandeh:{x:355,y:94},Anbar_Koochak:{x:355,y:170},Anbar_Sangin:{x:640,y:510},Loading_Unloading:{x:390,y:540},Weight_Station_2:{x:1145,y:400},Office:{x:1070,y:650},Entrance2:{x:1070,y:760}},warehouseBadgePositions:{Anbar_PAK:{x:1420,y:460},Anbar_Sangin:{x:845,y:405},Anbar_Khamir_Kordan:{x:1330,y:75},Anbar_Muhvateh_Kardan:{x:980,y:15},Anbar_Khamir_Ghadim:{x:860,y:15},Anbar_Muhavateh_Homayoun:{x:520,y:75},Anbar_Parvandeh:{x:360,y:75},Anbar_Koochak:{x:360,y:125},Anbar_Salon_Tolid:{x:130,y:15},Anbar_Akhal:{x:310,y:860}},productionLineBadgePosition:{PM2_daily:{x:275,y:75},PM3_daily:{x:160,y:95},PM4_daily:{x:1390,y:390},PM2_weekly:{x:275,y:165},PM3_weekly:{x:160,y:260},PM4_weekly:{x:1390,y:640}},MAX_TRUCKS_INSIDE:2,entranceQueue:[],entranceQueuePositions:[{x:250,y:820},{x:170,y:820},{x:90,y:820},{x:10,y:820}],truckAnimations:{},animationFrames:{},truckQueue:{},shipmentWeightStation:{},forkliftAnimations:{},forkliftAnimationFrames:{},forkliftUpdateCounter:0,forkliftWarehousePositions:{Anbar_Salon_Tolid:{x:140,y:300},Anbar_Sangin:{x:760,y:460},Anbar_Koochak:{x:390,y:190},Anbar_Parvandeh:{x:320,y:107},Anbar_Khamir_Ghadim:{x:720,y:100},Anbar_Muhavateh_Homayoun:{x:530,y:105},Anbar_Khamir_Kordan:{x:1220,y:180},Anbar_Muhvateh_Kardan:{x:980,y:85},Anbar_PAK:{x:1445,y:500},Anbar_Akhal:{x:125,y:890}},forkliftTruckPositions:{Anbar_Salon_Tolid:{x:320,y:300},Anbar_Sangin:{x:640,y:460},Anbar_Koochak:{x:500,y:190},Anbar_Parvandeh:{x:485,y:107},Anbar_Khamir_Ghadim:{x:620,y:100},Anbar_Muhavateh_Homayoun:{x:620,y:105},Anbar_Muhvateh_Kardan:{x:1070,y:85},Anbar_Khamir_Kordan:{x:1120,y:180},Anbar_PAK:{x:1445,y:650},Anbar_Akhal:{x:225,y:890}},showInventoryDialog:!1,dialogType:null,selectedWarehouse:null,selectedWarehouseDetails:null,loadingDetails:!1,showCargoDialog:!1,selectedShipment:null,loadingCargoDetails:!1,truckAudios:{},forkliftAudios:{},movementWebSocket:null,warehouseMovementQueue:[],activeWarehouseMovement:null,warehouseForkliftAnimations:{},warehouseForkliftAnimationFrames:{},processingMovementQueue:!1,cylinderConfig:{Anbar_Salon_Tolid:{startX:70,startY:330,spacingX:25,spacingY:55,cylindersPerRow:6,radius:{rx:10,ry:4},height:30,maxRows:2},Anbar_Sangin:{startX:740,startY:490,spacingX:25,spacingY:55,cylindersPerRow:6,radius:{rx:10,ry:4},height:30,maxRows:2},Anbar_Khamir_Ghadim:{startX:740,startY:70,spacingX:25,spacingY:55,cylindersPerRow:6,radius:{rx:10,ry:4},height:30,maxRows:2}},akhalPackConfig:{Anbar_Akhal:{startX:100,startY:890,spacingX:40,spacingY:0,packsPerRow:5,maxRows:2},Anbar_Khamir_Kordan:{startX:1220,startY:200,spacingX:40,spacingY:40,packsPerRow:3,maxRows:2},Anbar_Muhvateh_Kardan:{startX:975,startY:15,spacingX:0,spacingY:40,packsPerRow:6,maxRows:1},Anbar_Khamir_Ghadim:{startX:625,startY:15,spacingX:40,spacingY:0,packsPerRow:3,maxRows:1},Anbar_Muhavateh_Homayoun:{startX:515,startY:75,spacingX:40,spacingY:0,packsPerRow:2,maxRows:2},Anbar_PAK:{startX:1395,startY:460,spacingX:0,spacingY:40,packsPerRow:1,maxRows:5}},tooltip:{visible:!1,content:"",x:0,y:0}}},computed:{warehouseNames(){return Object.keys(this.warehouseBadgePositions)},totalInventory(){return this.pmCount},activeLoadingCount(){return this.activeShipments.filter(e=>"LoadingUnloading"===e.status).length},incomingCount(){return this.activeShipments.filter(e=>"Incoming"===e.shipment_type).length},outgoingCount(){return this.activeShipments.filter(e=>"Outgoing"===e.shipment_type).length},registeredCount(){return this.activeShipments.filter(e=>"Registered"===e.status).length},loadedUnloadedCount(){return this.activeShipments.filter(e=>"LoadedUnloaded"===e.status).length},forkliftCargoStates(){this.forkliftUpdateCounter;const e={};return Object.keys(this.forkliftAnimations).forEach(t=>{e[t]=this.forkliftAnimations[t]?.hasCargo||!1}),e},trucksInsideFactory(){return this.activeShipments.filter(e=>"Delivered"!==e.status&&!this.entranceQueue.includes(e.id)).length},canTruckEnter(){return this.trucksInsideFactory<this.MAX_TRUCKS_INSIDE}},mounted(){this.fetchMapData(),this.startPolling(),Object.keys(localStorage).forEach(e=>{if(e.startsWith("truckStation_")){const t=parseInt(e.replace("truckStation_",""));this.shipmentWeightStation[t]=localStorage.getItem(e)}}),this.connectMovementWebSocket(),document.addEventListener("click",()=>{this.truckAudio&&this.truckAudio.play().then(()=>{this.truckAudio.pause()}).catch(()=>{})},{once:!0})},beforeUnmount(){this.stopPolling(),this.disconnectMovementWebSocket(),Object.values(this.animationFrames).forEach(e=>{cancelAnimationFrame(e)}),Object.keys(this.forkliftAnimationFrames).forEach(e=>{cancelAnimationFrame(this.forkliftAnimationFrames[e])}),Object.keys(this.warehouseForkliftAnimationFrames).forEach(e=>{cancelAnimationFrame(this.warehouseForkliftAnimationFrames[e])}),this.stopAllTruckSounds(),this.stopAllForkliftSounds()},methods:{connectMovementWebSocket(){const e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.hostname,a="8000",r=`${e}//${t}:${a}/ws/movements/`;console.log("🔌 Connecting to movement WebSocket:",r);try{this.movementWebSocket=new WebSocket(r),this.movementWebSocket.onopen=()=>{console.log("✅ Movement WebSocket connected")},this.movementWebSocket.onmessage=e=>{const t=JSON.parse(e.data);console.log("📦 Message received:",t),"movement"===t.type&&(this.warehouseMovementQueue.push({from_anbar:t.from_anbar,to_anbar:t.to_anbar,quantity:t.quantity,material_type:t.material_type,pending:t.pending}),console.log("📋 Movement queued. Queue length:",this.warehouseMovementQueue.length),t.pending?setTimeout(()=>{this.processMovementQueue()},6e3):this.processMovementQueue()),"loading_unloading_message"===t.type&&(console.log("🔄 Inventory update for:",t.warehouse_name),this.refreshWarehouseInventory(t.warehouse_name))},this.movementWebSocket.onclose=e=>{console.log("🔌 Movement WebSocket closed:",e.code,e.reason),1e3!==e.code&&setTimeout(()=>{console.log("🔄 Reconnecting movement WebSocket..."),this.connectMovementWebSocket()},5e3)},this.movementWebSocket.onerror=e=>{console.error("❌ Movement WebSocket error:",e)}}catch(o){console.error("❌ Failed to create movement WebSocket:",o)}},disconnectMovementWebSocket(){this.movementWebSocket&&(console.log("🔌 Disconnecting movement WebSocket"),this.movementWebSocket.close(1e3,"Component unmounting"),this.movementWebSocket=null)},async fetchMapData(){this.loading=!0,this.error=null;try{await Promise.all([this.fetchShipments(),this.fetchWarehouseInventory()]),this.lastUpdateTime=new Date}catch(e){this.error="خطا در بارگذاری داده‌ها / Error loading data"}finally{this.loading=!1}},async fetchShipments(){try{const e=await Zx.A.get("/myapp/api/getFactoryMapData");if("success"!==e.data.status)throw new Error(e.data.message||"Failed to fetch shipments");this.activeShipments=e.data.data,this.activeShipments.length>0&&this.activeShipments.forEach(e=>{this.getTruckStartPosition(e),this.getTruckEndPosition(e),this.getTruckRotation(e)});this.activeShipments.filter(e=>"LoadingUnloading"===e.status)}catch(e){throw console.error("Error fetching shipments:",e),e}},async fetchWarehouseInventory(){try{const e=await Zx.A.get("/myapp/api/getWarehouseInventory");if("success"!==e.data.status)throw new Error(e.data.message||"Failed to fetch inventory");{const{inventory_data:t,pm_count:a,pm2_count:r,pm3_count:o,pm4_count:s,today_pm2_count:l,today_pm3_count:n,today_pm4_count:i}=e.data.data;this.warehouseInventoryDetails=t,this.pmCount=a||0,this.pm2Count=r||0,this.pm3Count=o||0,this.pm4Count=s||0,this.todayPm2Count=l||0,this.todayPm3Count=n||0,this.todayPm4Count=i||0;const d={};Object.entries(e.data.data).forEach(([e,t])=>{d[e]=t.total_count||0}),this.warehouseInventory=d}}catch(e){throw console.error("Error fetching warehouse inventory:",e),e}},startPolling(){this.pollingInterval=setInterval(()=>{this.fetchMapData()},6e4)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async handleRefresh(){await this.fetchMapData()},getTruckStartPosition(e){const t=e.status,a=e.shipment_type,r=e.unload_location,o=e.material_type;return"Registered"===t?"Incoming"===a&&o&&-1!==o.indexOf("آخال")?this.truckStopPositions["Entrance2"]||{x:1080,y:800}:this.truckStopPositions["Entrance1"]||{x:350,y:800}:"LoadingUnloading"===t?"Incoming"===a&&o&&-1!==o.indexOf("آخال")?this.truckStopPositions["Weight_Station_2"]||{x:1145,y:370}:this.truckStopPositions["Weight_Station_1"]||{x:350,y:540}:"LoadedUnloaded"===t?"Incoming"===a&&r?this.truckStopPositions[r]||this.truckStopPositions["Loading_Unloading"]:"Outgoing"===a?this.truckStopPositions["Anbar_Salon_Tolid"]||{x:350,y:300}:this.truckStopPositions["Weight_Station_1"]||{x:350,y:540}:"Office"===t?"Incoming"===a?o&&-1!==o.indexOf("آخال")?this.truckStopPositions["Entrance2"]||{x:1170,y:370}:this.truckStopPositions["Entrance1"]||{x:350,y:540}:this.truckStopPositions["Weight_Station_2"]||{x:350,y:540}:"Delivered"===t?"Incoming"===a&&o&&-1!==o.indexOf("آخال")?this.truckStopPositions["Entrance2"]||{x:1070,y:724}:this.truckStopPositions["Entrance1"]||{x:350,y:724}:this.truckStopPositions["Entrance1"]||{x:350,y:775}},getTruckEndPosition(e){const t=e.status,a=e.shipment_type,r=e.location,o=e.unload_location,s=e.material_type;if("Registered"===t){const t=this.shipmentWeightStation[e.id];return"Weight_Station_2"===t?this.truckStopPositions["Weight_Station_2"]||{x:1145,y:340}:this.truckStopPositions["Weight_Station_1"]||{x:350,y:540}}if("LoadingUnloading"===t)if("Incoming"===a){if(!s||-1===s.indexOf("آخال"))return s&&-1!==s.indexOf("لوله مقوایی")?this.truckStopPositions["Anbar_Salon_Tolid"]||{x:350,y:237}:this.truckStopPositions[o]||this.truckStopPositions["Loading_Unloading"];switch(o){case"Anbar_Khamir_Kordan":return this.truckStopPositions["Anbar_Khamir_Kordan"]||{x:180,y:1220};case"Anbar_Muhvateh_Kardan":return this.truckStopPositions["Anbar_Muhvateh_Kardan"]||{x:970,y:85};case"Anbar_Muhavateh_Homayoun":return this.truckStopPositions["Anbar_Muhavateh_Homayoun"]||{x:500,y:125};case"Anbar_Pak":return this.truckStopPositions["Anbar_Pak"]||{x:1350,y:830};case"Anbar_Akhal":return this.truckStopPositions["Anbar_Akhal"]||{x:120,y:830};default:return this.truckStopPositions["Weight_Station_2"]||{x:1170,y:370}}}else switch(o){case"Anbar_Salon_Tolid":return this.truckStopPositions["Anbar_Salon_Tolid"]||{x:350,y:300};case"Anbar_Sangin":return this.truckStopPositions["Anbar_Sangin"]||{x:660,y:560};case"Anbar_Khamir_Ghadim":return this.truckStopPositions["Anbar_Khamir_Ghadim"]||{x:700,y:150};default:return this.truckStopPositions["Weight_Station_1"]||{x:390,y:560}}if("LoadedUnloaded"===t){const t=this.shipmentWeightStation[e.id];return"Weight_Station_2"===t?this.truckStopPositions["Weight_Station_2"]||{x:1145,y:400}:this.truckStopPositions["Weight_Station_1"]||{x:350,y:600}}if("Office"===t){const t=this.shipmentWeightStation[e.id];return"Weight_Station_2"===t?this.truckStopPositions["Entrance2"]||{x:1070,y:750}:this.truckStopPositions["Entrance1"]||{x:350,y:750}}return"Delivered"===t?{x:0,y:820}:r&&this.truckStopPositions[r]?this.truckStopPositions[r]:this.truckStopPositions["Weight_Station_1"]||{x:320,y:610}},getTruckPosition(e){return this.getTruckEndPosition(e)},getTruckRotation(e){const t=e.status,a=e.unload_location;return"Registered"===t?-90:"LoadedUnloaded"===t?90:"LoadingUnloading"===t?a?null:-90:"Office"===t?90:0},getTruckColor(e){return"LoadingUnloading"===e.status?{fill:"#ffcccc",stroke:"#cc0000"}:"Incoming"===e.shipment_type?{fill:"#90ee90",stroke:"#228b22"}:{fill:"#90caf9",stroke:"#1976d2"}},truckHasCargo(e){const t=e.shipment_type,a=e.status;return"Incoming"===t?"Registered"===a||"LoadingUnloading"===a:"LoadedUnloaded"===a||"Office"===a||"Delivered"===a},getWarehouseCount(e){return this.warehouseInventory[e]||0},getWarehouseWeight(e){const t=this.warehouseInventoryDetails[e];return t?t.total_weight:0},getWarehouseProductsWeight(e){const t=this.warehouseInventoryDetails[e],a=t&&t.products?t.products.weight:0;return a},getWarehouseRawMaterialsWeight(e){const t=this.warehouseInventoryDetails[e],a=t&&t.raw_materials?t.raw_materials.weight:0;return a},formatWarehouseName(e){return e.replace("Anbar_","").replace(/_/g," ")},formatWeight(e){const t=Number(e)||0;return t.toFixed(1)+"t"},generateSmoothPath(e){if(e.length<2)return e;if(2===e.length)return e;const t=[],a=20,r=(e,t)=>{const a=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return a<5||r<5};for(let o=0;o<e.length-1;o++){const s=e[Math.max(o-1,0)],l=e[o],n=e[o+1],i=e[Math.min(o+2,e.length-1)],d=r(l,n);if(d)for(let e=0;e<a;e++){const r=e/a;t.push({x:l.x+(n.x-l.x)*r,y:l.y+(n.y-l.y)*r})}else for(let e=0;e<a;e++){const r=e/a,o=.5*(2*l.x+(-s.x+n.x)*r+(2*s.x-5*l.x+4*n.x-i.x)*r*r+(-s.x+3*l.x-3*n.x+i.x)*r*r*r),d=.5*(2*l.y+(-s.y+n.y)*r+(2*s.y-5*l.y+4*n.y-i.y)*r*r+(-s.y+3*l.y-3*n.y+i.y)*r*r*r);t.push({x:o,y:d})}}return t.push(e[e.length-1]),t},animateTruckAlongPath(e,t){if(console.log(`🎬 animateTruckAlongPath called for truck ${e.id}`,t),!t||t.length<2)return void console.log("❌ Animation aborted - waypoints invalid");const a=e.id,r=this.generateSmoothPath(t);console.log(`📍 smoothPath length: ${r.length}, totalLength will be calculated...`);let o=0;const s=[];for(let u=0;u<r.length-1;u++){const e=r[u+1].x-r[u].x,t=r[u+1].y-r[u].y,a=Math.sqrt(e*e+t*t);s.push(a),o+=a}const l=100,n=o/l*1e3;this.playTruckSound(a);const i=Date.now(),d=()=>{const t=Date.now()-i,l=Math.min(t/n,1),u=l<.5?2*l*l:(4-2*l)*l-1,c=u*o;let m=0,h=0;for(let e=0;e<s.length;e++){if(m+s[e]>=c){h=e;break}m+=s[e]}const p=s[h]>0?(c-m)/s[h]:0,g=r[h],f=r[Math.min(h+1,r.length-1)],y=g.x+(f.x-g.x)*p,k=g.y+(f.y-g.y)*p,b=f.x-g.x,x=f.y-g.y;let v=Math.atan2(x,b)*(180/Math.PI),w=1;const _=20;if(Math.abs(v)<=_?v=0:Math.abs(v-90)<=_?v=90:Math.abs(v+90)<=_?v=-90:Math.abs(v)>=180-_&&(v=180),(v>135||v<-135)&&(w=-1,v=v>0?v-180:v+180),this.truckAnimations[a]={currentX:y,currentY:k,rotation:v,animating:!0,exited:!1,flipX:w},this.truckAnimations={...this.truckAnimations},l<1)this.animationFrames[a]=requestAnimationFrame(d);else{this.truckAnimations[a].animating=!1;const t=this.getTruckRotation(e);if(null!==t&&(this.truckAnimations[a].rotation=t),"Delivered"===e.status&&(this.truckAnimations[a].exited=!0,localStorage.removeItem(`truckStation_${e.id}`),this.$nextTick(()=>{this.processEntranceQueue()})),"LoadingUnloading"===e.status&&e.unload_location){const t="forklift-"+a;this.forkliftAnimations[t]?.animating||(this.startForkliftAnimation(e),this.playForkliftSound(a))}this.stopTruckSound(a);this.truckAnimations[a].targetDestination;this.truckAnimations[a].targetDestination=null,this.$nextTick(()=>{Object.keys(this.truckQueue).forEach(e=>{this.processQueue(e)})})}};d()},getWaypointsForShipment(e,t=null){console.log(`📍 getWaypointsForShipment: id=${e.id}, status=${e.status}, type=${e.shipment_type}`);const a=e.status,r=e.shipment_type,o=e.unload_location;switch(a){case"Registered":if("Incoming"===r){let t=this.shipmentWeightStation[e.id];return t||(t=this.getAvailableWeightStation(e),this.shipmentWeightStation[e.id]=t),"Weight_Station_2"===t?[{x:0,y:820},{x:1070,y:820},{x:1070,y:720},{x:1145,y:500},{x:1145,y:340}]:[{x:0,y:820},{x:350,y:820},{x:350,y:500}]}{let t=this.shipmentWeightStation[e.id];return t||(t=this.getAvailableWeightStation(e),this.shipmentWeightStation[e.id]=t),"Weight_Station_2"===t?[{x:0,y:820},{x:1070,y:820},{x:1070,y:720},{x:1145,y:500},{x:1145,y:340}]:[{x:0,y:820},{x:350,y:820},{x:350,y:500}]}case"LoadingUnloading":console.log(`📍 LoadingUnloading case: unload_location="${o}", targetStation will be checked...`);const a=this.shipmentWeightStation[e.id];if("Incoming"===r)switch(o){case"Anbar_Salon_Tolid":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:290},{x:320,y:290},{x:320,y:260},{x:450,y:260}]:[{x:350,y:500},{x:320,y:300},{x:320,y:260},{x:450,y:260}];case"Anbar_Sangin":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:280},{x:680,y:280},{x:680,y:540},{x:600,y:540}]:[{x:350,y:500},{x:350,y:280},{x:680,y:280},{x:680,y:540},{x:600,y:540}];case"Anbar_Koochak":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:290},{x:650,y:290},{x:650,y:140},{x:500,y:140}]:[{x:350,y:500},{x:350,y:300},{x:500,y:300},{x:500,y:150},{x:600,y:150}];case"Anbar_Parvandeh":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:300},{x:500,y:300},{x:500,y:140},{x:600,y:140}]:[{x:350,y:500},{x:350,y:300},{x:500,y:300},{x:500,y:140},{x:600,y:140}];case"Anbar_Muhavateh_Homayoun":return"Weight_Station_1"===a?[{x:350,y:500},{x:350,y:290},{x:650,y:290},{x:650,y:140},{x:500,y:140}]:[{x:1150,y:370},{x:1150,y:260},{x:650,y:260},{x:650,y:140},{x:500,y:140}];case"Anbar_Khamir_Ghadim":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:260},{x:600,y:260},{x:600,y:150}]:[{x:350,y:500},{x:350,y:260},{x:600,y:260},{x:600,y:150}];case"Anbar_Muhavateh_Kardan":return"Weight_Station_1"===a?[{x:350,y:500},{x:350,y:290},{x:1150,y:290},{x:1150,y:105},{x:970,y:105}]:[{x:1150,y:370},{x:1150,y:105},{x:970,y:105}];case"Anbar_Khamir_Kordan":return"Weight_Station_1"===a?[{x:350,y:500},{x:350,y:290},{x:1150,y:290},{x:1150,y:180},{x:970,y:180}]:[{x:1145,y:340},{x:1145,y:180},{x:970,y:180}];case"Anbar_PAK":return"Weight_Station_1"===a?[{x:350,y:500},{x:350,y:800},{x:1400,y:800},{x:1400,y:550}]:[{x:1150,y:370},{x:1070,y:550},{x:1070,y:800},{x:1400,y:800},{x:1400,y:550}];case"Anbar_Akhal":return"Weight_Station_1"===a?[{x:350,y:500},{x:350,y:800},{x:320,y:800},{x:320,y:920},{x:175,y:920}]:[{x:1150,y:370},{x:1070,y:550},{x:1070,y:800},{x:320,y:800},{x:320,y:920},{x:175,y:920}];default:return"Weight_Station_1"===a?[{x:350,y:500}]:[{x:1145,y:340}]}else switch(o){case"Anbar_Salon_Tolid":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:300},{x:320,y:300},{x:320,y:260},{x:450,y:260}]:[{x:350,y:500},{x:320,y:300},{x:320,y:260},{x:450,y:260}];case"Anbar_Sangin":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:300},{x:680,y:300},{x:680,y:625},{x:550,y:625}]:[{x:350,y:500},{x:350,y:300},{x:680,y:300},{x:680,y:625},{x:550,y:625}];case"Anbar_Khamir_Ghadim":return"Weight_Station_2"===a?[{x:1150,y:370},{x:1150,y:290},{x:680,y:290},{x:680,y:140},{x:580,y:140}]:[{x:350,y:500},{x:350,y:290},{x:680,y:290},{x:680,y:140},{x:580,y:140}];default:return"Weight_Station_2"===a?[{x:1150,y:370}]:[{x:350,y:500}]}case"LoadedUnloaded":const s=this.shipmentWeightStation[e.id];if("Incoming"===r)switch(o){case"Anbar_Salon_Tolid":return"Weight_Station_1"===s?[{x:350,y:320},{x:350,y:620}]:[{x:350,y:280},{x:1145,y:280},{x:1145,y:400}];case"Anbar_Sangin":return"Weight_Station_1"===s?[{x:660,y:570},{x:660,y:280},{x:350,y:280},{x:350,y:620}]:[{x:660,y:570},{x:660,y:280},{x:1150,y:280},{x:1150,y:450}];case"Anbar_Koochak":return"Weight_Station_1"===s?[{x:600,y:240},{x:600,y:300},{x:350,y:300},{x:350,y:620}]:[{x:600,y:240},{x:600,y:300},{x:1150,y:300},{x:1150,y:450}];case"Anbar_Parvandeh":return"Weight_Station_1"===s?[{x:600,y:240},{x:600,y:300},{x:350,y:300},{x:350,y:620}]:[{x:600,y:240},{x:600,y:300},{x:1150,y:300},{x:1150,y:450}];case"Anbar_Muhavateh_Homayoun":return"Weight_Station_1"===s?[{x:500,y:210},{x:500,y:280},{x:1150,y:280},{x:1150,y:450}]:[{x:500,y:210},{x:500,y:280},{x:350,y:280},{x:350,y:620}];case"Anbar_Khamir_Ghadim":return"Weight_Station_1"===s?[{x:600,y:150},{x:600,y:260},{x:350,y:260},{x:350,y:620}]:[{x:600,y:150},{x:600,y:260},{x:1150,y:260},{x:1150,y:450}];case"Anbar_Muhvateh_Kardan":return"Weight_Station_1"===s?[{x:1090,y:140},{x:1150,y:180},{x:1150,y:450}]:[{x:1090,y:140},{x:1090,y:280},{x:350,y:280},{x:350,y:620}];case"Anbar_Khamir_Kordan":return"Weight_Station_1"===s?[{x:1150,y:180},{x:1150,y:450}]:[{x:1150,y:180},{x:1150,y:280},{x:350,y:280},{x:350,y:620}];case"Anbar_PAK":return"Weight_Station_1"===s?[{x:1420,y:700},{x:1420,y:800},{x:1070,y:800},{x:1070,y:720},{x:1150,y:450},{x:1150,y:340}]:[{x:1420,y:700},{x:1420,y:800},{x:350,y:800},{x:350,y:620}];case"Anbar_Akhal":return"Weight_Station_1"===s?[{x:330,y:905},{x:330,y:800},{x:1070,y:800},{x:1070,y:720},{x:1150,y:550},{x:1150,y:370}]:[{x:330,y:905},{x:350,y:540}];default:return[{x:1170,y:370}]}else switch(o){case"Anbar_Salon_Tolid":return"Weight_Station_2"===s?[{x:350,y:290},{x:1150,y:290},{x:1150,y:400}]:[{x:350,y:320},{x:350,y:620}];case"Anbar_Sangin":return"Weight_Station_2"===s?[{x:660,y:560},{x:660,y:290},{x:1150,y:290},{x:1150,y:370}]:[{x:660,y:560},{x:660,y:300},{x:350,y:300},{x:350,y:620}];case"Anbar_Khamir_Ghadim":return"Weight_Station_2"===s?[{x:600,y:140},{x:600,y:260},{x:1150,y:260},{x:1150,y:370}]:[{x:600,y:140},{x:600,y:260},{x:350,y:260},{x:350,y:620}];default:return"Weight_Station_2"===s?[{x:1150,y:400}]:[{x:350,y:620}]}case"Office":const l=this.shipmentWeightStation[e.id];return"Weight_Station_2"===l?[{x:1150,y:370},{x:1070,y:550},{x:1070,y:750}]:[t||{x:350,y:540},{x:350,y:600},{x:350,y:750}];case"Delivered":const n=this.shipmentWeightStation[e.id];return"Weight_Station_2"===n?[t||{x:1070,y:750},{x:1070,y:820},{x:0,y:820}]:[t||{x:350,y:750},{x:350,y:820},{x:0,y:820}];default:return[]}},detectTurnType(e,t,a){const r=Math.atan2(t.y-e.y,t.x-e.x),o=Math.atan2(a.y-t.y,a.x-t.x);let s=Math.abs(o-r)*(180/Math.PI);return s>180&&(s=600-s),s<45?"slight":s<135?"corner":"uturn"},getAnimatedTruckPosition(e){const t=this.truckAnimations[e.id];return t&&void 0!==t.currentX&&void 0!==t.currentY?{x:t.currentX,y:t.currentY}:this.getTruckEndPosition(e)},getAnimatedTruckRotation(e){const t=this.truckAnimations[e.id];return t&&void 0!==t.rotation?t.rotation:this.getTruckRotation(e)},async openProductsDialog(e){this.selectedWarehouse=e,this.dialogType="products",this.loadingDetails=!0,this.showInventoryDialog=!0;try{const t=await Zx.A.get(`/myapp/api/getWarehouseInventoryDetails?warehouse=${e}`);"success"===t.data.status&&(this.selectedWarehouseDetails=t.data)}catch(t){console.error("Error fetching warehouse details:",t),this.selectedWarehouseDetails=null}finally{this.loadingDetails=!1}},async openRawMaterialsDialog(e){this.selectedWarehouse=e,this.dialogType="Anbar_Salon_Tolid"===e?"profiles":"rawMaterials",this.loadingDetails=!0,this.showInventoryDialog=!0;try{const t=await Zx.A.get(`/myapp/api/getWarehouseInventoryDetails?warehouse=${e}`);"success"===t.data.status&&(this.selectedWarehouseDetails=t.data)}catch(t){console.error("Error fetching warehouse details:",t),this.selectedWarehouseDetails=null}finally{this.loadingDetails=!1}},closeInventoryDialog(){this.showInventoryDialog=!1,this.selectedWarehouse=null,this.selectedWarehouseDetails=null,this.dialogType=null},async openCargoDialog(e){this.showCargoDialog=!0,this.loadingCargoDetails=!0,this.selectedShipment=null;try{const t=await Zx.A.get(`/myapp/api/getShipmentCargoDetails?shipment_id=${e.id}`);"success"===t.data.status?this.selectedShipment=t.data.data:this.selectedShipment=e}catch(t){console.error("Error fetching cargo details:",t),this.selectedShipment=e}finally{this.loadingCargoDetails=!1}},closeCargoDialog(){this.showCargoDialog=!1,this.selectedShipment=null,this.loadingCargoDetails=!1},parseReelsList(e){return e?e.replace(/\s/g,"").split(",").filter(e=>e):[]},getCylinderHeight(e,t){const a=40,r=120;return t&&0!==t?a+e/t*(r-a):a},getCubeSize(e,t){const a=50,r=100;return t&&0!==t?a+e/t*(r-a):a},getMaxCount(e,t="count"){return e&&0!==e.length?Math.max(...e.map(e=>e[t]||0),1):1},playTruckSound(e){this.truckAudios[e]||(this.truckAudios[e]=new Audio("/static/sounds/mixkit-tractor-driving-away-1599.wav"),this.truckAudios[e].loop=!0,this.truckAudios[e].volume=.3,this.truckAudios[e].currentTime=0,this.truckAudios[e].play().catch(t=>{console.log("Audio play failed for truck "+e+":",t)}))},stopTruckSound(e){this.truckAudios[e]&&(this.truckAudios[e].pause(),this.truckAudios[e].currentTime=0)},stopAllTruckSounds(){Object.keys(this.truckAudios).forEach(e=>{this.stopTruckSound(e)})},playForkliftSound(e){this.forkliftAudios[e]||(this.forkliftAudios[e]=new Audio("/static/sounds/forklift-motion.mp3"),this.forkliftAudios[e].loop=!0,this.forkliftAudios[e].volume=.3,this.forkliftAudios[e].currentTime=0,this.forkliftAudios[e].play().catch(e=>{console.log("Audio play failed for forklift "+truckId+":",e)}))},stopForkliftSound(e){this.forkliftAudios[e]&&(this.forkliftAudios[e].pause(),this.forkliftAudios[e].currentTime=0)},stopAllForkliftSounds(){Object.keys(this.forkliftAudios).forEach(e=>{this.stopForkliftSound(e)})},isAnyTruckMoving(){return Object.values(this.truckAnimations).some(e=>e&&e.animating)},getPreviousStatus(e){const t={LoadingUnloading:"Registered",LoadedUnloaded:"LoadingUnloading",Office:"LoadedUnloaded",Delivered:"Office"};return t[e]||null},getForkliftWaypoints(e){const t=e.shipment_type,a=e.unload_location,r=this.forkliftWarehousePositions[a],o=this.forkliftTruckPositions[a];if(!r||!o)return{truck:{x:0,y:0},warehouse:{x:0,y:0},waypoints:[]};switch(a){case"Anbar_Salon_Tolid":return"Incoming"===t?{truck:o,warehouse:r,waypoints:[o,r]}:{truck:{x:o.x,y:o.y-60},warehouse:{x:r.x,y:r.y-60},waypoints:[{x:o.x,y:o.y-60},{x:r.x,y:r.y-60}]};case"Anbar_Sangin":return"Incoming"===t?{truck:o,warehouse:r,waypoints:[o,r]}:{truck:{x:o.x,y:o.y+130},warehouse:{x:r.x,y:r.y+130},waypoints:[{x:o.x,y:o.y+130},{x:r.x,y:r.y+130}]};case"Anbar_Khamir_Ghadim":return"Incoming"===t?{truck:o,warehouse:r,waypoints:[o,r]}:{truck:{x:o.x,y:o.y-30},warehouse:{x:r.x,y:r.y-30},waypoints:[{x:o.x,y:o.y-30},{x:r.x,y:r.y-30}]};case"Anbar_Koochak":case"Anbar_Parvandeh":case"Anbar_Muhavateh_Homayoun":case"Anbar_Khamir_Kordan":case"Anbar_Muhvateh_Kardan":case"Anbar_PAK":case"Anbar_Akhal":return{truck:o,warehouse:r,waypoints:[o,r]};default:return{truck:o,warehouse:r||o,waypoints:[o,r||o]}}},startForkliftAnimation(e){const t="forklift-"+e.id,a=this.getForkliftWaypoints(e),r="Incoming"===e.shipment_type,o=[...a.waypoints].reverse(),s=[...a.waypoints];this.forkliftAnimations[t]||(this.forkliftAnimations[t]={currentX:0,currentY:0,hasCargo:!1,phase:"toTruck",animating:!0}),this.forkliftAnimations[t].currentX=a.warehouse.x,this.forkliftAnimations[t].currentY=a.warehouse.y,this.forkliftAnimations[t].hasCargo=!r,this.forkliftAnimations[t].animating=!0;const l=4e3;let n=0,i=o,d="toTruck";const u=()=>{const a=this.activeShipments.find(t=>t.id===e.id);if(!a||"LoadingUnloading"!==a.status)return this.forkliftAnimations[t]&&(this.forkliftAnimations[t].animating=!1),void this.stopForkliftSound(t);if(n>=i.length-1)return"toTruck"===d?(d="toWarehouse",i=s,this.forkliftAnimations[t].hasCargo=r,this.forkliftAnimations[t].phase="toWarehouse"):(d="toTruck",i=o,this.forkliftAnimations[t].hasCargo=!r,this.forkliftAnimations[t].phase="toTruck"),n=0,this.$nextTick(()=>{this.forkliftUpdateCounter++,this.$forceUpdate()}),void setTimeout(u,500);const c=i[n],m=i[n+1],h=Date.now(),p=()=>{const e=Date.now()-h,a=Math.min(e/l,1),r=a<.5?2*a*a:(4-2*a)*a-1,o=c.x+(m.x-c.x)*r,s=c.y+(m.y-c.y)*r,i=this.forkliftAnimations[t];i&&(i.currentX=o,i.currentY=s),a<1?this.forkliftAnimationFrames[t]=requestAnimationFrame(p):(n++,setTimeout(u,100))};p()};u()},stopForkliftAnimation(e){const t="forklift-"+e;this.forkliftAnimationFrames[t]&&cancelAnimationFrame(this.forkliftAnimationFrames[t]),this.forkliftAnimations[t]&&(this.forkliftAnimations[t].animating=!1),this.stopForkliftSound(t)},getForkliftPosition(e){const t="forklift-"+e,a=this.forkliftAnimations[t];return a?{x:a.currentX,y:a.currentY}:{x:0,y:0}},forkliftHasCargo(e){const t="forklift-"+e,a=this.forkliftAnimations[t];return!!a&&a.hasCargo},isStaticForkliftHidden(e){const t=this.activeShipments.filter(e=>"LoadingUnloading"===e.status),a=this.activeWarehouseMovement;switch(e){case 1:const e=["Anbar_Koochak","Anbar_Parvandeh","Anbar_Khamir_Ghadim","Anbar_Muhavateh_Homayoun"];return!!t.some(t=>e.includes(t.unload_location))||!(!a||!e.includes(a.from_anbar)&&!e.includes(a.to_anbar));case 2:const r=["Anbar_Muhvateh_Kardan","Anbar_Muhvateh_Kardan","Anbar_Khamir_Kordan"];return!!t.some(e=>r.includes(e.unload_location))||!(!a||!r.includes(a.from_anbar)&&!r.includes(a.to_anbar));case 3:const o=["Anbar_Salon_Tolid","Anbar_Sangin"];return!!t.some(e=>o.includes(e.unload_location))||!(!a||!o.includes(a.from_anbar)&&!o.includes(a.to_anbar));default:return!1}},getStaticForkliftPosition(e){const t=[{id:1,x:600,y:95},{id:2,x:1080,y:35},{id:3,x:270,y:255}],a=this.getWarehouseForkliftPosition(e);if(!a||0===a.x&&0===a.y)return{x:270,y:255};let r=t[0],o=1/0;for(const s of t){const e=s.x-a.x,t=s.y-a.y,l=Math.sqrt(e*e+t*t);l<o&&(o=l,r=s)}return{x:r.x,y:r.y}},getNearestForkliftId(e){const t=[{id:1,x:600,y:95},{id:2,x:1080,y:35},{id:3,x:270,y:255}],a=this.getWarehouseForkliftPosition(e);if(!a||0===a.x&&0===a.y)return 3;let r=1,o=1/0;for(const s of t){const e=s.x-a.x,t=s.y-a.y,l=Math.sqrt(e*e+t*t);l<o&&(o=l,r=s.id)}return r},getWarehouseForkliftPosition(e){return this.forkliftWarehousePositions[e]||{x:0,y:0}},getWarehouseToWarehousePath(e,t){const a=this.getWarehouseForkliftPosition(e),r=this.getWarehouseForkliftPosition(t),o=`${e}_to_${t}`,s=`${t}_to_${e}`,l={Anbar_Salon_Tolid_to_Anbar_Sangin:[a,{x:500,y:300},{x:750,y:460},r],Anbar_Sangin_to_Anbar_Salon_Tolid:[a,{x:750,y:460},{x:500,y:300},r],Anbar_Salon_Tolid_to_Anbar_Khamir_Ghadim:[a,{x:600,y:320},{x:550,y:60},{x:750,y:60},r],Anbar_Khamir_Ghadim_to_Anbar_Salon_Tolid:[a,{x:750,y:60},{x:550,y:60},{x:600,y:320},r],Anbar_Khamir_Kordan_to_Anbar_Muhvateh_Kardan:[a,{x:1220,y:170},{x:980,y:100},r],Anbar_Muhvateh_Kardan_to_Anbar_Khamir_Kordan:[a,{x:980,y:100},{x:1220,y:170},r],Anbar_Khamir_Kordan_to_Anbar_Akhal:[a,{x:1300,y:170},{x:1100,y:170},{x:1100,y:320},{x:350,y:320},{x:350,y:870},r],Anbar_Akhal_to_Anbar_Khamir_Kordan:[a,{x:350,y:870},{x:350,y:320},{x:1100,y:320},{x:1100,y:170},{x:1300,y:170},r]};return l[o]?{from:a,to:r,waypoints:l[o]}:l[s]?{from:a,to:r,waypoints:[...l[s]].reverse()}:{from:a,to:r,waypoints:[a,r]}},processMovementQueue(){if(this.processingMovementQueue||0===this.warehouseMovementQueue.length)return;this.processingMovementQueue=!0;const e=this.warehouseMovementQueue.shift();this.startWarehouseMovement(e)},startWarehouseMovement(e){const t=`wh-movement-${Date.now()}`,{from_anbar:a,to_anbar:r,quantity:o}=e;console.log(`🚜 Starting warehouse movement: ${a} → ${r} (${o} trips)`),this.activeWarehouseMovement={id:t,from_anbar:a,to_anbar:r,quantity:o,currentTrip:1};const s=this.getWarehouseToWarehousePath(a,r),l=s.from,n=s.to,i=this.getStaticForkliftPosition(a);this.warehouseForkliftAnimations[t]={currentX:i.x,currentY:i.y,hasCargo:!1,animating:!0},this.playForkliftSound(t);const d=6e3;let u=1,c=o,m="toSource",h=0;const p=e=>{switch(e){case"toSource":return[i,l];case"toDestination":return s.waypoints;case"toStatic":const e=[...s.waypoints].reverse();return e.push(i),e;default:return[i]}};let g=p(m);const f=()=>{if(!this.warehouseForkliftAnimations[t]?.animating)return this.stopForkliftSound(t),void this.finishWarehouseMovement(t);if(h>=g.length-1){if("toSource"===m)return console.log(`📦 Trip ${u}: Picking up cargo from ${a}`),this.warehouseForkliftAnimations[t]={...this.warehouseForkliftAnimations[t],hasCargo:!0},m="toDestination",g=p(m),h=0,void setTimeout(f,800);if("toDestination"===m)return console.log(`📦 Trip ${u}: Delivered cargo to ${r}`),this.warehouseForkliftAnimations[t]={...this.warehouseForkliftAnimations[t],hasCargo:!1},u>=c?(m="toStatic",g=p(m),h=0,void setTimeout(f,800)):(u++,this.activeWarehouseMovement.currentTrip=u,m="toSource",g=[n,l],h=0,void setTimeout(f,800));if("toStatic"===m)return console.log(`✅ All ${c} trips completed! Forklift returned to static position.`),void this.finishWarehouseMovement(t)}const e=g[h],o=g[h+1],s=Date.now(),i=()=>{if(!this.warehouseForkliftAnimations[t]?.animating)return this.stopForkliftSound(t),void this.finishWarehouseMovement(t);const a=Date.now()-s,r=Math.min(a/d,1),l=r<.5?2*r*r:(4-2*r)*r-1,n=e.x+(o.x-e.x)*l,u=e.y+(o.y-e.y)*l;this.warehouseForkliftAnimations[t]={...this.warehouseForkliftAnimations[t],currentX:n,currentY:u},r<1?this.warehouseForkliftAnimationFrames[t]=requestAnimationFrame(i):(h++,setTimeout(f,100))};this.warehouseForkliftAnimationFrames[t]=requestAnimationFrame(i)};f()},finishWarehouseMovement(e){this.stopForkliftSound(e),this.warehouseForkliftAnimationFrames[e]&&(cancelAnimationFrame(this.warehouseForkliftAnimationFrames[e]),delete this.warehouseForkliftAnimationFrames[e]),delete this.warehouseForkliftAnimations[e],this.activeWarehouseMovement=null,this.processingMovementQueue=!1,this.$forceUpdate(),this.$nextTick(()=>{this.processMovementQueue()})},getWarehouseForkliftAnimPosition(){if(this.activeWarehouseMovement){const e=this.activeWarehouseMovement.id,t=this.warehouseForkliftAnimations[e];if(t)return{x:t.currentX,y:t.currentY}}return null},warehouseForkliftHasCargo(){if(this.activeWarehouseMovement){const e=this.activeWarehouseMovement.id;return this.warehouseForkliftAnimations[e]?.hasCargo||!1}return!1},getWarehouseCylinders(e){const t=this.warehouseInventoryDetails[e];if(!t||!t.products||!Array.isArray(t.products))return[];const a=this.cylinderConfig[e];if(!a)return[];const r=[];let o=0;return t.products.forEach(t=>{const{width:s,count:l,weight:n}=t,i=Math.floor(l/14),d=l%14,u=d>0,c=5,m=Math.floor(a.cylindersPerRow/2),h=Math.floor(o/m),p=o%m;if(h>=a.maxRows)return;const g=2*a.spacingX,f=a.startX+p*(g+c),y=a.startY+h*a.spacingY;i>0&&r.push({id:`${e}-${s}-full`,x:f,y:y,rx:a.radius.rx,ry:a.radius.ry,height:a.height,isFull:!0,width:s,quotient:i,reelCount:14*i,weight:(n/l*(14*i)).toFixed(2),hasHalf:u,groupWidth:u?a.spacingX:0}),u&&r.push({id:`${e}-${s}-half`,x:i>0?f+a.spacingX:f,y:y,rx:a.radius.rx,ry:a.radius.ry,height:a.height/2,isFull:!1,width:s,quotient:0,reelCount:d,weight:(n/l*d).toFixed(2),showBracket:0===i}),o++}),r},getWarehouseAkhalPacks(e){const t=this.warehouseInventoryDetails[e];if(!t||!t.akhals||!Array.isArray(t.akhals)||0===t.akhals.length)return[];const a=this.akhalPackConfig[e];if(!a)return[];const r=[];let o=0;const s=a.packsPerRow*a.maxRows;return t.akhals.forEach(t=>{if(o>=s)return;const{kind:l,weight:n}=t,i=Math.floor(o/a.packsPerRow),d=o%a.packsPerRow;r.push({id:`${e}-akhal-${l}`,x:a.startX+d*a.spacingX,y:a.startY+i*a.spacingY,kind:l,weight:n}),o++}),r},shouldShowReel(e,t=null){const a=["Anbar_Salon_Tolid","Anbar_Khamir_Ghadim","Anbar_Sangin"];if("shipment"===e&&t)return"Outgoing"===t.shipment_type;if("warehouse"===e&&this.activeWarehouseMovement){const e=this.activeWarehouseMovement.from_anbar,t=this.activeWarehouseMovement.to_anbar;return a.includes(e)||a.includes(t)}return!1},showCylinderTooltip(e,t){let a="";if(t.isFull){const e=14*t.quotient;a=`${t.width}mm × ${t.quotient} (${e} reels) - ${t.weight}t`}else a=`${t.width}mm (${t.reelCount} reels) - ${t.weight}t`;this.tooltip={visible:!0,content:a,x:t.x,y:t.y-25}},showAkhalTooltip(e,t){const a=`${t.kind} - ${t.weight}t`;this.tooltip={visible:!0,content:a,x:t.x+20,y:t.y-10}},showPMDailyProductionTooltip(e,t){let a="",r=0,o=0;"PM2"===t?(a=`${this.todayPm2Count} - تعداد کل تولید امروز`,r=this.productionLineBadgePosition["PM2_daily"].x,o=this.productionLineBadgePosition["PM2_daily"].y):"PM3"===t?(a=`${this.todayPm3Count} - تعداد کل تولید امروز`,r=this.productionLineBadgePosition["PM3_daily"].x,o=this.productionLineBadgePosition["PM3_daily"].y):(a=`${this.todayPm4Count} - تعداد کل تولید امروز`,r=this.productionLineBadgePosition["PM4_daily"].x,o=this.productionLineBadgePosition["PM4_daily"].y),this.tooltip={visible:!0,content:a,x:r+20,y:o-10}},showPMWeeklyProductionTooltip(e,t){let a="",r=0,o=0;"PM2"===t?(a=`${this.pm2Count} -  کل تولید 7 روز گذشته`,r=this.productionLineBadgePosition["PM2_weekly"].x,o=this.productionLineBadgePosition["PM2_weekly"].y):"PM3"===t?(a=`${this.pm3Count} -  کل تولید 7 روز گذشته`,r=this.productionLineBadgePosition["PM3_weekly"].x,o=this.productionLineBadgePosition["PM3_weekly"].y):(a=`${this.pm4Count} -  کل تولید 7 روز گذشته`,r=this.productionLineBadgePosition["PM4_weekly"].x,o=this.productionLineBadgePosition["PM4_weekly"].y),this.tooltip={visible:!0,content:a,x:r+20,y:o-10}},hideTooltip(){this.tooltip.visible=!1},async refreshWarehouseInventory(e){try{let t;if(t="Anbar_Salon_Tolid"===e?await Zx.A.get("/myapp/api/getAnbarSalonTolidDetails"):await Zx.A.get(`/myapp/api/getWarehouseInventoryDetails?warehouse=${e}`),"success"===t.data.status){this.warehouseInventoryDetails[e]=t.data.data;const a=this.warehouseInventoryDetails[e];this.warehouseInventory[e]=a.total_count||0,console.log(`✅ Inventory refreshed for: ${e}`),this.$forceUpdate()}}catch(t){console.error(`❌ Failed to refresh inventory for ${e}:`,t)}},isWarehouseActive(e){return this.activeShipments.some(t=>"LoadingUnloading"===t.status&&t.unload_location===e)},isWeightStation1Active(){return this.activeShipments.some(e=>{const t=this.shipmentWeightStation[e.id];return"Weight_Station_1"===t&&("Registered"===e.status||"LoadedUnloaded"===e.status)})},isWeightStation2Active(){return this.activeShipments.some(e=>{const t=this.shipmentWeightStation[e.id];return"Weight_Station_2"===t&&("Registered"===e.status||"LoadedUnloaded"===e.status)})},isOfficeActive(){return this.activeShipments.some(e=>"Office"===e.status)},isLocationBusy(e,t=null){return this.activeShipments.some(a=>{if(t&&a.id===t)return!1;const r=this.getShipmentCurrentLocation(a);return r===e})},getShipmentCurrentLocation(e){const{status:t,unload_location:a}=e,r=this.shipmentWeightStation[e.id];switch(t){case"Registered":return r||"Weight_Station_1";case"LoadingUnloading":return a||r||"Weight_Station_1";case"LoadedUnloaded":return r||"Weight_Station_1";case"Office":return"Weight_Station_2"===r?"Office_Right":"Office_Left";default:return null}},getShipmentCurrentPhysicalLocation(e){const{status:t,unload_location:a}=e,r=this.shipmentWeightStation[e.id],o=this.truckAnimations[e.id];if(o&&o.animating)return null;switch(t){case"Registered":return o&&void 0!==o.currentX?r||"Weight_Station_1":null;case"LoadingUnloading":return a;case"LoadedUnloaded":return r||"Weight_Station_1";case"Office":return o&&o.animating?"Weight_Station_2"===r?"Office_Right":"Office_Left":r||"Weight_Station_1";case"Delivered":return null;default:return null}},isAnbarSalonTolidBusy(e=null){return this.isLocationBusy("Anbar_Salon_Tolid",e)},isWeightStation1Busy(e=null){return this.isLocationBusy("Weight_Station_1",e)},isWeightStation2Busy(e=null){return this.isLocationBusy("Weight_Station_2",e)},isOfficeBusy(e=null){return this.isLocationBusy("Office",e)},getShipmentDestination(e){const{status:t,unload_location:a,material_type:r}=e,o=r&&-1!==r.indexOf("آخال"),s=this.shipmentWeightStation[e.id];switch(t){case"Registered":return s||(o?"Weight_Station_2":"Weight_Station_1");case"LoadingUnloading":return a||(o?"Weight_Station_2":"Weight_Station_1");case"LoadedUnloaded":return s||(o?"Weight_Station_2":"Weight_Station_1");case"Office":return"Weight_Station_2"===s?"Office_Right":"Office_Left";default:return null}},isDestinationBusy(e,t=null){console.log(`🔍 Checking if ${e} is busy (excluding ${t})`);const a=this.activeShipments.some(a=>{if(t&&a.id===t)return!1;const r=this.getShipmentDestination(a),o=this.getShipmentCurrentPhysicalLocation(a);if(console.log(`  - Shipment ${a.id} (${a.status}): dest=${r}, current=${o}`),r===e||o===e){const t=this.truckAnimations[a.id];return console.log(`    Match! anim exists: ${!!t}, animating: ${t?.animating}`),!t||!t.animating||o!==e||r===e}return!1});return console.log(`🔍 Result: ${e} is ${a?"BUSY":"FREE"}`),a},addToQueue(e,t,a){this.truckQueue[e]||(this.truckQueue[e]=[]),this.truckQueue[e].find(e=>e.shipment.id===t.id)||(this.truckQueue[e].push({shipment:t,waypoints:a}),console.log(`Truck ${t.id} queued for ${e}. Queue size: ${this.truckQueue[e].length}`))},processQueue(e){if(this.truckQueue[e]&&0!==this.truckQueue[e].length&&!this.isDestinationBusy(e)){const t=this.truckQueue[e].shift();t&&(console.log(`Processing queued truck ${t.shipment.id} for ${e}`),this.startTruckWithDestination(t.shipment,t.waypoints,e))}},startTruckWithDestination(e,t,a){this.truckAnimations[e.id]={currentX:t[0].x,currentY:t[0].y,rotation:this.truckAnimations[e.id]?.rotation||0,animating:!1,targetDestination:a},setTimeout(()=>{this.animateTruckAlongPath(e,t)},100)},getAvailableWeightStation(e,t=!0){const a=e.material_type,r=a&&-1!==a.indexOf("آخال"),o=r?"Weight_Station_2":"Weight_Station_1",s=r?"Weight_Station_1":"Weight_Station_2";if(console.log(`🚛 getAvailableWeightStation for ${e.id}:`,{defaultStation:o,alternativeStation:s,checkAlternative:t}),!t)return o;const l=this.isDestinationBusy(o,e.id);if(console.log(`🚛 Is ${o} busy? ${l}`),l){const t=this.isDestinationBusy(s,e.id);if(console.log(`🚛 Is ${s} busy? ${t}`),!t)return console.log(`🚛 Returning alternative: ${s}`),s}return console.log(`🚛 Returning default: ${o}`),o},getEntranceQueuePosition(e){const t=this.entranceQueue.indexOf(e);return-1===t||t>=this.entranceQueuePositions.length?this.entranceQueuePositions[this.entranceQueuePositions.length-1]:this.entranceQueuePositions[t]},addToEntranceQueue(e){if(!this.entranceQueue.includes(e.id)){this.entranceQueue.push(e.id),console.log(`🚛 Truck ${e.id} added to entrance queue. Position: ${this.entranceQueue.length}`);const t=this.getEntranceQueuePosition(e.id);this.truckAnimations[e.id]={currentX:t.x,currentY:t.y,rotation:0,animating:!1,inEntranceQueue:!0}}},processEntranceQueue(){if(0!==this.entranceQueue.length&&this.trucksInsideFactory<this.MAX_TRUCKS_INSIDE){const e=this.entranceQueue.shift(),t=this.activeShipments.find(t=>t.id===e);if(t){console.log(`🚗 Processing entrance queue - Truck ${e} can now enter!`),this.truckAnimations[e]&&(this.truckAnimations[e].inEntranceQueue=!1);const a=this.getWaypointsForShipment(t,null),r=this.getShipmentDestination(t);a.length>1&&this.startTruckWithDestination(t,a,r)}this.updateEntranceQueuePositions()}},updateEntranceQueuePositions(){this.entranceQueue.forEach((e,t)=>{const a=this.entranceQueuePositions[t]||this.entranceQueuePositions[this.entranceQueuePositions.length-1];this.truckAnimations[e]&&(this.truckAnimations[e].currentX=a.x,this.truckAnimations[e].currentY=a.y)})}},watch:{activeShipments:{handler(e,t){const a=!t||0===t.length;if(e.forEach(e=>{const t=localStorage.getItem(`truckStation_${e.id}`);if(t)this.shipmentWeightStation[e.id]=t;else if(!this.shipmentWeightStation[e.id]){const t=e.material_type&&-1!==e.material_type.indexOf("آخال");this.shipmentWeightStation[e.id]=t?"Weight_Station_2":"Weight_Station_1"}}),a){const t={};e.forEach(e=>{const a=this.shipmentWeightStation[e.id];!a||"Registered"!==e.status&&"LoadedUnloaded"!==e.status||(t[a]||(t[a]=[]),t[a].push(e.id))}),Object.entries(t).forEach(([e,a])=>{if(a.length>1){const r="Weight_Station_1"===e?"Weight_Station_2":"Weight_Station_1";for(let e=1;e<a.length;e++){const o=a[e],s=t[r]?.length||0;s<a.length-e&&(this.shipmentWeightStation[o]=r,localStorage.setItem(`truckStation_${o}`,r),t[r]||(t[r]=[]),t[r].push(o))}}})}if(e.forEach(e=>{const r=t?.find(t=>t.id===e.id),o=r&&r.unload_location!==e.unload_location,s=!r||r.status!==e.status;if(s||o){const t=this.truckAnimations[e.id],r=t?{x:t.currentX,y:t.currentY}:null;this.animationFrames[e.id]&&cancelAnimationFrame(this.animationFrames[e.id]);let o=this.getShipmentDestination(e);if("LoadingUnloading"===e.status&&e.unload_location){const t=localStorage.getItem(`truckStation_${e.id}`);t&&(localStorage.removeItem(`truckStation_${e.id}`),console.log(`🗑️ Cleared station for truck ${e.id} (going to warehouse)`))}const s=localStorage.getItem(`truckStation_${e.id}`),l=!s&&("Registered"===e.status||"LoadedUnloaded"===e.status);if(("Weight_Station_1"===o||"Weight_Station_2"===o)&&l){if(this.isDestinationBusy(o,e.id)){const t="Weight_Station_1"===o?"Weight_Station_2":"Weight_Station_1";this.isDestinationBusy(t,e.id)||(this.shipmentWeightStation[e.id]=t,o=t)}localStorage.setItem(`truckStation_${e.id}`,o)}const n=this.getWaypointsForShipment(e,r);if(n.length>1){if("Registered"===e.status){const t=this.activeShipments.filter(t=>"Delivered"!==t.status&&!this.entranceQueue.includes(t.id)&&t.id!==e.id).length;if(t>=this.MAX_TRUCKS_INSIDE)return void this.addToEntranceQueue(e)}if(a)if("Registered"===e.status||"LoadingUnloading"===e.status||"LoadedUnloaded"===e.status||"Office"===e.status||"Delivered"===e.status)this.startTruckWithDestination(e,n,o);else{const t=this.getTruckEndPosition(e),a=this.getTruckRotation(e);this.truckAnimations[e.id]={currentX:t.x,currentY:t.y,rotation:a,animating:!1,flipX:1}}else o&&this.isDestinationBusy(o,e.id)?(this.addToQueue(o,e,n),this.truckAnimations[e.id]||(this.truckAnimations[e.id]={currentX:n[0].x,currentY:n[0].y,rotation:this.getTruckRotation(e),animating:!1,flipX:1})):("LoadingUnloading"!==e.status&&"Office"!==e.status||localStorage.setItem(`truckStation_${e.id}`,this.shipmentWeightStation[e.id]),this.startTruckWithDestination(e,n,o))}else 1===n.length&&(this.truckAnimations[e.id]||(this.truckAnimations[e.id]={}),this.truckAnimations[e.id].currentX=n[0].x,this.truckAnimations[e.id].currentY=n[0].y,this.truckAnimations[e.id].animating=!1,void 0===this.truckAnimations[e.id].rotation&&(this.truckAnimations[e.id].rotation=this.getTruckRotation(e)))}}),e.forEach(e=>{if(!this.truckAnimations[e.id]){const t=this.getTruckEndPosition(e),a=this.getTruckRotation(e);this.truckAnimations[e.id]={currentX:t.x,currentY:t.y,rotation:a,animating:!1,flipX:1}}}),e.length>0&&!a){const t=e.map(e=>e.id);Object.keys(localStorage).forEach(e=>{if(e.startsWith("truckStation_")){const a=parseInt(e.replace("truckStation_",""));t.includes(a)||(localStorage.removeItem(e),console.log(`🗑️ Cleaned up localStorage for truck ${a}`))}})}},deep:!0,immediate:!0}}};const Hx=(0,d.A)(jx,[["render",zx],["__scopeId","data-v-16c3c0d1"]]);var Gx=Hx;const Vx=[{path:"/",name:"home",component:k},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,603))},{path:"/myapp/addTruck/",name:"addTruck",component:at},{path:"/myapp/addSupplier/",name:"addSupplier",component:gt},{path:"/myapp/addCustomer/",name:"addCustomer",component:Mt},{path:"/myapp/addRawMaterial/",name:"addRawMaterial",component:Ht},{path:"/myapp/addNewReel/",name:"addNewReel",component:Ka},{path:"/myapp/addNewPM2Reel/",name:"addNewPM2Reel",component:xr},{path:"/myapp/addNewPM3Reel/",name:"addNewPM3Reel",component:lo},{path:"/myapp/addNewPM4Reel/",name:"addNewPM4Reel",component:jo},{path:"/myapp/forkliftPanel/",name:"forkliftPanel",component:Ol},{path:"/myapp/addShipment/",name:"addShipment",component:un},{path:"/myapp/createSalesOrder/",name:"createSalesOrder",component:Sn},{path:"/myapp/createPurchaseOrder/",name:"createPurchaseOrder",component:zn},{path:"/myapp/updateWeight1/",name:"updateWeight1",component:ii},{path:"/myapp/updateWeight2/",name:"updateWeight2",component:Ci},{path:"/myapp/weightStationPanel/",name:"weightStationPanel",component:Wi},{path:"/myapp/addNewAnbar/",name:"addNewAnbar",component:Hi},{path:"/myapp/addUnit/",name:"addNewUnit",component:cd},{path:"/myapp/addMaterialType/",name:"addNewMatrialType",component:Ld},{path:"/myapp/addConsumptionProfile/",name:"addConsumptionProfile",component:Hd},{path:"/myapp/cancel/",name:"cancel",component:Mu},{path:"/myapp/report/",name:"report",component:rc},{path:"/myapp/chooseReport/",name:"chooseReport",component:mc},{path:"/myapp/productsReport/",name:"productsReport",component:Tc},{path:"/myapp/shipmentReport/",name:"shipmentReport",component:lm},{path:"/myapp/salesReport/",name:"salesReport",component:Fm},{path:"/myapp/purchasesReport/",name:"purchasesReport",component:eh},{path:"/myapp/rawMaterialReport/",name:"rawMaterialReport",component:Ch},{path:"/myapp/consumptionReport/",name:"consumptionReport",component:Hh},{path:"/myapp/alertsReport/",name:"alertsReport",component:kp},{path:"/myapp/",name:"AllPages",component:_p},{path:"/myapp/ProductsPage/",name:"Products",component:Rp},{path:"/myapp/invoicePage/",name:"invoicePage",component:bf},{path:"/myapp/FactoryMap/",name:"FactoryMap",component:Gx}],qx=(0,m.aE)({history:(0,m.LA)(),routes:Vx});var Jx=qx,Yx=a(6942),ev=a(9937);Zx.A.defaults.xsrfCookieName="csrftoken",Zx.A.defaults.xsrfHeaderName="X-CSRFTOKEN";const tv=(0,r.Ef)(c);tv.use(Yx.A,Zx.A),tv.use(Jx),tv.use(ev.z),tv.mount("#app")}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,o,s){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],s=e[u][2];for(var n=!0,i=0;i<r.length;i++)(!1&s||l>=s)&&Object.keys(a.O).every(function(e){return a.O[e](r[i])})?r.splice(i--,1):(n=!1,s<l&&(l=s));if(n){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var s=Object.create(null);a.r(s);var l={};e=e||[null,t({}),t([]),t(t)];for(var n=2&o&&r;("object"==typeof n||"function"==typeof n)&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach(function(e){l[e]=function(){return r[e]}});return l["default"]=function(){return r},a.d(s,l),s}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce(function(t,r){return a.f[r](e,t),t},[]))}}(),function(){a.u=function(e){return"js/"+(594===e?"about":e)+"."+{179:"6f79753f",427:"e3ba0749",594:"e9a8bf31"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";a.l=function(r,o,s,l){if(e[r])e[r].push(o);else{var n,i;if(void 0!==s)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==t+s){n=c;break}}n||(i=!0,n=document.createElement("script"),n.charset="utf-8",a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+s),n.src=r),e[r]=[o];var m=function(t,a){n.onerror=n.onload=null,clearTimeout(h);var o=e[r];if(delete e[r],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach(function(e){return e(a)}),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),i&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/static/"}(),function(){var e={524:0};a.f.j=function(t,r){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var s=new Promise(function(a,r){o=e[t]=[a,r]});r.push(o[2]=s);var l=a.p+a.u(t),n=new Error,i=function(r){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;n.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",n.name="ChunkLoadError",n.type=s,n.request=l,o[1](n)}};a.l(l,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,l=r[0],n=r[1],i=r[2],d=0;if(l.some(function(t){return 0!==e[t]})){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(i)var u=i(a)}for(t&&t(r);d<l.length;d++)s=l[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],function(){return a(8744)});r=a.O(r)})();
//# sourceMappingURL=app.80e36aad.js.map